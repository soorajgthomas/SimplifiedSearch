define("holdoutExpRecorder",["dctk/dctk","jquery"],function(d,g){var l=function(a,c,b){try{a?d&&d.enabled&&"function"===typeof d.evaluateExperimentAndLog&&d.evaluateExperimentAndLog({id:16125,callback:function(a){!a||2!==a.value&&3!==a.value?b&&b.areLoyaltyPlacementsInitiallyHidden&&e(c):k(c,b)}}):!a&&b&&b.areLoyaltyPlacementsInitiallyHidden&&e(c)}catch(f){console.log("INFO: Holdout Error: unexpected error in processHoldout: "+f)}},k=function(a,c){g.ajax({type:"GET",url:"/loyalty/holdout/evaluateConditions",timeout:1E3,success:function(b){if(b)try{b.hasError?(console.log("INFO: Holdout Error: evaluateConditions returned with error: "+b.error),c&&c.areLoyaltyPlacementsInitiallyHidden&&e(a)):b.rewardsMember?(c&&c.areLoyaltyPlacementsInitiallyHidden&&e(a),a.showHiddenElements&&h(a.showHiddenElements,!1)):b.rewardsMember||void 0!==c||e(a)}catch(f){console.log("INFO: Holdout Error: unexpected error in processLoyaltyElements: "+f)}},error:function(b){c&&c.areLoyaltyPlacementsInitiallyHidden&&e(a);console.log("INFO: Holdout Error: error in evaluateConditionsAndHoldout: "+b)}})},e=function(a){a.showElements&&h(a.showElements,!1);a.hideElements&&h(a.hideElements,!0)},h=function(a,c){var b;try{for(b=0;b<a.length;b++){var d=g(a[b]);c?d.addClass("hidden"):d.removeClass("hidden")}}catch(m){console.log("Unable to process elements",m)}};return{evaluateAndRecordHoldout:function(a,c){void 0===a?console.log("INFO: Holdout Error: elements not provided"):g.ajax({type:"GET",url:"/loyalty/holdout/isEnabled",timeout:1E3,success:function(b){try{b.isHoldoutAATestEnabled&&d&&d.enabled&&"function"===typeof d.evaluateExperimentAndLog&&d.evaluateExperimentAndLog({id:25687})}catch(f){console.log("INFO: Holdout Error: unexpected error in logHoldoutAATest: "+f)}l(b.isHoldoutFeatureEnabled,a,c)},error:function(b){c&&c.areLoyaltyPlacementsInitiallyHidden&&e(a);console.log("INFO: Holdout Error: error retrieving holdoutFeatureEnabled: "+b)}})}}});
//# sourceMappingURL=holdoutRecorder.js.map