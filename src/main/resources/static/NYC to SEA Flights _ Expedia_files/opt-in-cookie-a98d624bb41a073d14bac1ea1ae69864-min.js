(function(k,f,d){function l(a){var b=(" "+f.cookie).match(new RegExp("[; ]"+a+"\x3d([^\\s;]*)"));return a&&b?unescape(b[1]):d}function m(a){return a&&0===a.indexOf("gdpr|")?a.split(",")[0].split("|")[1]:d}function n(a){return a&&0<=a.indexOf("ab.gdpr|")?a.split(",")[1].split("|")[1]:d}function v(a,b){if(k.XMLHttpRequest){var c=new XMLHttpRequest;c.onload=function(){b&&"function"===typeof b&&b(this.responseXML)};c.open("GET",a);c.responseType="document";c.overrideMimeType("text/html");c.send()}}function w(a){var b=a.querySelector("#app")?a.querySelector("#app").innerHTML:"";if(a=a.querySelector("script")?a.querySelector("script").src:d){var c=f.createElement("script");c.setAttribute("src",a);c.setAttribute("async",!0);c.setAttribute("defer",!0);f.head.appendChild(c)}p.innerHTML=b}function x(a,b,c){a=["/mad-service/gdpr/optInCookieSSR?containerId\x3dopt-in-cookie"];a.push("\x26siteid\x3d");a.push(b);a.push("\x26locale\x3d");a.push(c);b=a.join("");v(b,w.bind(this))}function y(a,b){var c=new XMLHttpRequest;c.open("GET","/opt-in-select/cookie/create/"+a+"?value\x3d"+b,!0);c.send()}function z(a){g=n(a);return"0"===m(a)&&("1"===g||g===d)}function A(a,b){require(["dctk/dctk"],function(c){c&&c.logging&&c.logging.logMessage(a,b)})}function q(a){var b=f.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src","/opt-in-select/cookies/remove.js?v\x3d1.0.4");b.setAttribute("async",!0);b.setAttribute("defer",!0);f.getElementsByTagName("body")[0].appendChild(b);if(0<localStorage.length){b={};for(var c in localStorage){var e;if(e=!a.hasOwnProperty(c)){a:{e=void 0;var d=c,g=B;for(e in g){e=0===d.indexOf(e);break a}e=!1}e=!e}e&&(localStorage.removeItem(c),b[c]=1)}if(0<b.length){a="localstorage\x3d";for(h in b)a+=h+",";var h=a.substring(0,a.length-1);A("GdprLocalStorageRemoved",h)}}}var h=l("OIP"),r=l("GDPRb"),t=f.getElementById("join-rewards-banner"),p=f.getElementById("opt-in-cookie"),g=d,u={"CKO.DuplicateBooking.Hash":1,CKO_flightDedupe:1,ucpTooltipDismissTimestamp:1,closedMipOfferBanner:1,closedInsurancePrimingMessage:1,closedMemberRewards:1,displayFrequencyEntries:1},B=["FlexibleSearch-"];(function(a,b){g=n(a);return a&&("1"===g||g===d)&&"1"!==b})(h,r)?(t&&t.style.setProperty("display","none","important"),x(p,siteid,locale)):"1"===r&&"-1"===m(h)?y("OIP",1):z(h)&&("complete"==f.readyState?q(u):k.onload=function(){q(u)})})(window,document);
//# sourceMappingURL=opt-in-cookie.js.map