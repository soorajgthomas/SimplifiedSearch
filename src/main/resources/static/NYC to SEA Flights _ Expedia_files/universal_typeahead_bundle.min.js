/**
 * Universal Typeahead (uTA)
 * Version: 1.187
 * Commit: 9c24f02f4e2a18ceb517d5faee0f079966d74e24
 * @preserve
 */
define("typeahead/buildInfo",[],function(){return{commit:"9c24f02f4e2a18ceb517d5faee0f079966d74e24",version:"1.187"}}),define("typeahead/core/ABTest",["require","exports","jquery","uitk","typeahead/core/context","typeahead/core/Experiment","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/TypeaheadUtils"],function(o,e,i,t,n,a,r,s,l,c,u){"use strict";e.__esModule=!0;var p=function(){function e(e){void 0===e&&(e=null),this.bucketingDeferred=i.Deferred(),this.persistentCookie=t.createBrowserStorage?t.createBrowserStorage("persistentCookies"):void 0,this.abovCookieValue=u.TypeaheadUtils.getCookie("abov"),this.abovMap=null!=e?e:u.TypeaheadUtils.getAbovMapFromCookie(this.abovCookieValue),this.abTestMap={},this.abTestIdNameMap={},this.loggedTests=[],this.controlLockedExpMap={}}return e.prototype.getAndLog=function(e){return e&&(e.id||e.name)?e.id&&this.hasAbovExp(e.id)?new a.Experiment(e.name,e.id,this.getAbovValue(e.id)):(e.id&&this.hasEvaluatedExp(e.id)?this.logExperimentAsynchronously(e.id):this.lockExperimentToControl(e),this.abTestMap[e.id]):(l.default.log(new Error("Experiment info was unavailable when calling 'getAndLog'"),s.Severity.MustFix,r.ProblemOrigin.UniversalTypeahead),new a.Experiment("",0,0))},e.prototype.override=function(e,t){this.abTestMap[e]?this.abTestMap[e].value=t:this.abTestMap[e]=new a.Experiment("",e,t)},e.prototype.getActiveClientTests=function(){for(var e="",t=0;t<this.loggedTests.length;t++)this.abTestMap[this.loggedTests[t]]&&this.abTestMap[this.loggedTests[t]].id&&(e+=this.abTestMap[this.loggedTests[t]].id+"."+this.abTestMap[this.loggedTests[t]].value+"|");return e?e.slice(0,-1):e},e.prototype.evaluateAllExperiments=function(e,t){0!==Object.keys(t).length?this.setExperimentBuckets(t):this.evaluateExperiments(this.getAllExperimentsAttribute(e.get(c.DefaultPluginAssembly.experimentIdentifier),"name")),this.bucketingDeferred.resolve()},e.prototype.getAllExperimentsAttribute=function(e,t){var i=this,o=[],n=function(e){o.indexOf(e[t])<0&&(o.push(e[t]),i.populateIDNameMap(e))};return e&&e.length&&e.forEach(function(e){var t=e.getExperiments();t&&t.length&&t.forEach(n)}),o},e.prototype.getBucketingPromise=function(){return this.bucketingDeferred.promise()},e.prototype.populateIDNameMap=function(e){this.abTestIdNameMap[e.id]||(this.abTestIdNameMap[e.id]=e.name)},e.prototype.getCookieValue=function(){return this.abovCookieValue?this.abovCookieValue:void 0},e.prototype.setExperimentBuckets=function(e){var o=this,n=e||{};n&&Object.keys(n).length&&Object.keys(n).forEach(function(e,t){var i=Number(e);o.abTestMap[e]=new a.Experiment(o.abTestIdNameMap[e],i,n[e])})},e.prototype.lockExperimentToControl=function(e){var t=new a.Experiment(e.name,e.id,0);this.abTestMap[e.id]=t,this.controlLockedExpMap[e.id]=t,l.default.log(new Error("Locked experiment to control: "+e.id+" "+e.name),s.Severity.Negligible,r.ProblemOrigin.UniversalTypeahead)},e.prototype.hasEvaluatedExp=function(e){var t=String(e);return this.abTestMap.hasOwnProperty(t)&&"number"==typeof this.abTestMap[e].value},e.prototype.hasAbovExp=function(e){return void 0!==this.abovMap[e]},e.prototype.getAbovValue=function(e){if(this.hasAbovExp(e)){if(this.hasEvaluatedExp(e))return this.abovMap[e];l.default.log(new Error("Experiment "+e+"is not being bucketed. Override would be ignored."),s.Severity.MustFix,r.ProblemOrigin.UniversalTypeahead)}return 0},e.prototype.hasControlLockedExp=function(e){var t=String(e);return this.controlLockedExpMap.hasOwnProperty(t)},e.prototype.logExperimentAsynchronously=function(e){var t=this;setTimeout(function(){t.logExperiment(e)})},e.prototype.logExperiment=function(t){var i=this,e=String(t);!this.hasControlLockedExp(t)&&this.loggedTests.indexOf(e)<0&&(this.loggedTests.push(e),o(["dctk/dctk"],function(e){e.evaluateExperimentAndLog(i.getDctkParams(t,!0,void 0))}))},e.prototype.evaluateExperiments=function(e){var t=this;e&&e.length&&i.ajax({contentType:"application/json; charset=UTF-8",data:JSON.stringify(this.getAbacusParams(e)),dataType:"json",type:"POST",url:"/api/bucketing/v1/evaluateExperiments"}).done(function(e){e&&e.evaluatedExperiments&&e.evaluatedExperiments.length&&e.evaluatedExperiments.forEach(function(e){t.abTestMap[e.name]=new a.Experiment(e.name,e.id,e.message?void 0:e.value)})}).fail(function(){l.default.log(new Error("Unable to call abacus api to evaluate experiments at page load"),s.Severity.Excusable,r.ProblemOrigin.UniversalTypeahead)})},e.prototype.getDctkParams=function(e,t,i){return{callback:i,eapid:u.TypeaheadUtils.getSiteParamValue(u.SiteParam.eapid),guid:u.TypeaheadUtils.getGuid(),logToOmniture:t,id:e,overrides:this.getCookieValue(),tpid:u.TypeaheadUtils.getSiteParamValue(u.SiteParam.tpid)}},e.prototype.getAbacusParams=function(e){return{eapid:u.TypeaheadUtils.getSiteParamValue(u.SiteParam.eapid),guid:u.TypeaheadUtils.getGuid(),name:e,overrides:this.getCookieValue(),tpid:u.TypeaheadUtils.getSiteParamValue(u.SiteParam.tpid),verbose:!0}},e}();e.ABTest=p}),define("typeahead/core/ConfigurableFeature",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.getFeatureOverrides=function(e){var t={},i=e.data("feature-overrides");if(i){var o=i.split("|");if(o)for(var n=0,a=o;n<a.length;n++){var r=a[n],s=r.indexOf(":");if(-1!==s){var l=r.substring(0,s),c=r.substring(s+1,r.length);t[l]=c}}}return t},e.prototype.shouldOverride=function(e){var t=this.getOverrideValue(e);if(!t)return!1;if(this.isOverrideToOn(t))return!0;if(this.isOverrideToOff(t))return!1;if(-1!==t.indexOf("=")){var i=t.split("=");if(2===i.length){var o=i[0],n=i[1];switch(o){case"@experiment":return this.checkExperiment(n)}}}return!1},e.prototype.isOverrideToOn=function(e){return"on"===e},e.prototype.isOverrideToOff=function(e){return"off"===e},e.prototype.checkExperiment=function(e){var t={id:0,name:e};return i.evaluateExperiment(t)},e.prototype.getOverrideValue=function(e){return e&&e.featureOverrides&&this.featureName&&e.featureOverrides[this.featureName]},e}();t.ConfigurableFeature=o});var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/DynamicDropdownSuggestion",["require","exports","typeahead/core/IListItem","typeahead/core/Suggestion"],function(e,t,o,i){"use strict";t.__esModule=!0;var n=function(i){function e(e){var t=i.call(this,{category:"DynamicDropdownSuggestion",coordinates:void 0,index:"0",listItemType:o.ListItemType.Suggestion,regionNames:void 0,type:"DynamicDropdownSuggestion"})||this;return t.displayText=e,t}return __extends(e,i),e.prototype.getDisplayText=function(){return this.displayText},e.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},e}(i.Suggestion);t.DynamicDropdownSuggestion=n}),define("typeahead/core/EssDataProvider",["require","exports","jquery","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,r,i,o,n){"use strict";var a,s;t.__esModule=!0,(s=a=t.GoogleRequestType||(t.GoogleRequestType={}))[s.GOOGLE_AUTOCOMPLETE=0]="GOOGLE_AUTOCOMPLETE",s[s.ADDRESS_AUTOCOMPLETE=1]="ADDRESS_AUTOCOMPLETE";var l=function(){function s(){}return s.isReferralToGoogleMaps=function(e){return-1<[a[a.ADDRESS_AUTOCOMPLETE],a[a.GOOGLE_AUTOCOMPLETE]].indexOf(e)},s.prototype.fetchData=function(e){var t,i=e.requestGenerator,o=!!e.additionalDataSourceUrl,n=e.context,a=i.makeRequest(e.srchText,e,n);return e.overrideDataRequest&&"function"==typeof e.overrideDataRequest?e.overrideDataRequest(e.srchText).then(this.singleSourceResponseHandler):e.ignoreResults?a.then(r.noop):o?(t=i.makeRequest(e.srchText,r.extend(e,{isSecondary:!0}),n),r.when(t,a).then(this.dualSourceResponseHandler,this.dualSourceErrorResponseHandler)):a.then(this.singleSourceResponseHandler)},s.prototype.dualSourceResponseHandler=function(e,t){var i=[],o=e[0].q;e[0]&&e[0].sr&&(i=i.concat(e[0].sr)),t[0]&&t[0].sr?i=i.concat(t[0].sr):t[0]&&t[0].r&&(i=i.concat(t[0].r));var n=e[0].rc+"|"+t[0].rc,a=[e[0].activeABTests,t[0].activeABTests].filter(Boolean).join("|"),r=[e[0].overriddenABTests,t[0].overriddenABTests].filter(Boolean).join("|");return{isReferralToGoogleMaps:s.isReferralToGoogleMaps(n),query:o,responseCode:n,activeABTests:a,overriddenABTests:r,results:i||[]}},s.prototype.dualSourceErrorResponseHandler=function(){n.default.log(new Error("Dual HTTP request failure handler. Called with "+arguments.length+" inputs"),o.Severity.Excusable,i.ProblemOrigin.ExpediaSuggestService)},s.prototype.singleSourceResponseHandler=function(e){var t=e.sr?e.sr:e.r,i=e.q;return{activeABTests:e.activeABTests,isReferralToGoogleMaps:s.isReferralToGoogleMaps(e.rc),overriddenABTests:e.overriddenABTests,query:i,responseCode:e.rc,results:t||[]}},s}();t.EssDataProvider=l,t.overrideJQuery=function(e){r=e}});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/EssSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return o.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceName:void 0)},t.prototype.getSourceId=function(){return o.Optional.ofNullable(this.getEssId().isPresent()?this.getEssId().get().sourceId:void 0)},t.prototype.getCityId=function(){return o.Optional.ofNullable(this.data.cityId)},t.prototype.getRegionId=function(){return this.data.gaiaId?o.Optional.ofNullable(this.data.gaiaId):this.getCityId()},t.prototype.getTla=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.airportCode:void 0)},t.prototype.getAirportId=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.airportId:void 0)},t.prototype.getRelateTo=function(){return o.Optional.ofNullable(this.data.hierarchyInfo?this.data.hierarchyInfo.relateTo:void 0)},t.prototype.getSuggestionHierarchyType=function(){return o.Optional.of(this.data.hierarchyInfo&&"true"===this.data.hierarchyInfo.isChild?"child":"parent")},t.prototype.getRelationInfo=function(){return o.Optional.of(this.data.hierarchyInfo&&this.data.hierarchyInfo.relation&&0<this.data.hierarchyInfo.relation.length?this.data.hierarchyInfo.relation[0]:"-")},t.prototype.getHotelId=function(){return o.Optional.ofNullable(this.getEssId().isPresent()&&"LCM"===this.getEssId().get().sourceName?this.getEssId().get().sourceId:void 0)},t.prototype.getTypeId=function(){return o.Optional.of(this.data.essId&&this.data.essId.sourceId?this.data.essId.sourceId:"-")},t.prototype.getCity=function(){return o.Optional.ofNullable(this.data.hotelAddress?this.data.hotelAddress.city:void 0)},t.prototype.getMultiCity=function(){return o.Optional.of(this.data.hierarchyInfo.airport?this.data.hierarchyInfo.airport.multicity:this.data.hierarchyInfo.multicity)},t.prototype.getSubType=function(){return o.Optional.ofNullable(this.data.subtype)},t.prototype.getStationCode=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.stationCode:void 0)},t.prototype.getPointOfSupply=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.rails?this.data.hierarchyInfo.rails.pointOfSupply:void 0)},t.prototype.getCountryName=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.name:void 0)},t.prototype.getCountryIsoCode2=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode2:void 0)},t.prototype.getCountryIsoCode3=function(){return o.Optional.ofNullable(this.data.hierarchyInfo&&this.data.hierarchyInfo.country?this.data.hierarchyInfo.country.isoCode3:void 0)},t.prototype.getIsHeds=function(){return this.getEssId().isPresent()&&"TREX"===this.getEssId().get().sourceName?o.Optional.ofNullable("true"):o.Optional.empty()},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.getExtraSearchParams=function(){var e=[];return[].push.apply(e,this.data.extraSearchParams),this.getHotelFilterParams()&&e.push(this.getHotelFilterParams()),this.getHotelId().isPresent()&&e.push({field:"searchPriorityOverride",value:"213"}),o.Optional.ofNullable(e.length?e:void 0)},t.prototype.getRedirectPath=function(){return o.Optional.ofNullable(this.data.regionMetadata?this.data.regionMetadata.redirect:void 0)},t.prototype.getConcepts=function(){return o.Optional.ofNullable(this.data.concepts?this.data.concepts:void 0)},t.prototype.getNext=function(){return o.Optional.ofNullable(this.data.next)},t.prototype.getHotelFilterParams=function(){var e=this.data.hierarchyInfo&&this.data.hierarchyInfo.hotels?this.data.hierarchyInfo.hotels.hotelFilterId:void 0;if(e){var t=e.replace("AM","");if(t)return{field:"amenities",value:t}}},t.prototype.getEssId=function(){return o.Optional.ofNullable(this.data.essId)},t}(i.Suggestion);t.EssSuggestion=n});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/ExpediaSuggestServiceRequestGenerator",["require","exports","jquery","typeahead/core/RequestGenerator","typeahead/core/TypeaheadUtils"],function(e,t,p,i,l){"use strict";var g={canTrack:!(t.__esModule=!0),no:!1,set:!1,source:"meta",yes:!1};function c(e){return{CARS:["postal_code"],HOTELS:["contextual_ta","postal_code"],NONE:["unspecified_area"]}[e]}function n(e,t,i){var o,n=[];if(t.features=t.features&&t.features.length&&t.features||[],"hotel"!==e.tab&&"flight"!==e.tab||(t.personalize=!0),"HOTELS"===e.lob){n=c("HOTELS");t.mask|=32}else"CARS"===e.lob?n=c("CARS"):"NONE"===e.lob&&(n=c("NONE"));o=n,l.TypeaheadUtils.isWithinMobileBreakpoint()&&o.push("mobile_breakpoint"),"Hotels.Search"===e.clientId&&(t.rid=i.searchRegionId);for(var a=0,r=n;a<r.length;a++){var s=r[a];t.features.indexOf(s)<0&&t.features.push(s)}return t}function d(e,t,i,o){return i=function(e,t){if(t.pairedinputid){var i=p("#"+t.pairedinputid);if(0<i.length){var o=i.attr("data-ta_element"),n=p("#"+o);if(0<n.length)try{var a=JSON.parse(n.val());e.originRegionId=a.regionId}catch(e){}else i.attr("data-id")&&(e.originRegionId=i.attr("data-id"));e.originSearchString=i.val()}}return e}(i=n(t,i,o),o),0<e.length&&e.map(function(e){return e.modifyParameters(i,t,o)}),i}function s(e){var t=0;if(e&&0!==e.length){for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;if(t<0)return-1*(t+1)}return t}e(["oip"],function(e){g=e}),t.hash=s;var o=function(a){function r(e,t,i,o,n){return a.call(this,e,t,i,o,n)||this}return __extends(r,a),r.prototype.buildQueryStringParams=function(e,t,i){var o,n,a,r,s,l=((n={}).mask=(o=t).mask,n.ab=o.abtest,n.format=o.format,n.dest=o.dest,n.maxresults=o.maxresults,n.features=o.features||[],n.device=window.utag_data?window.utag_data.device_type:"Unavailable",n.browser=o.browser,n.rid=o.filter_region_id,n.personalize=o.personalize,n.packageType=o.packageType,n),c=p.extend({},t),u=d(this.requestParamModifiers,i,l,c);return a=u,(s={}).client=(r=i).clientId,s.siteid=r.siteid,s.guid=r.guid,s.lob=r.lob,s.locale=r.locale,s.expuserid=r.expuserid,s.regiontype=a.mask,s.ab=a.ab,s.dest=a.dest,s.maxresults=a.maxresults,s.features=a.features.join("|"),s.rid=a.rid,s.sortcriteria=a.sortcriteria,s.categories=a.categories,s.pt=a.packageType,s.originRegionId=a.originRegionId,s.originSearchString=a.originSearchString,s.next=a.next,s.format="jsonp",s.device=a.device,s.browser=a.browser,s.personalize=!(!g.canTrack||!a.personalize),s},r.prototype.makeRequest=function(e,t,i){var o,n;return t.isSecondary?(n=e,o=[t.additionalDataSourceUrl,encodeURIComponent(n)].join("")):o=this.constructEssUrl(e),p.ajax({beforeSend:function(e,t){window.utaTestHooks.latestEssRequest=t.url},cache:!0,data:this.buildQueryStringParams(e,t,i),dataType:"jsonp",jsonpCallback:"cb_"+r.sessionId+"_"+s(e),type:"GET",url:o})},r.sessionId=Date.now(),r}(i.RequestGenerator);t.ExpediaSuggestServiceRequestGenerator=o,t.overrideJQuery=function(e){p=e}}),define("typeahead/core/Experiment",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(e,t,i){this.name=e,this.id=t,this.value=i};t.Experiment=i}),define("typeahead/core/FlightOriginSuggestion",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("typeahead/core/IListItem",["require","exports"],function(e,t){"use strict";var i,o;t.__esModule=!0,(o=i=t.ListItemType||(t.ListItemType={}))[o.Label=0]="Label",o[o.Suggestion=1]="Suggestion";var n=function(e,t){this.html=e,this.category=t,this.listItemType=i.Label,this.category=t};t.LabelTypeListItem=n}),define("typeahead/core/IOverrideParams",["require","exports"],function(e,t){"use strict";t.__esModule=!0});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/OnFocusSuggester",["require","exports","typeahead/core/SuggestionsAggregator"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getEssOnFocusPersonalizedSuggesterConfig=function(){return{isEnabled:!0,rank:2}},t.prototype.getCurrentLocationSuggesterConfig=function(){return{isEnabled:!0,rank:1}},t.prototype.getId=function(){return i.SuggesterId.OnFocusSuggester},t}(i.SuggestionsAggregator);t.OnFocusSuggester=o}),define("typeahead/core/RequestGenerator",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,i,a){"use strict";t.__esModule=!0;var o=function(){function e(e,t,i,o,n){this.requestParamModifiers=[],this.essAbacusIds=e,this.variantAssigner=t,this.suggestServiceUrlOptions=i,n&&(this.requestParamModifiers=n.get(a.DefaultPluginAssembly.requestParamModifierIdentifier))}return e.defaultVariantAssigner=function(e){void 0===e&&(e=void 0)},e.prototype.getVariantAssignment=function(e){if("function"==typeof this.variantAssigner){var t=this.variantAssigner(e);return void 0===t?void 0:"".concat(e,".",t)}},e.prototype.generateAbacusParameter=function(){var n=this,a=[];return i(this.essAbacusIds).each(function(e,t){var i,o=(i=t,"function"==typeof n.getVariantAssignment?n.getVariantAssignment(i):void 0);o&&a.push(o)}),0<a.length?a.join("|"):""},e.prototype.constructEssUrl=function(e){this.suggestServiceUrlOptions.suggestServiceUrl;return this.suggestServiceUrlOptions.overrideServiceUrl?[this.suggestServiceUrlOptions.overrideServiceUrl,encodeURIComponent(e)].join(""):[this.suggestServiceUrlOptions.serviceUrl,"/api/v4/typeahead/",encodeURIComponent(e),"?callback=?"].join("")},e.ESS_ABACUS_IDS=[],e}();t.RequestGenerator=o,t.overrideJQuery=function(e){i=e}}),define("typeahead/core/SearchParametersUpdater",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,r,s,l){"use strict";t.__esModule=!0;var a={airport_code_element:"getTla",category_element:"getCategory",city_element:"getCity",country_code_element:"getCountryIsoCode2",heds_element:"getIsHeds",hotel_id_element:"getHotelId",lat_long_element:"getLatLong",point_of_supply_element:"getPointOfSupply",region_id_element:"getRegionId",region_type_element:"getType",station_code_element:"getStationCode",ta_element:"getSuggestionData"};function c(e,t,i){var o=$("#"+t),n="";if(0<o.length){if(e)if("function"==typeof e[i]){var a=e[i]();a.isPresent()&&(n=a.get())}else l.default.log(new Error(i+" is not a method of Suggestion"),s.Severity.MustFix,r.ProblemOrigin.UniversalTypeahead);n!==o.val()&&(o.val(n),p(e,o))}}function u(e,t,i,o){var n=$("#"+i);t&&t.getSearchName().isPresent()?(n.val(t.getSearchName().get()),d(n),g(o,i)):(g(i,o),n.val("")),p(t,n)}function p(e,t){e&&!e.shouldTriggerDomElementChangeOnSelection()||t.trigger("change")}function g(e,t){var i=$("#"+e),o=$("#"+t);i.length&&o.length&&!o.attr("data-gcw-storeable-name")&&(o.attr("name",i.attr("name")),o.attr("data-gcw-storeable-name",i.attr("data-gcw-storeable-name")),o.data("gcw-storeable-name",i.data("gcw-storeable-name")),o.addClass("gcw-storeable"),d(i))}function d(e){e.removeAttr("name"),e.removeAttr("data-gcw-storeable-name"),e.removeData("gcw-storeable-name"),e.removeClass("gcw-storeable")}function h(e,t){var i,o,n;e&&e.getExtraSearchParams().isPresent()?(o=e.getExtraSearchParams().get(),n=t,o.forEach(function(e){var t=$("<input>",{type:"hidden",class:"uta-extra-search-param"}),i=e.field;t.attr("name",e.field),t.attr("value",e.value);var o=$("input[name*="+i+"]");0!==o.length?($(o).attr("value",e.value),$(o).addClass("uta-extra-search-param")):t.appendTo($("#"+n).parents("form:visible"))})):0<(i=$(".uta-extra-search-param")).length&&$(i).each(function(e,t){var i=!!$(t).attr("id");i?($(t).attr("value",""),$(t).removeClass("uta-extra-search-param")):$(t).remove()})}t.updateForSuggestion=function(e,t,i,o){for(var n in a)a.hasOwnProperty(n)&&c(t,i[n],a[n]);u(0,t,i.search_name_element,o),function(e){var t=$("input[id$=search_name][data-gcw-storeable-name=gcw-destination]");if(1===t.length&&e!==t.attr("id")){var i=t.parent().find("input[data-provide=utypeahead]");u(0,void 0,t.attr("id"),i.attr("id"))}}(i.search_name_element),h(t,o)}}),define("typeahead/core/StaticDataProvider",["require","exports","jquery","typeahead/core/loc","typeahead/core/IListItem","typeahead/core/TypeaheadUtils"],function(e,t,r,i,o,n){"use strict";t.__esModule=!0;var a=function(){function a(){}return a.getHotelNotFoundStaticSuggestion=function(){var e=i.typeaheadTextHotelNotPresent?i.typeaheadTextHotelNotPresent:"My hotel/stay is not in this list";return{category:"DEFAULT",icon:"info",index:"0",listItemType:o.ListItemType.Suggestion,regionNames:{displayName:e,fullName:e,lastSearchName:e},type:"HOTELNOTPRESENT"}},a.getStaticSuggestions=function(e){var t=[];return"LX.Checkout"===n.TypeaheadUtils.getClientId()&&"lx-pickup-uta"===e.inputElem.attr("id")&&t.push(a.getHotelNotFoundStaticSuggestion()),t},a.mergeESSStaticSuggestions=function(e,t){var i={activeABTests:e.activeABTests,isReferralToGoogleMaps:e.isReferralToGoogleMaps,overriddenABTests:e.overriddenABTests,query:e.query,responseCode:e.responseCode,results:e.results},o=e.results&&0<e.results.length?e.results.length:0;return i=a.updateCombinedResults(i,t,o)},a.updateCombinedResults=function(t,e,i){var o=i;return e.results.forEach(function(e){0<o&&(e.index=o+++""),t.results=t.results.concat(e)}),t},a.prototype.fetchData=function(e,t){var i=r.Deferred(),o={results:a.getStaticSuggestions(e)},n=a.mergeESSStaticSuggestions(t,o);return i.resolve(n),i.promise()},a}();t.StaticDataProvider=a}),define("typeahead/core/StripingConfiguration",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.getExperiments=function(e){return e&&e.length?e.map(function(e){return e.experiment}).filter(function(e){return!!e}):[]}});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/SuggestServiceParamModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifyParameters=function(e,t,i){return this.precondition&&(this.shouldOverride(i)||o.shouldExecute(t,this.configuration))&&this.modify(e,t,i),e},t.prototype.addFeatureFlag=function(e,t){e.features=e.features&&e.features.length&&e.features.push&&e.features||[],e.features.indexOf(t)<0&&e.features.push(t)},t.prototype.addRegionType=function(e,t){e.mask|=t},t.prototype.precondition=function(e,t,i){return void 0!==e},t}(i.ConfigurableFeature);t.SuggestServiceParamModifier=n}),define("typeahead/core/Suggestion",["require","exports","typeahead/core/util/Optional"],function(e,t,i){"use strict";var o;t.__esModule=!0,(o=t.SuggestionCategory||(t.SuggestionCategory={}))[o.GEOLOCATION=0]="GEOLOCATION",o[o.USERHISTORY=1]="USERHISTORY",o[o.FLIGHTSBOOKING=2]="FLIGHTSBOOKING",o[o.GOOGLEMAPS=3]="GOOGLEMAPS";var n=function(){function e(e,t){void 0===t&&(t=!1),this.data=e,this.hasChild=t}return e.prototype.getSourceName=function(){return i.Optional.ofNullable(void 0)},e.prototype.getSourceId=function(){return i.Optional.ofNullable(void 0)},e.prototype.getRegionId=function(){return i.Optional.ofNullable(void 0)},e.prototype.getTla=function(){return i.Optional.ofNullable(void 0)},e.prototype.getAirportId=function(){return i.Optional.ofNullable(void 0)},e.prototype.getRelateTo=function(){return i.Optional.ofNullable(void 0)},e.prototype.getType=function(){return i.Optional.ofNullable(this.data.type)},e.prototype.getRegionNames=function(){return i.Optional.ofNullable(this.data.regionNames)},e.prototype.getFullName=function(){return i.Optional.ofNullable(this.getRegionNames().orElse({}).fullName)},e.prototype.getLastSearchName=function(){return i.Optional.ofNullable(this.getRegionNames().orElse({}).lastSearchName)},e.prototype.getDisplayName=function(){return i.Optional.ofNullable(this.getRegionNames().orElse({}).displayName)},e.prototype.getDisplayText=function(){return this.getLastSearchName().orElse(this.getDisplayName().orElse(""))},e.prototype.getIndex=function(){return parseInt(this.data.index,10)},e.prototype.getPosition=function(){return this.data.parentPosition?parseInt(this.data.parentPosition,10):this.getIndex()+1},e.prototype.getSuggestionHierarchyType=function(){return i.Optional.of("parent")},e.prototype.getHierarchyCode=function(){return("child"===this.getSuggestionHierarchyType().get()?"C":"parent"===this.getSuggestionHierarchyType().get()&&this.hasChild?"P":"D")+"L#"+(isNaN(this.getPosition())?"-":this.getPosition())},e.prototype.getRelationInfo=function(){return i.Optional.of("-")},e.prototype.getHotelId=function(){return i.Optional.ofNullable(void 0)},e.prototype.getLatLong=function(){return i.Optional.ofNullable(this.data.coordinates?this.data.coordinates.lat+","+this.data.coordinates.long:void 0)},e.prototype.getTypeId=function(){return i.Optional.of("-")},e.prototype.getCity=function(){return i.Optional.ofNullable(void 0)},e.prototype.getMultiCity=function(){return i.Optional.ofNullable(void 0)},e.prototype.getSubType=function(){return i.Optional.ofNullable(void 0)},e.prototype.getHasChild=function(){return i.Optional.of(this.hasChild)},e.prototype.getCategory=function(){return i.Optional.ofNullable(this.data.category)},e.prototype.getStationCode=function(){return i.Optional.ofNullable(void 0)},e.prototype.getPointOfSupply=function(){return i.Optional.ofNullable(void 0)},e.prototype.getCountryName=function(){return i.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode2=function(){return i.Optional.ofNullable(void 0)},e.prototype.getCountryIsoCode3=function(){return i.Optional.ofNullable(void 0)},e.prototype.getIsHeds=function(){return i.Optional.empty()},e.prototype.isAddrAutoComplete=function(){return!1},e.prototype.getExtraSearchParams=function(){return i.Optional.ofNullable(void 0)},e.prototype.getSearchName=function(){return"hotelfilter"===this.getRelationInfo().orElse("")?this.getFullName():i.Optional.ofNullable(void 0)},e.prototype.getRedirectPath=function(){return i.Optional.ofNullable(void 0)},e.prototype.getConcepts=function(){return i.Optional.ofNullable(void 0)},e.prototype.getNext=function(){return i.Optional.ofNullable(void 0)},e.prototype.getSuggestionData=function(){return i.Optional.of(JSON.stringify({airportCode:this.getTla().orElse(void 0),category:this.getCategory().orElse(void 0),city:this.getCity().orElse(void 0),concepts:this.getConcepts().orElse(void 0),coordinates:this.data.coordinates,countryCode:this.getCountryIsoCode2().orElse(void 0),extraSearchParams:this.getExtraSearchParams().orElse(void 0),fullName:this.getFullName().orElse(void 0),heds:this.getIsHeds().orElse(void 0),hotelId:this.getHotelId().orElse(void 0),pointOfSupply:this.getPointOfSupply().orElse(void 0),redirectPath:this.getRedirectPath().orElse(void 0),regionId:this.getRegionId().orElse(void 0),regionType:this.getType().orElse(void 0),stationCode:this.getStationCode().orElse(void 0)}))},e.prototype.getSearchedRegion=function(){return this.getRelateTo().orElse(this.getSourceId().orElse("-"))},e.prototype.getSelectedRegion=function(){return this.getRelateTo().orElse("")?this.getSourceId().orElse("-"):this.getAirportId().orElse("-")},e}();t.Suggestion=n}),define("typeahead/core/SuggestionFactory",["require","exports","typeahead/core/EssSuggestion","typeahead/core/geolocation/GeolocationSuggestion","typeahead/core/google/GoogleMapsSuggestion","typeahead/core/Suggestion"],function(e,t,i,o,n,a){"use strict";t.__esModule=!0,t.createSuggestion=function(e,t){return void 0===t&&(t=!1),a.SuggestionCategory[a.SuggestionCategory.GEOLOCATION]===e.category?new o.GeolocationSuggestion(e):a.SuggestionCategory[a.SuggestionCategory.GOOGLEMAPS]===e.category?new n.GoogleMapsSuggestion(e):new i.EssSuggestion(e,t)}});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/SuggestionModifier",["require","exports","typeahead/core/ConfigurableFeature","typeahead/core/plugins/ExecutionHelper"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.modifySuggestions=function(e,t,i){return this.precondition(e,t)&&(this.shouldOverride(i)||o.shouldExecute(t,this.configuration))&&this.modify(e,t),e},t.prototype.precondition=function(e,t){return e&&0<e.length},t}(i.ConfigurableFeature);t.SuggestionModifier=n}),define("typeahead/core/SuggestionsAggregator",["require","exports"],function(e,t){"use strict";var i,o;t.__esModule=!0,(o=i=t.SuggesterId||(t.SuggesterId={}))[o.CurrentLocationSuggester=0]="CurrentLocationSuggester",o[o.EssOnFocusPersonalizedSuggester=1]="EssOnFocusPersonalizedSuggester",o[o.OnFocusSuggester=2]="OnFocusSuggester";var n=function(){function t(e){var t;this.suggesters=e,this.suggesterConfig=((t={})[i.CurrentLocationSuggester]=this.getCurrentLocationSuggesterConfig(),t[i.EssOnFocusPersonalizedSuggester]=this.getEssOnFocusPersonalizedSuggesterConfig(),t),this.emptySuggesterResponse={id:this.getId(),results:[]}}return t.prototype.suggest=function(t,i){var o=$.Deferred(),n=this;if(this.suggesters&&this.suggesters.length){var e=this.suggesters.map(function(e){return e.suggest(t,i)});$.when.apply($,e).done(function(){var e=Array.prototype.slice.call(arguments);o.resolve(n.aggregate(e))})}else o.resolve(this.emptySuggesterResponse);return o.promise()},t.prototype.getSuggesterConfig=function(e){return this.suggesterConfig[e.id]?this.suggesterConfig[e.id]:{rank:t.LOWEST_RANK,isEnabled:!1}},t.prototype.aggregate=function(e){return e&&(e=this.filter(e),this.sort(e)),{id:this.getId(),results:this.getAggregatedSuggestionResults(e)}},t.prototype.filter=function(e){var t=this;return e?e.filter(function(e){return t.getSuggesterConfig(e).isEnabled}):e},t.prototype.sort=function(e){var i=this;e&&e.sort(function(e,t){return i.getSuggesterConfig(e).rank-i.getSuggesterConfig(t).rank})},t.prototype.getAggregatedSuggestionResults=function(e){var t=[];if(e){e.forEach(function(e){Array.prototype.push.apply(t,e.results)});for(var i=0;i<t.length;i++)t[i].index=i+""}return t},t.LOWEST_RANK=999,t}();t.SuggestionsAggregator=n});var __assign=this&&this.__assign||Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};define("typeahead/core/TypeaheadUtils",["require","exports","typeahead/core/loc","typeahead/core/context","uitk","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(a,t,e,i,n,r,s,l){"use strict";var c,o,u,p,g,d,h,f,y,m;t.__esModule=!0,(o=c=t.FlightType||(t.FlightType={}))[o.OneWay=0]="OneWay",o[o.RoundTrip=1]="RoundTrip",o[o.MultiDestination=2]="MultiDestination",o[o.Unknown=3]="Unknown",(p=u=t.Lob||(t.Lob={}))[p.Flight=0]="Flight",p[p.Hotel=1]="Hotel",p[p.Package=2]="Package",p[p.Car=3]="Car",p[p.Cruise=4]="Cruise",p[p.Activity=5]="Activity",p[p.Rail=6]="Rail",p[p.VacationRental=7]="VacationRental",p[p.OpenSearch=8]="OpenSearch",p[p.Unknown=9]="Unknown",(d=g=t.PackageType||(t.PackageType={}))[d.FlightHotel=0]="FlightHotel",d[d.FlightHotelCar=1]="FlightHotelCar",d[d.FlightCar=2]="FlightCar",d[d.HotelCar=3]="HotelCar",d[d.Unknown=4]="Unknown",(f=h=t.RailType||(t.RailType={}))[f.OneWay=0]="OneWay",f[f.RoundTrip=1]="RoundTrip",f[f.Unknown=2]="Unknown",(m=y=t.SiteParam||(t.SiteParam={}))[m.eapid=0]="eapid",m[m.tpid=1]="tpid",t.MercuryWizardLandingPagesPackageTypes=["packageFlightHotel","flightHotel","packageFlightHotelCar","flightHotelCar","carHotelFlight","packageFlightCar","flightCar","carFlight","packageHotelCar","hotelCar","carHotel"];var v=function(){function o(){}return o.getCookie=function(e){var t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():""},o.getAbovMapFromCookie=function(e){var i={},o=function(e){return/^\d+$/.test(e)};"string"==typeof e&&e.split(":").forEach(function(e){var t=e.split("|");3===t.length&&0<t[0].length&&0<t[2].length&&o(t[0])&&o(t[2])&&(i[parseInt(t[0],10)]=parseInt(t[2],10))});return i},o.getGuid=function(){var t=window.dctk&&window.dctk.logging&&window.dctk.logging.guid?window.dctk.logging.guid:void 0;if(void 0===t&&(t=window.utag_data&&window.utag_data.guid?window.utag_data.guid:void 0),void 0===t)try{a(["gc/pageModel"],function(e){e&&e.user&&(t=e.user.guid)})}catch(e){}if(void 0===t){var e=this.getCookie("MC1"),i=e&&e.split("=");t=$.isArray(i)&&2===i.length?i[1]:""}return void 0===t?l.default.log(new Error("ERROR: Unable to get 'guid'"),s.Severity.MustFix,r.ProblemOrigin.ClientOfUniversalTypeahead):t=t.replace(/-/g,""),t},o.getSiteParamValue=function(e){var t=void 0,i=y[e];if(window.utag_data&&window.utag_data.context&&window.utag_data.context.site&&void 0!==window.utag_data.context.site[i])t=window.utag_data.context.site[i];else try{a(["gc/pageModel"],function(e){e&&e.site&&void 0!==e.site[i]&&(t=e.site[i])})}catch(e){}if(void 0===t){var o=this.getCookie({eapid:{cookieName:"iEAPID"},tpid:{cookieName:"tpid"}}[i].cookieName);if(void 0!==o){var n=o.split(",");t=parseInt(1<n.length?n[1]:n[0],10)}}return("number"!=typeof t||isNaN(t))&&l.default.log(new Error("Unable to get "+i+" from utag_data/cookies/gcPageModel"),s.Severity.Excusable,r.ProblemOrigin.ClientOfUniversalTypeahead),t},o.getPointOfSale=function(){return window.location.hostname},o.getLocale=function(){return i.locale},o.getSiteId=function(){return i.siteid+""},o.getPageId=function(){return o.defaultPageIdGetter()},o.getDeviceType=function(){return o.deviceType||(o.deviceType=window.utag_data?window.utag_data.device_type:o.evaluateDeviceType()),o.deviceType},o.getBrowser=function(){var e=window.utag_data&&window.utag_data.context&&window.utag_data.context.clientInfo&&window.utag_data.context.clientInfo.deviceCharacteristics?window.utag_data.context.clientInfo.deviceCharacteristics.mobileBrowser:void 0;return e||(e=o.evaluateBrowserName()),e},o.getClientId=function(){var e=$("input[data-provide=utypeahead]").data("clientId");if(e||(e=$("meta[name=essClientId]").attr("content")),!e){var t=o.defaultPageIdGetter();t&&(e=o.clientIdByPageId[t])}return e||(e=o.clientIdByPath[window.location.pathname]),e||(l.default.log(new Error("Could not determine client id"),s.Severity.Excusable,r.ProblemOrigin.UniversalTypeahead),e=o.TEST_CLIENT_ID),e||"Unknown"},o.setClientId=function(e){o.TEST_CLIENT_ID=e},o.isStorefrontClient=function(){return-1<["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"].indexOf(o.getClientId())},o.getLob=function(){if("OpenSearchPage"===o.getClientId())return u.OpenSearch;var e=$("div.wizard-tabs").find("button.on").data("lob");if("string"==typeof(e=(e=e||$("input[data-provide=utypeahead]:visible").data("lob"))||o.LOB_ATTRIBUTE.TEST)){if(-1<(e=e.toLowerCase()).indexOf("pack")||-1<t.MercuryWizardLandingPagesPackageTypes.map(function(e){return e.toLowerCase()}).indexOf(e))return u.Package;if(-1<e.indexOf("flight"))return u.Flight;if(-1<e.indexOf("hotel"))return u.Hotel;if(-1<e.indexOf("vacationrental"))return u.VacationRental;if(-1<e.indexOf("car"))return u.Car;if(-1<e.indexOf("cru"))return u.Cruise;if(-1<e.indexOf("lx")||-1<e.indexOf("activit"))return u.Activity;if(-1<e.indexOf("train")||-1<e.indexOf("rail"))return u.Rail;if(-1<e.indexOf("open"))return u.OpenSearch}return u.Unknown},o.setLob=function(e){o.LOB_ATTRIBUTE.TEST=e},o.getFlightType=function(e){if(e===u.Flight){var t=$("input[name=route-type], input[name=flight-type]").filter(":checked:visible").attr("id");if(t=t||o.TEST_FLIGHT_TYPE_ID){if(-1<(t=t.toLowerCase()).indexOf("one"))return c.OneWay;if(-1<t.indexOf("round"))return c.RoundTrip;if(-1<t.indexOf("multi"))return c.MultiDestination;l.default.log(new Error("Could not determine flight type with dom element id - "+t),s.Severity.Excusable,r.ProblemOrigin.ClientOfUniversalTypeahead)}}return c.Unknown},o.setFlightElementId=function(e){o.TEST_FLIGHT_TYPE_ID=e},o.getRailType=function(e){if(e===u.Rail){var t=$("input[name=journeyType]").filter(":checked").attr("id");if(t=t||o.TEST_RAIL_TYPE_ID){if(-1<(t=t.toLowerCase()).indexOf("one"))return h.OneWay;if(-1<t.indexOf("round"))return h.RoundTrip;l.default.log(new Error("Could not determine rail journey type with dom element id - "+t),s.Severity.MustFix,r.ProblemOrigin.ClientOfUniversalTypeahead)}l.default.log(new Error("Unable to find journeyType dom element to determine rail journey type"),s.Severity.MustFix,r.ProblemOrigin.ClientOfUniversalTypeahead)}return h.Unknown},o.setRailTypeId=function(e){o.TEST_RAIL_TYPE_ID=e},o.getPackageType=function(e){var t=(e?e.data("package-type"):void 0)||$("input[name=package-lob], input[name=package-type]").filter(":visible:checked").attr("value")||$("div.wizard-tabs").find("button.on").data("lob")||o.TEST_PACKAGE_TYPE_VALUE;if(t){var i=this.packageTypes[t.toLowerCase()];if(i)return i}return o.getLob()===u.Package?g.FlightHotel:g.Unknown},o.getShortPackageType=function(e){switch(o.getPackageType(e)){case g.FlightCar:return"FC";case g.FlightHotel:return"FH";case g.FlightHotelCar:return"FHC";case g.HotelCar:return"HC";default:return}},o.setPackageTypeValue=function(e){o.TEST_PACKAGE_TYPE_VALUE=e},o.submitToOmniture=function(t,i,o){a(["dctk/dctk"],function(e){o&&e.addExperiments(o),e.trackEvent("o",t,i,i.eventString)})},o.isWithinMobileBreakpoint=function(){return n&&n.mediaquery&&n.mediaquery.getMediaQueries()&&n.mediaquery.getMediaQueries().mobile&&n.mediaquery.getMediaQueries().mobile.matches},o.isTouchDevice=function(){return Modernizr&&Modernizr.touch},o.getExpUserId=function(){var t=$("#scratchpad-badge-expuserid").attr("data-id");return t||a(["gc/pageModel"],function(e){t=e.user?e.user.expUserId:void 0}),t||"-1"},o.iconOverride=function(e,t){var i=__assign({},e);return i.icon=t,i},o.getOverrideIcon=function(e,t){return"string"==typeof t&&(e=e+"|"+t),o.categoryIconOverrides[e]},o.isChildSuggestion=function(e,t){var i=e.hierarchyInfo&&e.hierarchyInfo.relation||[],o="alt"===i[0]&&"focus"===t;return-1<["child","lxcategory","nearby"].indexOf(i[0])||o},o.getURLParameter=function(e,t){return void 0===t&&(t=location.search),decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[null,""])[1].replace(/\+/g,"%20"))||null},o.getUtaBundleUrl=function(){return $("script[src*='universal_typeahead_bundle']").attr("src")},o.getUserLocation=function(){var i=void 0;try{a(["storefrontPageModel"],function(e){if(e.userInteraction&&e.userInteraction.context&&e.userInteraction.context.clientInfo&&e.userInteraction.context.clientInfo.coords){var t=e.userInteraction.context.clientInfo.coords;if(t.latitude&&t.longitude)return void(i=t.latitude+"|"+t.longitude)}})}catch(e){}return i},o.isStatusCodeInRange=function(e,t,i){var o=Number(e);return!isNaN(o)&&(t<=o&&o<=i)},o.getEssAbTestVariant=function(e,t){if(t)for(var i=t.split("|"),o=0;o<i.length;o++)if(-1<i[o].indexOf(e)){var n=i[o].split(".");if(1<n.length)return n[1]}},o.evaluateDeviceType=function(){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(navigator.userAgent)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(navigator.userAgent)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"},o.evaluateBrowserName=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE"):"Chrome"===i[1]&&null!=(e=t.match(/\bOPR\/(\d+)/))?"Opera":(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i[0])},o.defaultPageIdGetter=function(){if(window.xPageId)return window.xPageId;var e=$("#pageId"),t=1===e.length?e.val():"";return!t&&window.pageName&&(t=o.clientIdByPageName[window.pageName]),t||(t=window.dctk&&window.dctk.logging?window.dctk.logging.pageName:""),t||a(["pageData"],function(e){t=e.pageId}),t||""},o.ZERO_RESULTS_CAUSED_BY_EXCEPTION="ZERO_RESULTS_CAUSED_BY_EXCEPTION",o.responsiveTAClasses={autoCompleteClass:"autocomplete",centerClass:"pin-center",dropdownClass:"autocomplete-dropdown",hlClass:"highlight",leftClass:"pin-left",openClass:"autocomplete-open",rightClass:"pin-right"},o.defaultMask=(o.bitMaskFlags={ADDRESS:32,AIRPORT:1,CITY:2,HOTEL:128,METROCODE:64,METROSTATION:1024,MULTICITY:4,MULTIREGION:256,NEIGHBORHOOD:8,POI:16,TRAINSTATION:512}).AIRPORT|o.bitMaskFlags.CITY|o.bitMaskFlags.MULTICITY|o.bitMaskFlags.NEIGHBORHOOD|o.bitMaskFlags.POI,o.LOB_ATTRIBUTE={ACTIVITIES:"ACTIVITIES",CARS:"CARS",FLIGHTS:"FLIGHTS",HOTELS:"HOTELS",PACKAGES:"PACKAGES",RAILS:"RAILS",TEST:"",VACATIONRENTALS:"VACATIONRENTALS"},o.CATEGORIES={ADDRESS:{icon:"location",id:4,name:e.taCategoryNameAddress},AIRPORT:{icon:"flights",id:2,name:e.taCategoryNameAirports},AMENITY:{icon:"tag",id:14,name:e.taCategoryNameAmenities},ATTRACTION:{icon:"location",id:1,name:e.taCategoryNameAttractions},BESTFILTER:{icon:"search",id:17},CITY:{icon:"location",id:0,name:e.taCategoryNameRegionCity},DEALS:{icon:"location",id:13,name:e.taCategoryNameDeals},GEOLOCATION:{icon:"geolocation",id:16,name:void 0},HOTEL:{icon:"hotels",id:3,name:e.taCategoryNameHotels},LIST:{icon:"list",id:18},METROCODE:{icon:"flights",id:9,name:e.taCategoryNameAirports},METROSTATION:{icon:"train",id:6,name:e.taCategoryNameMetros},MULTICITY:{icon:"location",id:7,name:e.taCategoryNameRegionCity},NEIGHBORHOOD:{icon:"location",id:8,name:e.taCategoryNameRegionCity},POI:{icon:"location",id:11,name:e.taCategoryNameAttractions},RENTAL:{icon:"cars",id:12,name:e.taCategoryNameRentals},TRAINSTATION:{icon:"train",id:5,name:e.taCategoryNameTrains},USERHISTORY:{icon:"notime",id:15,name:e.taCategoryNameRecentSearch}},o.categoryIconOverrides={"ADDRESS|RENTALLOCATION":o.CATEGORIES.RENTAL.icon,"NEIGHBORHOOD|AIRNBH":"flights"},o.TEST_CLIENT_ID="Unknown",o.TEST_FLIGHT_TYPE_ID="Unknown",o.TEST_PACKAGE_TYPE_VALUE="Unknown",o.TEST_RAIL_TYPE_ID="Unknown",o.clientIdByPageId={Homepage:"Homepage",aws_Homepage:"AWSHomepage","page.Account.MyAccount":"UserAccountPage","page.Activities":"LXLandingPage","page.Cars":"CarsLandingPage","page.Cars.Infosite.Information":"Cars.Search","page.Domestic":"HotelsLandingPage","page.Flight-Search-Oneway":"Flights.Search","page.Flight-Search-Roundtrip.Out":"Flights.Search","page.Flight-Search.MDest":"Flights.Search","page.Flights":"FlightsLandingPage","page.Hotel-Search":"Hotels.Search","page.Hotels":"HotelsLandingPage","page.Hotels.Search":"Hotels.Search","page.Packages":"PackageLandingPage","page.Rails":"RailsLandingPage","page.car.search.list.aws":"Cars.Search","page.open-search":"OpenSearchPage"},o.clientIdByPageName={activity:"LXLandingPage",aws_Homepage:"AWSHomepage",car:"CarsLandingPage",flight:"FlightsLandingPage",homepage:"Homepage",hotel:"HotelsLandingPage",package:"PackageLandingPage"},o.clientIdByPath={"/":"Homepage","/Activities":"LXLandingPage","/Cars":"CarsLandingPage","/Flights":"FlightsLandingPage","/Flights-Search":"Flights.Search","/Holidays":"PackageLandingPage","/Hotel-Search":"Hotels.Search","/Hotels":"HotelsLandingPage","/Vacation-Packages":"PackageLandingPage","/search-results":"OpenSearchPage","/trains":"RailsLandingPage"},o.packageTypes=Object.freeze({carflight:g.FlightCar,carhotel:g.HotelCar,carhotelflight:g.FlightHotelCar,fc:g.FlightCar,fh:g.FlightHotel,fhc:g.FlightHotelCar,"flight-car":g.FlightCar,"flight-hotel":g.FlightHotel,"flight-hotel-car":g.FlightHotelCar,flightcar:g.FlightCar,flighthotel:g.FlightHotel,flighthotelcar:g.FlightHotelCar,hc:g.HotelCar,"hotel-car":g.HotelCar,hotelcar:g.HotelCar,packageflightcar:g.FlightCar,packageflighthotel:g.FlightHotel,packageflighthotelcar:g.FlightHotelCar,packagehotelcar:g.HotelCar}),o}();t.TypeaheadUtils=v});var utaScriptLoadingStartedTimestamp=Date.now();if(require("universalTypeahead",function(r){window.utaModuleReadyTimeStamp=Date.now(),r.handlePageLoad();$("body").on("focus.typeahead input.typeahead change.typeahead","[data-provide=utypeahead]",function(e,t){var i,o,n,a=$(this);a.attr("data-typeahead")||(i="#"+a.attr("id"),o=a.data("template"),a.data("jsTheme"),n=a.data(),r.initTA(i,o,n),a.attr("data-typeahead","uTA-attached"))})}),require(["typeahead/core/presentation/SvgIcons"],function(e){e.SvgIcons.init()}),define&&define.amd)try{define("require",function(){return require})}catch(e){}!function(e){e.prototype.indexOf||(e.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return-1;var a=+t||0;if(Math.abs(a)===1/0&&(a=0),n<=a)return-1;for(i=Math.max(0<=a?a:n-Math.abs(a),0);i<n;){if(i in o&&o[i]===e)return i;i++}return-1})}(Array),define("universalTypeahead",["require","exports","jquery","uitk","uitk_i18n","typeahead/core/loc","typeahead/core/context","typeahead/client/ClientHandlerRegistry","typeahead/core/ConfigurableFeature","typeahead/core/EssDataProvider","typeahead/core/ExpediaSuggestServiceRequestGenerator","typeahead/core/google/GoogleMapsDataProvider","typeahead/core/logging/FlightOriginPopulationLogger","typeahead/core/logging/OmnitureLogger","typeahead/core/logging/PerformanceMetricsLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/ScanabilityLogger","typeahead/core/logging/SelectionToSubmissionLogger","typeahead/core/logging/Severity","typeahead/core/logging/SuggestionEngagementLogger","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/TypeaheadInteractionLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/EssErrorMessage","typeahead/core/message/InputClearedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionListSelectedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/OnFocusSuggester","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/plugins/SuggestionsProvider","typeahead/core/presentation/DisplayGroupHandler","typeahead/core/presentation/DropdownContentHandlersAssembly","typeahead/core/presentation/DropDownHideHandlersAssembly","typeahead/core/presentation/DropDownShowHandlersAssembly","typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler","typeahead/core/presentation/IInputElementFocusHandler","typeahead/core/presentation/TypeaheadDropdownBuilder","typeahead/core/SearchParametersUpdater","typeahead/core/StaticDataProvider","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","typeahead/core/util/Functional","typeahead/dataprovider/IClientSideCacheStatusChecker","uitk_tooltip"],function(e,t,d,h,f,l,a,i,r,s,o,c,u,p,g,y,m,v,S,T,b,E,_,x,I,C,M,P,O,w,L,A,H,n,k,R,D,F,N,U,G,q,B,V,$,z,j,W,Y){"use strict";t.__esModule=!0;var Q=function(){function n(e,t,i){var o=this;this.essDataProvider=new s.EssDataProvider,this.suggestionsProvider=new R.SuggestionsProvider(n.pluginAssembly),this.googleMapsDataProvider=new c.GoogleMapsDataProvider,this.staticDataProvider=new $.StaticDataProvider,this.defaultEssOptions={abtest:"",additionalDataSourceUrl:"",dest:!1,features:[],lob:j.TypeaheadUtils.LOB_ATTRIBUTE.FLIGHTS,locale:"en_US",mask:j.TypeaheadUtils.defaultMask,maxitems:20,maxresults:10,overrideDataRequest:null,overrideServiceUrl:"",serviceUrl:"//suggest.expedia.com",version:"v2"},this.defaultTAOptions={closetext:l.closetext,continuetext:l.continuetext,forceicon:!1,minchar:1,onInputBlur:null,onInputFocus:null,onItemSelected:null,onItemSelectionChanged:null,onPopupClosed:null,onPopupOpened:null,openDefaultTa:!1,playBackText:"",preRenderTransform:null,selectFirstElementByDefault:!0,tooltip:!0},this.defaultOptions=d.extend({},this.defaultTAOptions,this.defaultEssOptions),this.displayGroupHandler=new D.DisplayGroupHandler,this.dropdownContentHandlersAssembly=new F.DropdownContentHandlersAssembly(n.pluginAssembly),this.dropDownShowHandlersAssembly=new U.DropDownShowHandlersAssembly(n.pluginAssembly),this.dropDownHideHandlersAssembly=new N.DropDownHideHandlersAssembly(n.pluginAssembly),this.inputElementFocusByHumanOrScriptHandlers=n.pluginAssembly.get(G.isInputElementFocusByHumanOrScriptHandler),this.inputElementFocusHandlers=n.pluginAssembly.get(q.isInputElementFocusHandler),this.onFocusSuggester=new H.OnFocusSuggester(n.pluginAssembly.get(k.DefaultPluginAssembly.onFocusSuggestionsProviderIdentifier)),this.clientSideCacheStatusChecker=n.pluginAssembly.get(Y.isClientSideCacheDisabled),this.ESS_EXCEPTION_RESPONSE_CODES=[j.TypeaheadUtils.ZERO_RESULTS_CAUSED_BY_EXCEPTION],this.$input=d(e),this.$parent=this.$input.closest("."+j.TypeaheadUtils.responsiveTAClasses.autoCompleteClass),this.$label=this.$input.closest("label"),this.setPinClass(this.$parent),this.opts=d.extend(!0,{},this.defaultOptions,i,{browser:j.TypeaheadUtils.getBrowser(),device:j.TypeaheadUtils.getDeviceType(),guid:j.TypeaheadUtils.getGuid(),locale:a.locale,serviceUrl:a.serviceUrl,siteid:a.siteid}),this.requestGenerator=this.constructRequestGenerator(this.opts,n.pluginAssembly),this.opts.clientId||(this.opts.clientId=j.TypeaheadUtils.getClientId()),this.opts.packageType=j.TypeaheadUtils.getShortPackageType(this.$input),this.context=this.constructContext(this.opts),this.opts.featureOverrides=r.ConfigurableFeature.getFeatureOverrides(this.$input),this.ariaOwns=this.$input.attr("aria-owns")||"backwards",this.templateUsed=t,this.firstItemFlag=!0,this.lastItemFlag=!0,this.searchType=null,this.cache={},this.ignoreNext=!1,this.isClickOn=!1,this.$input.autocomplete="off",this.$input.on("focus",d.proxy(this.focus,this)).on("keydown",d.proxy(this.keyDown,this)).on("keyup",d.proxy(this.keyUp,this)).on("keypress",d.proxy(this.keyPress,this)).on("input",d.proxy(this.input,this)).on("blur",d.proxy(this.blur,this)),this.$popupContent=this.$input.closest("."+j.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).children("."+j.TypeaheadUtils.responsiveTAClasses.dropdownClass),this.$input.data("typeahead",this),this.opts.openDefaultTa&&this.dataRequest("defaultResponse"),this.renderedData={query:"",results:[]},n.seLogger||(n.seLogger=new T.SuggestionEngagementLogger),n.interactionLogger||(n.interactionLogger=new E.TypeaheadInteractionLogger),n.scanabilityLogger||(n.scanabilityLogger=new m.ScanabilityLogger),n.selectionToSubmissionLogger||(n.selectionToSubmissionLogger=new v.SelectionToSubmissionLogger),n.oLogger||(n.oLogger=new p.OmnitureLogger),n.performanceMetricsLogger||(n.performanceMetricsLogger=new g.PerformanceMetricsLogger),L.TypeaheadMessage.subscribe(I.InputClearedMessage.getTopic(),function(e,t){if(t&&t.$elem){var i=t.$elem.attr("id");o.$input.attr("id")===i&&o.input(null)}}),d(document.body).bind("mousedown",function(e){d(e.target).is(o.$input)||o.close()})}return n.initOmnitureLogger=function(){n.oLogger=new p.OmnitureLogger},n.initFlightOriginLogger=function(){n.flightOriginPopulationLogger=new u.FlightOriginPopulationLogger},n.getOmnitureLogger=function(){return n.oLogger},n.prototype.getCategory=function(e){if("USERHISTORY"===e.category)return j.TypeaheadUtils.CATEGORIES.USERHISTORY;if(e.hierarchyInfo&&e.hierarchyInfo.relation&&"hotelfilter"===e.hierarchyInfo.relation[0])return j.TypeaheadUtils.CATEGORIES.BESTFILTER;if(void 0!==e.type){var t=j.TypeaheadUtils.getOverrideIcon(e.type,e.subtype);return"string"==typeof t?j.TypeaheadUtils.iconOverride(j.TypeaheadUtils.CATEGORIES[e.type],t):j.TypeaheadUtils.CATEGORIES[e.type]}return void 0!==e.t?j.TypeaheadUtils.CATEGORIES[e.t]:void 0},n.prototype.addIndexToItems=function(e){e.forEach(function(e,t){e.index=t})},n.prototype.updateSearchSuggestions=function(e,t,i,r,o){var s=this,n=this.suggestionsProvider.modifySuggestions(e,i,this.opts,o);d.each(n,function(e,t){var i,o,n,a=s.getCategory(t);t.categoryName=a?a.name:"Other",t.icon||(i=a,t.icon=r||(i?i.icon:"location")),void 0!==(o=t).regionNames&&(void 0!==o.regionNames.lastSearchName?o.regionNames.lastSearchName=o.regionNames.lastSearchName.replace(/'/g,"&#39;"):void 0!==o.regionNames.fullName&&(o.regionNames.fullName=o.regionNames.fullName.replace(/'/g,"&#39;"),o.regionNames.lastSearchName=o.regionNames.fullName)),(n=t).categoryVM={displayName:"",fullName:""},"regionNames"in n?(n.categoryVM.displayName=n.regionNames.displayName,n.categoryVM.fullName=n.regionNames.fullName,n.categoryVM.lastSearchName=n.regionNames.lastSearchName):"d"in n&&(n.categoryVM.displayName=n.d,n.categoryVM.fullName=n.l)})},n.prototype.constructContext=function(e){return{clientId:e.clientId,deviceType:j.TypeaheadUtils.getDeviceType(),expuserid:j.TypeaheadUtils.getExpUserId(),getShortPackageType:function(){return j.TypeaheadUtils.getShortPackageType()},guid:e.guid,lob:e.lob,locale:e.locale,siteid:e.siteid.toString(10),tab:i.ClientHandlerRegistry.getTab()}},n.prototype.constructSuggestionServiceUrlOptions=function(e){return{locale:e.locale,overrideServiceUrl:e.overrideServiceUrl,serviceUrl:e.serviceUrl,suggestServiceUrl:e.suggestServiceUrl}},n.prototype.constructRequestGenerator=function(e,t){return new o.ExpediaSuggestServiceRequestGenerator(o.ExpediaSuggestServiceRequestGenerator.ESS_ABACUS_IDS,"function"==typeof o.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner?o.ExpediaSuggestServiceRequestGenerator.defaultVariantAssigner:void 0,this.constructSuggestionServiceUrlOptions(e),e.siteid,t)},n.prototype.getDomElementId=function(){return this.$input.attr("id")},n.prototype.showPopup=function(){this.$popupContent.is(":hidden")&&(this.$popupContent.off("mousedown").off("mouseup").off("mouseenter").off("mouseleave").on("mousedown",d.proxy(this.clickOn,this)).on("mouseup",d.proxy(this.clickOff,this)).on("mouseenter","a",d.proxy(this.mouseEnter,this)).on("mouseleave","a",d.proxy(this.mouseLeave,this)),this.$popupContent.closest("."+j.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).addClass(j.TypeaheadUtils.responsiveTAClasses.openClass),this.$popupContent.show(),this.dropDownShowHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)),this.dropdownContentHandlersAssembly.runHandlers(this.$popupContent,this.$input,this.context)},n.prototype.startRequest=function(){var e=this,t="number"==typeof this.opts.minchar?this.opts.minchar:1,i=this.$input.val();if(i.length>=t){var o=this.cache[i];o?this.clientSideCacheStatusChecker&&this.clientSideCacheStatusChecker.length&&this.clientSideCacheStatusChecker[0].isClientSideCacheDisabled(this.context)?this.dataRequest(i):e.render(o.query,o.results,o.activeABTests,o.overriddenABTests,o.responseCode):this.dataRequest(i)}else""===i?this.$input.triggerHandler("focus",!0):this.close()},n.prototype.createTypeaheadOptions=function(e){return d.extend(!0,{},this.opts,{context:this.context,inputElementId:this.getDomElementId(),requestGenerator:this.requestGenerator,srchText:e})},n.prototype.dataRequest=function(e){this.essDataProvider.fetchData(this.createTypeaheadOptions(e)).then(d.proxy(this.essResponseResolver,this)).fail(function(e){b.default.log(e,S.Severity.MustFix,y.ProblemOrigin.ExpediaSuggestService),L.TypeaheadMessage.publish(new x.EssErrorMessage(e.status))})},n.prototype.essResponseResolver=function(e){var i=this;if(e){var t=d.extend(!0,{},this.opts,{activeEssTests:e.activeABTests,inputElem:this.$input,overriddenEssTests:e.overriddenABTests,requestType:e.responseCode,srchText:e.query});this.staticDataProvider.fetchData(t,e).then(function(e){if(e.isReferralToGoogleMaps){var t=d.extend(!0,{},i.opts,{activeEssTests:e.activeABTests,domElementId:i.getDomElementId(),overriddenEssTests:e.overriddenABTests,requestType:e.responseCode,srchText:e.query});i.googleMapsDataProvider.fetchData(t,e).then(function(e){e?i.renderSuggestionsForResponse(e):i.close()})}else(i.cache[e.query]=e).results?i.render(e.query,e.results,e.activeABTests,e.overriddenABTests,e.responseCode):i.close()})}},n.prototype.renderSuggestionsForResponse=function(e){var t=void 0,i=void 0,o=void 0;(this.cache[e.query]=e).isReferralToGoogleMaps||(t=e.activeABTests,i=e.overriddenABTests,o=e.responseCode),e.results&&0<e.results.length?this.render(e.query,e.results,t,i,o):this.close()},n.prototype.appendUserTypedText=function(e,t){var i,o=!0,n={};this.opts.playBackText&&"defaultResponse"!==t&&(d.each(e,function(e,t){-1===t.id&&(o=!1)}),o&&(t=t.replace(/<script[\s\S]+?script\s*>?/gi,""),i=(i=this.opts.playBackText).replace(/\d/,t),n.l=t,n.d=i,n.id=-1,n.i=-1,"HOTELS"===this.opts.lob&&(n.t="HOTEL"),e.push(n)))},n.prototype.render=function(e,t,i,o,n){""===e?d.extend(this.opts,{renderTrigger:"focus"}):d.extend(this.opts,{renderTrigger:"type"});var a=Date.now();if(!e||this.$input.val()===e||this.opts.openDefaultTa){var r,s,l,c,u=d.extend(!0,[],t);if(0===u.length)return this.close(),void this.publishSuggestionReadyMessage(e,t,i,this.getDomElementId(),n);if(d(document.activeElement).attr("id")===this.$input.attr("id")){if(this.appendUserTypedText(u,e),this.addIndexToItems(u),this.opts.preRenderTransform&&"function"==typeof this.opts.preRenderTransform&&(!(u=this.opts.preRenderTransform(e,u))||!Array.isArray(u)))throw new Error("preRenderTransform callback must return a valid array.");var p=i&&o?i+"|"+o:i||(o||"");this.updateSearchSuggestions(u,this.suggestionsProvider,this.context,this.opts.forceicon,p),this.addIndexToItems(u),r=this.displayGroupHandler.getResultsByDisplayGroup(u),c={closeText:this.opts.closetext,resultsByDisplayGroup:r},"android"in Modernizr&&Modernizr.android||(c.ariaOwns=this.ariaOwns),this.renderedData.query=e,this.renderedData.results=d.extend(!0,[],u),this.$popupContent.html(B.TypeaheadDropdownBuilder.getHtml(c)),this.showPopup(),this.$label.addClass("focused"),l=u.length,s=1===l?"typeahead_results_displayed_one":"typeahead_results_displayed_other",conditionizr.safari?setTimeout(function(){h.utils.liveAnnounce(f.t(s,{arg0:l}),"polite"),setTimeout(function(){h.utils.liveAnnounce("","polite")},200)},800):h.utils.liveAnnounce(f.t(s,{arg0:l}),"polite");var g=Date.now()-a;L.TypeaheadMessage.publish(new w.SuggestionShownMessage(this.renderedData.results,e,i,this.opts.lob,g,this.getDomElementId())),this.publishSuggestionReadyMessage(e,t,i,this.getDomElementId(),n),window.utaTestHooks.latestEssResults=this.renderedData.results}}else this.publishSuggestionReadyMessage(e,t,i,this.getDomElementId(),n)},n.prototype.close=function(){var t=this;this.$popupContent.off("mousedown",d.proxy(this.clickOn,this)).off("mouseup",d.proxy(this.clickOff,this)).off("mouseenter","a",d.proxy(this.mouseEnter,this)).off("mouseleave","a",d.proxy(this.mouseLeave,this)),this.$popupContent.is(":hidden")||setTimeout(function(){t.$label.removeClass("focused"),t.$popupContent.closest("."+j.TypeaheadUtils.responsiveTAClasses.autoCompleteClass).removeClass(j.TypeaheadUtils.responsiveTAClasses.openClass),t.removeActiveDescendant(),t.$popupContent.unbind("mousedown",d.proxy(t.cancelEvent,t)),d(document.body).unbind("mousedown",d.proxy(t.close,t)),t.dropDownHideHandlersAssembly.runHandlers(t.$popupContent,t.$input,t.context);var e=d(document.body).scrollTop();d(document.body).scrollTop(e),t.$popupContent.hide(),t.$popupContent.html("")},0)},n.prototype.removeActiveDescendant=function(){var e=d("input[aria-activedescendant]");0<e.length&&e.removeAttr("aria-activedescendant")},n.prototype.prev=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+j.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(j.TypeaheadUtils.responsiveTAClasses.hlClass),i=e.index(t)-1,o=e[i],n=d(o),a=d(o).attr("id"),r=e.length-1,s="";i<-1&&(o=e[r],n=d(o)),o?(d(o).addClass(j.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(n),d(o).hasClass("close")?h.utils.liveAnnounce(l.closeSuggestions||f.t("close"),"assertive"):(s=d(o).attr("data-value"),conditionizr.firefox||h.utils.liveAnnounce(s,"polite"),this.$input.attr("aria-activedescendant",a))):(this.$input.removeAttr("aria-activedescendant"),h.utils.liveAnnounce(this.$input.val(),"polite"))},n.prototype.next=function(){var e=this.$popupContent.find("a"),t=this.$popupContent.find("."+j.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(j.TypeaheadUtils.responsiveTAClasses.hlClass),i=e.index(t),o=e[i+1],n=d(o),a=d(o).attr("id");o?(n.addClass(j.TypeaheadUtils.responsiveTAClasses.hlClass),this.opts.onItemSelectionChanged&&"function"==typeof this.opts.onItemSelectionChanged&&this.opts.onItemSelectionChanged(n),d(o).hasClass("close")?h.utils.liveAnnounce(l.closeSuggestions||f.t("close"),"assertive"):(this.$input.attr("aria-activedescendant",a),conditionizr.firefox||h.utils.liveAnnounce(d(o).attr("data-value"),"polite"))):h.utils.liveAnnounce(this.$input.val(),"polite")},n.prototype.removeHighlights=function(){this.$popupContent.find("."+j.TypeaheadUtils.responsiveTAClasses.hlClass).removeClass(j.TypeaheadUtils.responsiveTAClasses.hlClass)},n.prototype.getSelectedSuggestion=function(e){if(this.renderedData.results&&e){var t=e.substring(e.lastIndexOf("-")+1),i=parseInt(t,10)+1,o=!1;if(i<this.renderedData.results.length){var n=this.renderedData.results[i];o=n.hierarchyInfo&&"true"===n.hierarchyInfo.isChild}return z.createSuggestion(this.renderedData.results[t],o)}return null},n.prototype.selectHighlighted=function(e,t){var i,o,n=this.$popupContent.find("."+j.TypeaheadUtils.responsiveTAClasses.hlClass),a=n.text(),r=d(e.target);if(t=t||r.hasClass("close")||r.parent().hasClass("close"),h.isTouchDevice&&!a&&(n=r.closest(".results-item").find("a"),t=r.hasClass("footer")),n&&n.attr("id")&&"LIST"===(o=this.getSelectedSuggestion(n.attr("id"))).getType().orElse(""))L.TypeaheadMessage.publish(new M.SuggestionListSelectedMessage(o,this.opts.lob,this.getDomElementId()));else{if(i=a.replace(/(^\s+|\s+$)/g,""),this.updateTextField(n),n.removeClass(j.TypeaheadUtils.responsiveTAClasses.hlClass),!0===t)n.text().replace(/(^\s+|\s+$)/g,""),h.utils.liveAnnounce(f.t("close_button_menu_closed")),this.close();else{var s=f.t("item_selected_menu_closed",{arg0:i});h.utils.liveAnnounce(s,"assertive")}o&&(V.updateForSuggestion(this.$input.val(),o,this.opts,this.getDomElementId()),L.TypeaheadMessage.publish(new O.SuggestionSelectedMessage(o,e,this.opts.lob,this.getDomElementId()))),n.context=this.$input;var l={element:n,suggestionSelected:o};h.publish("typeahead.resultSelected",l),"function"==typeof this.opts.selectioncallback?this.opts.selectioncallback(n):"function"==typeof window[this.opts.selectioncallback]&&window[this.opts.selectioncallback](n)}},n.prototype.updateTextField=function(e){var t,i,o,n,a=e.attr("id");if(e&&a){if(t=a.lastIndexOf("-"),i=+a.substring(t+1),o=this.renderedData.results[i],n=e.attr("data-value")){n=n.replace(/&#39;/g,"'"),this.$input.val(n),"GEOLOCATION"!==o.category&&this.$input.trigger("change");var r=e.attr("data-id");r&&this.$input.attr("data-id",r)}h.prepFields(),this.close()}},n.prototype.showOnFocusSuggestions=function(){var t=this;if("ja_JP"!==this.context.locale||this.$input.closest("div.col").hasClass("typeahead-overlay")||this.$input.closest("div.col").hasClass("typeahead-non-mobile-overlay-autocomplete-parent")){var i=this.$input.val();this.onFocusSuggester.suggest(this.createTypeaheadOptions(""),this.context).done(d.proxy(function(e){e&&(t.$input.val()&&i!==t.$input.val()||t.render("",e.results,"",""))},this))}else this.close()},n.prototype.focus=function(e,t){this.hasFocus&&!t||(W.mapMethodByName(this.inputElementFocusByHumanOrScriptHandlers,"handleInputElementFocusByHumanOrScript",this.$input,this.context),e.isTrigger&&!t||(L.TypeaheadMessage.publish(new _.ElementFocusedMessage(this.$input.val(),this.context,this.getDomElementId())),W.mapMethodByName(this.inputElementFocusHandlers,"handleInputElementFocus",this.$input,this.context),this.showOnFocusSuggestions(),this.opts.onInputFocus&&"function"==typeof this.opts.onInputFocus&&this.opts.onInputFocus(e))),this.hasFocus=!0,this.opts.packageType=j.TypeaheadUtils.getShortPackageType(this.$input)},n.prototype.blur=function(e){this.hasFocus=!1,this.opts.onInputBlur&&"function"==typeof this.opts.onInputBlur&&this.opts.onInputBlur(e),window.navigator.msPointerEnabled&&!window.PointerEvent||(this.isClickOn&&this.$popupContent.bind("mousedown",d.proxy(this.cancelEvent,this)),L.TypeaheadMessage.publish(new A.UserExitedMessage(this.context,this.getDomElementId(),e)))},n.prototype.keyDown=function(e){var t;switch(e||(e=window.event),t=e.keyCode){case 27:this.close(),e.stopPropagation();break;case 9:case 13:if(this.opts.selectFirstElementByDefault&&this.$popupContent.find(".highlight").length<=0&&this.$label.hasClass("focused")){var i=this.$popupContent.find("li.category-item");if(i&&0!==i.length||(i=this.$popupContent.find("li.results-item")),i){var o=i.first();o&&o.find("a").addClass("highlight")}}this.$popupContent.find(".highlight").length&&(e.stopPropagation(),13===t&&e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")));break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault());break;case 39:this.$popupContent.find(".highlight").length&&(this.ignoreNext=!0,e.stopPropagation(),this.selectHighlighted(e,!1));break;case 38:e.preventDefault(),e.stopPropagation(),this.prev();break;case 40:e.stopPropagation(),e.preventDefault(),this.next()}},n.prototype.keyPress=function(e){e||(e=window.event),13===e.keyCode&&this.close()},n.prototype.keyUp=function(e){if(this.ignoreNext)this.ignoreNext=!1;else switch(e||(e=window.event),e.keyCode){case 37:this.removeHighlights();break;case 38:e.preventDefault(),e.stopPropagation();break;case 40:e.stopPropagation(),e.preventDefault();break;case 13:break;case 32:this.$popupContent.find(".highlight").hasClass("close")&&(e.stopPropagation(),e.preventDefault(),this.selectHighlighted(e,this.$popupContent.find(".highlight").hasClass("close")))}},n.prototype.input=function(e){var t=this;L.TypeaheadMessage.publish(new C.InputValueEditedMessage(this.$input.val(),this.opts.lob,this.getDomElementId())),this.$input.val()!==this.oldInputVal&&(this.oldInputVal=this.$input.val(),this.startRequest(),setTimeout(function(){V.updateForSuggestion(t.$input.val(),void 0,t.opts,t.getDomElementId())}),this.opts.onInputEdited&&this.opts.onInputEdited(this.$input.val()))},n.prototype.clickOn=function(e){var t=d(e.target);t.hasClass("close")||t.parent().hasClass("close")||(this.isClickOn=!0),this.click(e)},n.prototype.clickOff=function(){this.isClickOn=!1},n.prototype.click=function(e){e.stopPropagation(),e.preventDefault(),(0===e.button||h.isTouchDevice)&&this.selectHighlighted(e,!1)},n.prototype.mouseEnter=function(e){d(e.currentTarget).addClass("highlight")},n.prototype.mouseLeave=function(e){this.removeHighlights()},n.prototype.cancelEvent=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1},n.prototype.remove=function(){this.$input.autocomplete="on",this.$input.closest("form").attr("autocomplete","on"),this.$input.off("focus",d.proxy(this.focus,this)).off("keydown",d.proxy(this.keyDown,this)).off("keyup",d.proxy(this.keyUp,this)).off("keypress",d.proxy(this.keyPress,this)).off("input",d.proxy(this.input,this)).off("blur",d.proxy(this.blur,this)),this.$popupContent.off("mousedown",d.proxy(this.clickOn,this)).off("mouseup",d.proxy(this.clickOff,this)).off("mouseenter","a",d.proxy(this.mouseEnter,this)).remove()},n.prototype.setPinClass=function(e){e.hasClass(j.TypeaheadUtils.responsiveTAClasses.leftClass)||e.hasClass(j.TypeaheadUtils.responsiveTAClasses.rightClass)||e.hasClass(j.TypeaheadUtils.responsiveTAClasses.centerClass)||e.addClass(j.TypeaheadUtils.responsiveTAClasses.leftClass)},n.prototype.publishSuggestionReadyMessage=function(e,t,i,o,n){this.ESS_EXCEPTION_RESPONSE_CODES.indexOf(n)<0?L.TypeaheadMessage.publish(new P.SuggestionReadyMessage(e,t,i,o)):L.TypeaheadMessage.publish(new x.EssErrorMessage(n))},n.pluginAssembly=new k.DefaultPluginAssembly,n}();t.handlePageLoad=function(){window.utaTestHooks={},Q.initOmnitureLogger(),Q.initFlightOriginLogger(),setTimeout(function(){j.TypeaheadUtils.isStorefrontClient()?e(["gc/pageModel"],function(e){n.CompositePageLoadHandler.getInstance().handlePageLoad(Q.pluginAssembly)}):n.CompositePageLoadHandler.getInstance().handlePageLoad(Q.pluginAssembly)},0)},t.initTA=function(e,t,i){return new Q(e,t,i)},t.registerPlugin=function(e){Q.pluginAssembly.registerPlugin(e)}}),define("typeahead/core/geolocation/GeolocationDataProvider",["require","exports","typeahead/core/loc","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/IListItem","typeahead/core/message/TypeaheadMessage"],function(e,t,i,r,s,l,o,c){"use strict";t.__esModule=!0;var n=function(){function a(){this.geolocationResult={category:a.CATEGORY,listItemType:o.ListItemType.Suggestion,regionNames:{displayName:a.MESSAGES.SUGGESTION_TEXT,lastSearchName:a.MESSAGES.DISPLAY_TEXT},type:a.CATEGORY}}return a.prototype.fetchData=function(e){return $.Deferred().resolve({results:[this.getGeolocationResult()]}).promise()},a.prototype.findGeolocation=function(t,i){var o=this;void 0===i&&(i=void 0);var n=!1;c.TypeaheadMessage.publish(new s.GeolocationRequestMessage(t)),navigator.geolocation.getCurrentPosition(function(e){n=!0,o.setGeolocation(e),c.TypeaheadMessage.publish(new l.GeolocationResponseMessage(t,o.objectifyPosition(e),void 0,o.getGeolocationResult(),i)),setTimeout(function(){o.setGeolocation(void 0),c.TypeaheadMessage.publish(new r.GeolocationClearedMessage(t,o.getGeolocationResult()))},a.TTL_IN_MILLISEC)},function(e){n||(n=!0,c.TypeaheadMessage.publish(new l.GeolocationResponseMessage(t,void 0,o.objectifyPositionError(e),o.getGeolocationResult())))},{enableHighAccuracy:!0,maximumAge:0,timeout:a.TIMEOUT_IN_MILLISEC}),setTimeout(function(){n||(n=!0,c.TypeaheadMessage.publish(new l.GeolocationResponseMessage(t,void 0,{code:3,message:"Fallback timeout expired"},o.getGeolocationResult())))},a.TIMEOUT_IN_MILLISEC+15e3)},a.prototype.getGeolocationResult=function(){return this.geolocationResult},a.prototype.setGeolocation=function(e){e&&e.coords?this.geolocationResult.coordinates={lat:e.coords.latitude+"",long:e.coords.longitude+""}:this.geolocationResult.coordinates=void 0},a.prototype.objectifyPosition=function(e){return{coords:e.coords?{accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed}:void 0,timestamp:e.timestamp}},a.prototype.objectifyPositionError=function(e){return{code:e.code,message:e.message}},a.CATEGORY="GEOLOCATION",a.TIMEOUT_IN_MILLISEC=6e3,a.TTL_IN_MILLISEC=18e4,a.MESSAGES={DISPLAY_TEXT:i.geolocationDisplayText||"Your current location",SUGGESTION_TEXT:i.geolocationSuggestionText||"Use your current location"},a}();t.GeolocationDataProvider=n}),define("typeahead/core/geolocation/GeolocationIcon",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.locationIcon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE2cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTZweCIgDQp4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnNrZXRjaD0iaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoL25zIiANCnhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGUvPjxkZWZzLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIA0KaWQ9Ikljb25zIHdpdGggbnVtYmVycyIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiPjxnIGZpbGw9IiMwMDY1YjgiIGlkPSJHcm91cCIgDQp0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQ0LjAwMDAwMCwgLTE5Mi4wMDAwMDApIj4NCjxwYXRoIGQ9Ik0xNDQuMDE3NDU2LDIwMCBMMTYwLjAxOTY1MywxOTIuMDQzMDkxIEwxNTIsMjA4LjA4ODYyMyBMMTUyLDIwMCBMMTQ0LjAxNzQ1NiwyMDAgWiBNMTQ0LjAxNzQ1NiwyMDAiIA0KaWQ9IlBhdGggMjIxIi8+PC9nPjwvZz48L3N2Zz4="});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/geolocation/GeolocationSuggestion",["require","exports","typeahead/core/Suggestion"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!1},t}(i.Suggestion);t.GeolocationSuggestion=o}),define("typeahead/core/geolocation/GeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,o,n,a,r,s,l){"use strict";t.__esModule=!0;var c=function(){function t(e){var i=this;this.geolocationDataProvider=e,this.errorConfigMap={1:{code:1,closeTypeahead:!0,message:t.MESSAGES.PERMISSION_DENIED},2:{code:2,closeTypeahead:!0,message:t.MESSAGES.POSITION_UNAVAILABLE},3:{code:3,closeTypeahead:!1,message:t.MESSAGES.TIMEOUT},4:{code:4,closeTypeahead:!1,message:t.MESSAGES.UNKNOWN_ERROR}},this.interstitialContentSelector=".wrap",l.TypeaheadMessage.subscribe(r.ElementFocusedMessage.getTopic(),function(e,t){i.domElementId=t.getDomElementId()}),l.TypeaheadMessage.subscribe(s.SuggestionSelectedMessage.getTopic(),function(e,t){o.GeolocationDataProvider.CATEGORY!==t.getSuggestion().getCategory().orElse("")||i.isGeolocationAvailable()||i.geolocationDataProvider.findGeolocation(t.getDomElementId())}),l.TypeaheadMessage.subscribe(n.GeolocationRequestMessage.getTopic(),function(e,t){i.showInterstitial(t.getDomElementId())}),l.TypeaheadMessage.subscribe(a.GeolocationResponseMessage.getTopic(),function(e,t){i.handleGeolocationResponse(t)})}return t.prototype.handleGeolocationResponse=function(e){this.hideInterstitial(e.getDomElementId()),e.getPositionError()?(this.showErrorModal(e.getPositionError().code,e.getDomElementId()),$("#"+e.getDomElementId()).val("")):(this.updateSearchParameters(e.getGeolocationResult(),$("#"+e.getDomElementId())),e.getSubmitButton()&&e.getSubmitButton().trigger("click"))},t.prototype.getErrorMessage=function(e){return this.errorConfigMap[e]?this.errorConfigMap[e].message:this.errorConfigMap[4].message},t.prototype.showInterstitial=function(e){$("#"+e).blur(),uitk.publish("results.changed",{contentId:this.interstitialContentSelector,disable:!0,message:"<p>"+t.MESSAGES.FINDING_GEOLOCATION+"</p>",scrollToTop:!1,showLoader:!0})},t.prototype.hideInterstitial=function(e){uitk.publish("results.complete",{ariaLevel:"polite",contentId:this.interstitialContentSelector})},t.prototype.showErrorModal=function(i,o){var n=this,a=uitk.modal.create({content:"<p>"+this.getErrorMessage(i)+"</p>",focusClose:o,modalId:"geolocationErrorModal",title:t.MESSAGES.ERROR_TITLE});uitk.subscribe("modal.close",function(e,t){t===a&&(n.errorConfigMap[i].closeTypeahead||$("#"+o).trigger("focus",!0))})},t.MESSAGES={ERROR_TITLE:i.geolocationErrorTitle||"We are unable to determine your current location",FINDING_GEOLOCATION:i.geolocationFindingMessage||"Finding your current location",PERMISSION_DENIED:i.geolocationPermissionDeniedMessage||"Please turn on the location services on your device so we can determine your location or type in a destination.",POSITION_UNAVAILABLE:i.geolocationPositionUnavailableMessage||"Please type in a destination.",TIMEOUT:i.geolocationTimeoutMessage||"Please retry or type in a destination.",UNKNOWN_ERROR:i.geolocationUnknownErrorMessage||"Please retry or type in a destination."},t}();t.GeolocationViewController=c});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/geolocation/MercuryGeolocationViewController",["require","exports","typeahead/core/loc","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/GeolocationViewController","typeahead/core/geolocation/message/GeolocationClearedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SearchParametersUpdater","typeahead/core/SuggestionFactory"],function(e,t,i,o,n,a,r,s,l,c,u,p){"use strict";t.__esModule=!0;var g=function(t){function e(e){var i=t.call(this,e)||this;return i.geolocationDataProvider=e,c.TypeaheadMessage.subscribe(s.SubmitClickedMessage.getTopic(),function(e,t){i.isGeolocationSuggestionSelected(i.getVisibleTypeaheadDivElement())&&(i.isGeolocationAvailable()?i.disableLocalStorage():(t.getEvent()&&t.getEvent().preventDefault(),i.geolocationDataProvider.findGeolocation(i.getVisibleTypeaheadDivElement().find("input[data-gcw-storeable-name=gcw-destination]").attr("id"),$(t.getEvent().currentTarget))))}),c.TypeaheadMessage.subscribe(r.FormSubmittedMessage.getTopic(),function(e,t){t.isFormValid()&&i.isGeolocationSuggestionSelected(i.getVisibleTypeaheadDivElement())&&$("form:has(input[data-provide=utypeahead]):visible").append($("<input>").attr("type","hidden").attr("name","sort").val("distance"))}),c.TypeaheadMessage.subscribe(a.GeolocationClearedMessage.getTopic(),function(e,t){i.updateSearchParameters(t.getGeolocationResult(),$("#"+t.getDomElementId()))}),i}return __extends(e,t),e.prototype.handlePageLoad=function(n,a){var r=this;this.geolocationDataProvider.fetchData(void 0).done(function(e){var t=e.results[0],i=$("form[data-lob-form="+n.tab+"]").find("input[data-gcw-storeable-name=gcw-destination]"),o=i.closest("div.autocomplete");o.length&&(a||"activity"!==n.tab&&(r.isGeolocationCategory(o)||!i.val()))&&r.populateCurrentLocationSearchContext(i,t)})},e.prototype.isGeolocationAvailable=function(){return this.getVisibleTypeaheadDivElement().find("[id*=lat_long]").val()},e.prototype.updateSearchParameters=function(e,t){u.updateForSuggestion(void 0,p.createSuggestion(e),t.data(),t.attr("id"))},e.prototype.isGeolocationCategory=function(e){return o.GeolocationDataProvider.CATEGORY===e.find("[id*=category]").val()},e.prototype.isGeolocationSuggestionSelected=function(e){return o.GeolocationDataProvider.CATEGORY===e.find("[id*=region_type]").val()},e.prototype.getVisibleTypeaheadDivElement=function(){return $("div.autocomplete:visible")},e.prototype.disableLocalStorage=function(){this.getVisibleTypeaheadDivElement().find(".gcw-storeable").not("[id*=category]").each(function(e,t){$(t).removeClass("gcw-storeable")})},e.prototype.populateCurrentLocationSearchContext=function(e,t){e.val(t.regionNames.lastSearchName),this.updateSearchParameters(t,e),c.TypeaheadMessage.publish(new l.SuggestionAutoSelectedMessage(p.createSuggestion(t),e.attr("id")))},e}(n.GeolocationViewController);t.MercuryGeolocationViewController=g});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/google/AddressAutocompleteFailureMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(r){function e(e,t,i,o,n){var a=r.call(this,e,t,"AddressAutocompleteFailure",n)||this;return a.userTypedQuery=i,a.status=o,a}return __extends(e,r),e}(i.TypeaheadMetric);t.AddressAutocompleteFailureMetric=o}),define("typeahead/core/google/GoogleMapsDataProvider",["require","exports","typeahead/core/EssDataProvider","typeahead/core/google/AddressAutocompleteFailureMetric","typeahead/core/google/PoweredByGoogleLogo","typeahead/core/IListItem","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/Suggestion","typeahead/core/TypeaheadUtils"],function(e,t,r,p,i,o,g,s,l,c,n,a){"use strict";t.__esModule=!0;var u=a.TypeaheadUtils.getLocale().replace("_","-");$.getScript("https://maps.googleapis.com/maps/api/js?client=gme-expedia&channel=ess&libraries=places&language="+u);var d=function(){function u(){}return u.getSuggestionResult=function(e,t){return{category:n.SuggestionCategory[n.SuggestionCategory.GOOGLEMAPS],coordinates:void 0,listItemType:o.ListItemType.Suggestion,regionNames:{displayName:u.boldMatchedSubStringInPrediction(e),fullName:e.description,lastSearchName:e.description},sourceId:e.place_id,sourceName:"GPA",type:"ADDRESS",index:t}},u.boldMatchedSubStringInPrediction=function(e){for(var t,i=e.description,o="",n=0,a=e.matched_substrings,r=0;r<a.length;r++)t=a[r],o+=i.slice(n,t.offset),o+="<B>"+i.slice(t.offset,t.offset+t.length)+"</B>",n=t.offset+t.length;return o+i.slice(n)},u.mergeResponsesFromGoogleEss=function(e,t){var i={activeABTests:t.activeABTests,isReferralToGoogleMaps:t.isReferralToGoogleMaps,overriddenABTests:t.overriddenABTests,query:t.query,responseCode:t.responseCode,results:t.results},o=t.results&&0<t.results.length?t.results.length:0;return i=u.updateCombinedResponseResults(i,e,o)},u.updateCombinedResponseResults=function(t,e,i){var o=i;return e.results.forEach(function(e){0<o&&(e.index=o+++""),t.results=t.results.concat(e)}),t},u.prototype.fetchData=function(i,o){var n=this,a=$.Deferred(),e={input:i.srchText,types:r.GoogleRequestType[r.GoogleRequestType.ADDRESS_AUTOCOMPLETE]===i.requestType?["geocode"]:void 0};return google&&google.maps&&google.maps.places&&google.maps.places.AutocompleteService?this.getGoogleAutocompleteService().getPlacePredictions(e,function(e,t){n.handlePredictionsResponse(e,t,i,o,a)}):c.default.log(new Error("Google maps script not loaded"),l.Severity.Excusable,s.ProblemOrigin.UniversalTypeahead),a.promise()},u.prototype.getGoogleAutocompleteService=function(){return this.googleAutocompleteService||(this.googleAutocompleteService=new google.maps.places.AutocompleteService),this.googleAutocompleteService},u.prototype.handlePredictionsResponse=function(e,t,i,o,n){var a=[];if(t===google.maps.places.PlacesServiceStatus.OK){if(e)for(var r=Math.min(u.MAX_RESULTS,e.length),s=0;s<r;s++)a.push(u.getSuggestionResult(e[s],s))}else(new g.CollectorTransport).log(new p.AddressAutocompleteFailureMetric(i.lob,i.domElementId,i.srchText,google.maps.places.PlacesServiceStatus[t],i.activeEssTests));a&&a.length&&a.push(this.getPoweredByGoogleListItem());var l={query:i.srchText,results:a},c=u.mergeResponsesFromGoogleEss(l,o);n.resolve(c)},u.prototype.getPoweredByGoogleListItem=function(){return new o.LabelTypeListItem("<div class='powered_by_google' style='text-align:right;position:relative;top:0.5em;'><img src='"+i.POWERED_BY_GOOGLE_LOGO+"'/></div>","GOOGLEMAPS")},u.MAX_RESULTS=5,u}();t.GoogleMapsDataProvider=d});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/google/GoogleMapsSuggestion",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getSourceName=function(){return o.Optional.of(this.data.sourceName)},t.prototype.getSourceId=function(){return o.Optional.of(this.data.sourceId)},t.prototype.shouldTriggerDomElementChangeOnSelection=function(){return!0},t.prototype.isAddrAutoComplete=function(){return!0},t}(i.Suggestion);t.GoogleMapsSuggestion=n}),define("typeahead/core/google/PoweredByGoogleLogo",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.POWERED_BY_GOOGLE_LOGO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAASCAYAAAC0PldrAAAIHElEQVR4Ae3ZBXDbWB7H8efglpmZGW0HlhzJDpSZmZkZ3W3s2DpmZmbmKx0zM/NdoGhotxTf9x9LHY027paW85v5bBRQopn32weqasqzk5Jw7BE9nHijHo5/Rw/HfqaHYl/keldZ8GJ7qBeqZ/6PNGlPUT5DeVKNqkyc18PJ6VDPtfEfnvUJz0dmpbwfmzMW6k5YFy96pBRTkCnL4MUDiy94oS0F+ZVZlD/5qxLLfNFkz0D0fBtfKOkpCcffrFfG6vVQ4hDUc6ypQLdDFmMdMiWIcjywaOHEB8zynPEFa1pCOWnHLw2Bej5oKtDzqEC+cGyoWZ5YaTDeGer57r4LRPLRCi40liy0QR4eVB5CG2QhU3KQneG+TM/qQhvk424L1Bwt73P22d9QoFD8bVB3KxVUWTX+gqW1mvvLtbr7Z7V+z6frNM/UlFIuKAD83I2v5y69eiL3y9dPZP/s2tdyPn39ZN7UVEq5oCz8x+WvjC/SQrEv8/u/z/O9siSUKNfC8agWSbrRaIH+p3lH1Pg976jxe38gz8JzzLM/g2QhpmIuIjCwB/0cg6HjGAxEsQQtIZmCtbBnLbY4BngZptkGaQmiMHAUhbCyEJMxCxGsh6QFltruOwIv7BmEfTAQwWwsvYMCTcMqGKat6AJJCXYjD1ZcWIdZsEdK8K50gZLroez4+l4G8j1PURlfAJWaMye7Vvd+otbvTVVr7hvVmvc/ci0YyNdAidTHVPa1EzmfuH4iN0WBbnD9H7lu8PXc10CJYDCVxanvffI8nAZvloQTNenZMXYt/YyJ5Y3tgar9nkCt5n2y4Tl073+5TprPEIYSknW2ARpkWosQOkFSiijK0BtuHME2ZGMMDLSDpBMMU29bYaIYBxfW4wBGojcmw8BIWM8Vwjq40QMubMR+231TYGAYJN1QhVUYgEHYgMgdFCiCBeiLYdiJI2iO9og6St4XBgZnKpAWjm2AsmNZO+E8jdlnqzrdvS49aO4fndWLekDVlbmHMoB/MQewAorCrDML86P6E816QD35lbyhzER/SZcouwJKq0oskd9PSX9aVnm5F1RJVbKQr13IVKCU251b7Xf/WwpcqxfMkVnngm9MW+sZ6gJeD24N1BHkwUouDmI28hDGBNjTDwZGIR9hFEOiYyu2YRIkY1GFhzAABvrCnpVYbyvQAeTAyiBHKa2sNUnmY5/jvnwcvYMCbXDMmG1QBR2SJdhu+5l52NXYMsqA7EsXI/5OKBvEhnMKK7LwtePpgYy9HIpB+lbDIGmFbihLTcAzs6FAuueDUJTkW0hdO5XrhrJc/1reTPk6BfsgZMY7iZS/KumFsmihxIFMBaoNeHxmiT/6H5+7Y41esJcl7K/pmdD9N64n4tZALYQzs7EDvTMMmgtBW7GWYyUk26DDj/1wYYHt+z7bUhixMXDMVqDFznG5zX1HIdmDGbDnTvdAGpzZhGWO/2n6ojnCKIIzDNClwQ1LRmU8ETCS3aEysU5r7FHmQckAyUD9sWJgPpSlNlA4SL7O0vJNqGtfz/6bFKX+SyofyvLk1/IGNcxAX8v9JpS8QpDfX/Ha+nwoC8vplIwFYq/TUFbN+w9Zxqr93vpq3fOFWn/BJFlioYQ1UEvgzHxsRQ8Y6NdIgY6jDBI3wugGA53QxVa+IAogeQwR9EB3h27IVGwfqjLc1xWSnZgNZ5bdQYECcGabrcgubMUCPIZjtztQWPsOZpjvPRq52A7KSatKTpV3QfxcXenL61tASUFk8M7q7gIoiywl6UF1fwBKCmLONAVQlhsn8+aYX/8AVEll4pQ8h7x7grLIRj9TgWo0z8Ppsnqv1eqeyP98hX2hZClrrEDH0QpWWuIYJiMbQcx1TNWjYWCQbY8TwQbshJXdWI+obdPdEwbGwJ7ipylQH2vZdN5nK9AMHEVzx1JUeQcF2uVY+rojimJYGY8q7MdEZIy8MGTwfmHuhf5JkTbJex/fyxJdtcpLDzNob5JNrbn/mQMl2ECvNpeKn1sDV6MVjGEz/U9zWSmFYuO82tzr/PzK6fy+UFdP5o6hNP9M742ySyFL1VJrDxSIXu4NJUunvAXPVCApCfufP5p7rg1y2pMZkeswX/u+zIawF0jtwyOmvThiK5UXBhbDgwkIY7mjVKthoBRWymE0MngLbXsrN+bbS5WhQC4sRggVjvtGQ9IWQexGMR7BfjxxBwV6AptRgBIcxU7kwkoODiOCtrhtZOZhkD52m3/KiFGs+VCAdYT3fsicAer5WIcU4DGghPzcta/nfKjhFPa13HrUybW5fBlQQk5hWmXi/fL3rNnuTk5hdX6Pl79/wTwNXrJOYbIXOh9w98atgVqAx7EPx7AUHWDPSGy2la0MOY38zCp0gZWuWNXIbJONAPYhhK0YDSsTocGZbJRmuM9KJ6zAceyHD489zYyxCGMwGYdts24LOLMWi3DHkQ0sg/QqWU5KwvEf4HPMDHseDcc6QTnJUiH7EGajz8g7GPYiH2EWKoOyk/c9vAeax6zzGcryAz5+5PrJ7DIoO37QxTufhRT0C+zLvst11FrC5JQG5f7IrJd5Pjzzx56Pzh4CJc76CnryHugVPMe3OcqfYTkLymkMCpk30RnTlG62jfQLIr5gKkf+wVY29lAWWULTM2HsMah70VSgu888bIULL4hw2pqRPhEmfiMbadmbyWzE/utqSSj2nznBVB7UvWgq0N2lLSIYhxdOWL5k+Xzq/it2mdcGAah7ZV00eQlgxvFRpNfJeyc+Bn2RK32h7sf/AesqcHB02e65AAAAAElFTkSuQmCC"}),define("typeahead/core/logging/CollectorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.prototype.log=function(e){this.sendLog(e,"typeahead_client_metrics")},e.prototype.logPerformanceMetric=function(e){this.sendLog(e,"typeahead_performance")},e.prototype.sendLog=function(e,t){var i=!0;Array.isArray(e)||(i=!1);var o="//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+"/cl/data/"+t+".json?stream=true&persist=true&batch="+(i?"true":"false");$.ajax({contentType:"application/json; charset=UTF-8",url:o,data:JSON.stringify(e),dataType:"json",type:"POST"})},e}();t.CollectorTransport=i}),define("typeahead/core/logging/DctkClientLogErrorTransport",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(r,e,s,l){"use strict";e.__esModule=!0;var t=function(){function e(){}return e.prototype.log=function(i,o,e,n){var a=this;void 0===n&&(n={});try{if("object"!=typeof n){var t=n;(n={}).additional_info=t}o&&(n.severity=l.Severity[o]),e&&(n.problemOrigin=s.ProblemOrigin[e]),this.clientLogger?this.doClientLogging(i,o,n):r(["dctk/clientLogging","dctk/dctk"],function(e,t){a.clientLogger=e,a.doClientLogging(i,o,n)})}catch(i){}},e.prototype.doClientLogging=function(e,t,i){this.clientLogger?l.Severity.MustFix===t?this.clientLogger.logError("UniversalTypeahead",e,i):(e&&(i.message=e.message,i.name=e.name,i.stack=e.stack),this.clientLogger.logMessage("UniversalTypeahead",i)):console.error(e)},e}();e.DctkClientLogErrorTransport=t}),define("typeahead/core/logging/Element",["require","exports","typeahead/core/Suggestion","typeahead/core/util/Optional","typeahead/core/IListItem"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=function(){function e(e){void 0===e&&(e=""),this.domElementId=e,this.value="",this.mostRecentSelection=o.Optional.empty(),this.mostRecentInputValue="",this.essSuggestionCount=0,this.userHistorySuggestionCount=0,this.elementFocused=!1,this.suggestionShown=!1,this.suggestionSelected=!1,e&&(this.value=$("#"+e).val()||"",this.elementID=e)}return e.prototype.setElementFocused=function(){this.elementFocused=!0},e.prototype.setSuggestionShown=function(e){this.suggestionShown=!0,e&&e.length&&"POPULAR"===e[0].category||this.setSuggestionCount(e)},e.prototype.setSuggestionSelected=function(e){this.suggestionSelected=!0,this.mostRecentSelection=o.Optional.of(e),this.value=e.getDisplayText()},e.prototype.setMostRecentInputValue=function(e){this.suggestionSelected=!1,this.mostRecentInputValue=e,this.mostRecentSelection=o.Optional.empty(),this.value=e},e.prototype.isSuggestionShown=function(){return this.suggestionShown},e.prototype.isSuggestionSelected=function(){return this.suggestionSelected},e.prototype.getMostRecentInputValue=function(){return this.mostRecentInputValue},e.prototype.getEssSuggestionCount=function(){return this.essSuggestionCount},e.prototype.getUserHistorySuggestionCount=function(){return this.userHistorySuggestionCount},e.prototype.getMostRecentSelection=function(){return this.mostRecentSelection},e.prototype.getVal=function(){return this.value},e.prototype.getElemId=function(){return this.elementID},e.prototype.setSuggestionCount=function(e){var t=this;this.userHistorySuggestionCount=0,this.essSuggestionCount=0,e&&e.forEach(function(e){if(n.ListItemType.Label!==e.listItemType)switch(e.category){case i.SuggestionCategory[i.SuggestionCategory.USERHISTORY]:t.userHistorySuggestionCount++;break;case i.SuggestionCategory[i.SuggestionCategory.GEOLOCATION]:case i.SuggestionCategory[i.SuggestionCategory.GOOGLEMAPS]:break;default:t.essSuggestionCount++}})},e}();t.Element=a}),define("typeahead/core/logging/ErrorLogger",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e){this.transport=e}return e.prototype.log=function(e,t,i,o){void 0===o&&(o={});try{this.transport.log(e,t,i,o)}catch(e){}},e}();t.ErrorLogger=i}),define("typeahead/core/logging/ErrorTransport",["require","exports"],function(e,t){"use strict";t.__esModule=!0}),define("typeahead/core/logging/FlightOriginPopulationLogger",["require","exports","typeahead/core/logging/FlightOriginPopulationMetric","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FlightOriginPopulationMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,i,o,n,a,r,s,l,c,u){"use strict";t.__esModule=!0;var p=function(){function e(){var i=this;this.populatedOrigin="",this.submittedOrigin="",this.latitude="",this.longitude="",c.TypeaheadMessage.subscribe(a.FlightOriginPopulationMessage.getTopic(),function(e,t){i.populatedOrigin=t.getPopulatedOrigin(),i.submittedOrigin=t.getPopulatedOrigin(),i.latitude=t.getLatitude(),i.longitude=t.getLongitude()}),c.TypeaheadMessage.subscribe(l.SuggestionSelectedMessage.getTopic(),function(e,t){t.getDomElementId()&&-1!==t.getDomElementId().indexOf("flight-origin")&&(i.submittedOrigin=t.getSuggestion().getLastSearchName().orElse(""))}),c.TypeaheadMessage.subscribe(r.InputValueEditedMessage.getTopic(),function(e,t){t.getDomElementId()&&-1!==t.getDomElementId().indexOf("flight-origin")&&(i.submittedOrigin=t.getNewInputValue())}),c.TypeaheadMessage.subscribe(s.SubmitClickedMessage.getTopic(),function(e,t){u.TypeaheadUtils.getLob()===u.Lob.Flight&&i.emitOriginPopulationMetric()})}return e.prototype.emitOriginPopulationMetric=function(){this.populatedOrigin&&n.default.log(void 0,void 0,o.ProblemOrigin.FlightOriginLogging,new i.FlightOriginPopulationMetric(this.populatedOrigin,this.submittedOrigin,this.latitude,this.longitude))},e}();t.FlightOriginPopulationLogger=p}),define("typeahead/core/logging/FlightOriginPopulationMetric",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(e,t,i,o){this.populatedOrigin=e,this.submittedOrigin=t,this.latitude=i,this.longitude=o,this.type="flightOriginPopulation"};t.FlightOriginPopulationMetric=i}),define("typeahead/core/logging/Leg",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger"],function(e,t,n,a,r,s){"use strict";t.__esModule=!0;var i=function(){function o(){}return o.isOrigin=function(e){return-1<(e=e.toLowerCase()).indexOf("origin")||-1<e.indexOf("from")||-1<e.indexOf("departure")||-1<e.indexOf("drop")},o.isDestination=function(e){return-1<(e=e.toLowerCase()).indexOf("dest")||-1<e.indexOf("to")||-1<e.indexOf("arrival")||-1<e.indexOf("near")||-1<e.indexOf("pick")||0===e.indexOf("location")||-1<e.indexOf("uta-search-input")||-1<e.indexOf("opensearch")},o.prototype.getElement=function(e){var t=o.isOrigin(e),i=o.isDestination(e);if(e){if(t)return this.origin||(this.origin=new n.Element(e)),this.origin;if(i)return this.destination||(this.destination=new n.Element(e)),this.destination}return t||i||s.default.log(new Error("Could not determine origin or destination type for domElementId - "+e),r.Severity.MustFix,a.ProblemOrigin.ClientOfUniversalTypeahead),e?new n.Element(e):new n.Element},o.prototype.getOriginElement=function(){return this.origin?this.origin:this.getElement("origin")},o.prototype.getDestinationElement=function(){return this.destination?this.destination:this.getElement("destination")},o}();t.Leg=i}),define("typeahead/core/logging/OmnitureLogger",["require","exports","typeahead/core/logging/Element","typeahead/core/logging/Leg","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/Suggestion","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,i,o,n,a,r,s,c,u,p,g,d,h,f,y,m,v,S){"use strict";var T,l;t.__esModule=!0,(l=T=t.TrackingDataTriggers||(t.TrackingDataTriggers={})).blur="blur",l.submit="submit";var b=function(){function l(){var i=this;this.rfrrIdPrefix="",this.isAutoSelected=!1,this.resetLoggerState(),f.TypeaheadMessage.subscribe(s.ElementFocusedMessage.getTopic(),function(e,t){i.getElement(t.getDomElementId()).setElementFocused()}),f.TypeaheadMessage.subscribe(h.SuggestionShownMessage.getTopic(),function(e,t){i.getElement(t.getDomElementId()).setSuggestionShown(t.getShownSuggestions()),i.mostRecentElementInteracted=S.Optional.of(i.getElement(t.getDomElementId())),i.activeESSTests=t.getActiveESSTests()}),f.TypeaheadMessage.subscribe(u.InputValueEditedMessage.getTopic(),function(e,t){i.getElement(t.getDomElementId()).setMostRecentInputValue(t.getNewInputValue()),t.getNewInputValue()&&(i.mostRecentElementInteracted=S.Optional.of(i.getElement(t.getDomElementId())))}),f.TypeaheadMessage.subscribe(g.SuggestionAutoSelectedMessage.getTopic(),function(e,t){i.getElement(t.getDomElementId()).setSuggestionSelected(t.getSuggestion()),i.isAutoSelected=!0}),f.TypeaheadMessage.subscribe(d.SuggestionSelectedMessage.getTopic(),function(e,t){i.getElement(t.getDomElementId()).setSuggestionSelected(t.getSuggestion()),i.mostRecentElementInteracted=S.Optional.of(i.getElement(t.getDomElementId()))}),f.TypeaheadMessage.subscribe(p.SubmitClickedMessage.getTopic(),function(e,t){i.rfrrIdPrefix=t.getRfrrIdPrefix()}),f.TypeaheadMessage.subscribe(c.FormSubmittedMessage.getTopic(),function(e,t){i.submitTrackingData(t)}),f.TypeaheadMessage.subscribe(y.UserExitedMessage.getTopic(),function(e,t){t.getDomElementId()&&(i.mostRecentElementInteracted=S.Optional.of(i.getElement(t.getDomElementId()))),i.blurTrackingData(t)})}return l.getLegIndex=function(e){var t=e.replace(/\D/g,"");return t?parseInt(t,10)-1:0},l.getBasicReport=function(e,t,i,o,n,a,r,s){return[l.getLaunchView(a),l.getWizardName(e,a),l.getTab(t),l.getShortLob(t,i,o,n),r,s].filter(Boolean).join("|")},l.getWizardName=function(e,t){var i;if(e)switch(e){case"FLT.SR|UpdateSearch":case"HOT.SR|UpdateSearch":case"Open.Search|UpdateSearch":i="UpdateSearch";break;default:i="CoreWzd"}else if(t)switch(t){case"Flights.Search":case"Hotels.Search":i="UpdateSearch";break;default:i="CoreWzd"}return i},l.getShortLob=function(e,t,i,o){switch(e){case v.Lob.Flight:switch(t){case v.FlightType.OneWay:return"F.OW";case v.FlightType.RoundTrip:return"F.RT";case v.FlightType.MultiDestination:return"F.MD";default:return"-"}case v.Lob.Hotel:return"H";case v.Lob.VacationRental:return"VR";case v.Lob.Package:switch(i){case v.PackageType.FlightHotelCar:return"FHC";case v.PackageType.HotelCar:return"HC";case v.PackageType.FlightCar:return"FC";case v.PackageType.FlightHotel:return"FH";default:return"-"}case v.Lob.Activity:return"LX";case v.Lob.Rail:switch(o){case v.RailType.OneWay:return"R.OW";case v.RailType.RoundTrip:return"R.RT";default:return"-"}case v.Lob.Cruise:return"CR";case v.Lob.Car:return"C";case v.Lob.OpenSearch:return"OS";default:return"-"}},l.getLaunchView=function(e){return-1<(e=e.toLowerCase()).indexOf("home")?"Home":-1<e.indexOf("flight")?"FLT":-1<e.indexOf("hotels.search")?"HOT.SR":-1<e.indexOf("hotel")?"HTL":-1<e.indexOf("vacationrental")?"VR":-1<e.indexOf("pack")?"PKG":-1<e.indexOf("car")?"CAR":-1<e.indexOf("cru")?"CRU":-1<e.indexOf("lx")?"LX":-1<e.indexOf("rail")?"RAIL":-1<e.indexOf("open")?"OPEN":e},l.getTab=function(e){switch(e){case v.Lob.Flight:return"Flights";case v.Lob.Hotel:return"Hotels";case v.Lob.Package:return"Package";case v.Lob.Car:return"Car";case v.Lob.Cruise:return"Cruise";case v.Lob.Activity:return"Activity";case v.Lob.Rail:return"Rails";case v.Lob.VacationRental:return"VacationRental";case v.Lob.OpenSearch:return"OpenSearch";default:return"Unknown"}},l.getSuggestionInfo=function(e){var t=e.getSearchedRegion(),i=e.getSelectedRegion();return t===i&&(i="-"),e.getSourceName().orElse("-")+":"+t+"|"+e.getType().orElse("-")+"|R#"+e.getRelationInfo().orElse("-")+"|"+i+"|"+e.getRegionNames().orElse(l.emptyRegionNames).lastSearchName+(l.isSuggestionInCategory(e,m.SuggestionCategory.USERHISTORY)?"|"+m.SuggestionCategory[m.SuggestionCategory.USERHISTORY]:"")},l.isSuggestionInCategory=function(e,t){return m.SuggestionCategory[t]===e.getCategory().orElse("")},l.getMultiFlightSuggestionInfo=function(e){return e.getSourceName().orElse("-")+":"+e.getSourceId().orElse("-")+"|"+e.getType().orElse("-")},l.prototype.setMostRecentElementInteracted=function(e){this.mostRecentElementInteracted=e},l.prototype.getElement=function(e){var t=l.getLegIndex(e);return this.legs[t]||(this.legs[t]=new o.Leg),this.legs[t].getElement(e)},l.prototype.getEvar48=function(e,t){if(e===v.Lob.Flight&&t===v.FlightType.MultiDestination)return this.getMultiFlightEvar48();var i=this.legs[0].getDestinationElement();return i.getMostRecentSelection().isPresent()?l.getSuggestionInfo(i.getMostRecentSelection().get()):"-:-|-|R#-|-|"+(i.getVal()||"TANoneSelected")},l.prototype.getProp73=function(e,t,i){if(v.Lob.Flight===e&&t===v.FlightType.MultiDestination)return this.getMultiFlightProp73();if(this.isFlightInvolved(e,i)||v.Lob.Car===e||v.Lob.Rail===e){var o="",n=this.legs[0].getOriginElement();if(n.getMostRecentSelection().isPresent())o=l.getSuggestionInfo(n.getMostRecentSelection().get());else o="-:-|-|R#-|-|"+(n.getVal()||"TANoneSelected");return o}return v.Lob.Hotel===e||v.Lob.Activity===e||v.Lob.Package===e&&i===v.PackageType.HotelCar?"-:-|-|R#-|-|OriginNotApplicable":""},l.prototype.getProp74=function(e,t){var i='"'+this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentInputValue()+'"';if(e===v.Lob.Flight&&t===v.FlightType.MultiDestination){for(var o=[],n=[],a=0,r=this.legs;a<r.length;a++){var s=r[a];o.push(s.getOriginElement().getVal()),n.push(s.getDestinationElement().getVal())}i+="."+o.join("#")+"."+n.join("#")}return i},l.prototype.getTypeaheadTrigger=function(){var e="";return this.mostRecentElementInteracted.isPresent()?this.mostRecentElementInteracted.get().isSuggestionShown()?(e="TAShow",this.mostRecentElementInteracted.get().isSuggestionSelected()?this.mostRecentElementInteracted.get().getMostRecentInputValue()?e+=".TASelection":e+=".TAFocus":this.mostRecentElementInteracted.get().getMostRecentInputValue()||!this.mostRecentElementInteracted.get().getVal()?e+=".TANoSelection":e+=".TAPrevSearch"):(e="TANoShow",this.mostRecentElementInteracted.get().getMostRecentInputValue()||(e+=".TAPrevSearch")):e=this.isAutoSelected?"TANoShow.TAAutoSelection":"TANoShow.TAPrevSearch",e},l.prototype.getEventString=function(){if(this.mostRecentElementInteracted.isPresent()&&this.mostRecentElementInteracted.get().isSuggestionShown()){var e=this.mostRecentElementInteracted.get().getMostRecentInputValue(),t="event45";return t=e?"event46="+e.length+","+t:"event46=0,"+t,this.mostRecentElementInteracted.get().getMostRecentSelection().isPresent()&&(t="event44="+this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition()+","+t),t}return""},l.prototype.getHierarchyCode=function(){return this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getHierarchyCode():"DL#-"},l.prototype.getSelectedSuggestionPostion=function(){return this.mostRecentElementInteracted.orElse(l.emptyElement).getMostRecentSelection().isPresent()?this.mostRecentElementInteracted.get().getMostRecentSelection().get().getPosition().toString():"-"},l.prototype.getInstrumentationValue=function(e){return[-1<[v.Lob.Flight,v.Lob.Hotel].indexOf(e)?this.getHierarchyCode():"L#"+this.getSelectedSuggestionPostion(),"ESS#"+this.mostRecentElementInteracted.orElse(l.emptyElement).getEssSuggestionCount()].filter(Boolean).join("|")},l.prototype.getTADetails=function(e,t){var i=[this.getTypeaheadTrigger(),this.getInstrumentationValue(e)];return T.blur===t&&i.push(this.mostRecentElementInteracted.get().getElemId()),i.filter(Boolean).join("|")},l.prototype.getTrackingData=function(e,t,i){var o=v.TypeaheadUtils.getLob(),n=v.TypeaheadUtils.getFlightType(o),a=v.TypeaheadUtils.getRailType(o),r=v.TypeaheadUtils.getPackageType(),s=v.TypeaheadUtils.getClientId();return e||T.blur===i?this.getValidFormTrackingdata(t,o,n,r,a,s,i):this.getInvalidFormTrackingdata(t,o,n,r,a,s)},l.prototype.resetLoggerState=function(){this.mostRecentElementInteracted=S.Optional.empty(),this.legs=[new o.Leg],this.activeESSTests=""},l.prototype.setPreSubmitTrackingData=function(e){this.preSubmitData=e},l.prototype.getPreSubmitTrackingData=function(){return this.preSubmitData},l.prototype.submitTrackingData=function(e){try{var t=e.getContext();if(e.isFormValid()){i=(i=this.getPreSubmitTrackingData())||this.getTrackingData(!0,t,T.submit),v.TypeaheadUtils.submitToOmniture("wizard-submit",i,this.activeESSTests),this.resetLoggerState()}else{var i=this.getTrackingData(!1,t,T.submit);v.TypeaheadUtils.submitToOmniture("wizard-submit",i,null),this.resetLoggerState()}}catch(e){r.default.log(new Error("Error occurred while submitting typeahead tracking data to Omniture"),a.Severity.Excusable,n.ProblemOrigin.UniversalTypeahead,"StackTrace:\n"+e.stack),console.error("Error occurred while submitting typeahead tracking data to Omniture.\nCause:\n"+e.stack)}},l.prototype.blurTrackingData=function(e){var t=e.getContext(),i=v.TypeaheadUtils.getClientId(),o=e.getDomElementId();if(l.blurTrackingApplicableClients[i]&&o){var n=this.getTrackingData(void 0,t,T.blur);v.TypeaheadUtils.submitToOmniture("typeahead-blur",n,null);var a=n.eVar28.substring(0,n.prop16.lastIndexOf("|"));n.eVar28=a,n.prop16=a,this.setPreSubmitTrackingData(n),this.resetLoggerState()}},l.prototype.getValidFormTrackingdata=function(e,t,i,o,n,a,r){this.populateNonInteractedElements();var s=(this.rfrrIdPrefix?this.rfrrIdPrefix+"|"+l.getTab(t)+"|"+l.getShortLob(t,i,o,n)+"|"+e.locale+"|"+e.siteid:l.getBasicReport(this.rfrrIdPrefix,t,i,o,n,a,e.locale,e.siteid))+"|"+this.getTADetails(t,r);return{eVar28:s,eVar48:this.getEvar48(t,i),eventString:this.getEventString(),prop16:s,prop73:this.getProp73(t,i,o),prop74:this.getProp74(t,i)}},l.prototype.getInvalidFormTrackingdata=function(e,t,i,o,n,a){var r,s;this.rfrrIdPrefix?r={eVar28:s=this.rfrrIdPrefix+"|"+l.getShortLob(t,i,o,n)+"|"+e.locale+"|"+e.siteid+"|Form-Invalid",prop16:s}:r={eVar28:s=l.getBasicReport(this.rfrrIdPrefix,t,i,o,n,a,e.locale,e.siteid)+"|Form-Invalid",prop16:s};return r},l.prototype.getMultiFlightEvar48=function(){for(var e="",t=0,i=this.legs;t<i.length;t++){var o=i[t];e+=(o.getDestinationElement().getMostRecentSelection().isPresent()?l.getMultiFlightSuggestionInfo(o.getDestinationElement().getMostRecentSelection().get()):"-:-|-")+"#"}return e.slice(0,-1)},l.prototype.getMultiFlightProp73=function(){for(var e="",t=0,i=this.legs;t<i.length;t++){var o=i[t];e+=(o.getOriginElement().getMostRecentSelection().isPresent()?l.getMultiFlightSuggestionInfo(o.getOriginElement().getMostRecentSelection().get()):"-:-|-")+"#"}return e.slice(0,-1)},l.prototype.populateNonInteractedElements=function(){var o=this;$("input[data-provide=utypeahead]:visible").each(function(e,t){var i=$(t).attr("id");o.getElement(i)})},l.prototype.isFlightInvolved=function(e,t){return v.Lob.Flight===e||v.Lob.Package===e&&(v.PackageType.FlightCar===t||v.PackageType.FlightHotelCar===t||v.PackageType.FlightHotel===t)},l.emptyRegionNames={fullName:"-",lastSearchName:"-"},l.emptyEssId={sourceId:"-",sourceName:"-"},l.blurTrackingApplicableClients={AWSHomepage:!0,"Cars.Search":!0,CarsLandingPage:!0,"Flights.Search":!0,FlightsLandingPage:!0,Homepage:!0,"Hotels.Search":!0,HotelsLandingPage:!0,"LX.Search":!0,LXLandingPage:!0,OpenSearchPage:!0,PackageLandingPage:!0,RailsLandingPage:!0},l.emptyElement=new i.Element,l}();t.OmnitureLogger=b}),define("typeahead/core/logging/PerformanceMetrics",["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils"],function(e,t,r,s){"use strict";t.__esModule=!0;var i=function(){function i(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.METRIC_NAME="UtaPerformanceMetric",this.essErrorCount=0,this.countZeroResultsByException=0}return i.getAdditionalMetric=function(){return{deviceType:s.TypeaheadUtils.getDeviceType(),guid:s.TypeaheadUtils.getGuid(),lob:s.Lob[s.TypeaheadUtils.getLob()],locale:s.TypeaheadUtils.getLocale(),pageId:s.TypeaheadUtils.getPageId(),pointOfSale:s.TypeaheadUtils.getPointOfSale(),siteId:s.TypeaheadUtils.getSiteId(),userAgent:navigator.userAgent}},i.prototype.logRequest=function(e,t,i){var o={inputElementId:t,query:i,timestamp:Date.now(),triggerType:e};this.entries.push({request:o})},i.prototype.logResponse=function(e,t,i,o){var n=this.getRequestMetricEntry(e,t);if(n){var a=Date.now();n.response={inputElementId:e,latency:a-n.request.timestamp,query:t,suggestionCount:i,timestamp:a},!this.activeEssTests&&o&&(this.activeEssTests=o)}},i.prototype.logError=function(e){s.TypeaheadUtils.ZERO_RESULTS_CAUSED_BY_EXCEPTION===e?this.countZeroResultsByException++:s.TypeaheadUtils.isStatusCodeInRange(e,200,299)||this.essErrorCount++},i.prototype.getAggregatedMetric=function(){if(this.entries.length){for(var e={},t=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,i=0;i<t;i++){var o=this.entries[i];o.response&&(e["latency"+i]=o.response.latency)}e.latencyMedian=this.getMedianLatency();var n=this.getWorstLatencyMetric();e.queryWorst=n?this.getWorstLatencyMetric().response.query:void 0,e.latencyWorst=n?this.getWorstLatencyMetric().response.latency:void 0;var a=this.entries[this.entries.length-1];return e.queryLast=a.request.query,e.latencyLast=a.response?a.response.latency:void 0,e.totalTriggers=this.entries.length,e.totalSuccess=this.getSuccessMetrics().length,e.inputElementId=this.entries[0].request.inputElementId,e.lob=s.Lob[s.TypeaheadUtils.getLob()],e.variants=[r.abTest.getActiveClientTests(),this.activeEssTests].filter(Boolean).join("|"),e.name=this.METRIC_NAME,0<this.essErrorCount&&(e.essErrorCount=this.essErrorCount),0<this.countZeroResultsByException&&(e.countZeroResultsByException=this.countZeroResultsByException),e}},i.prototype.getAllEntries=function(){for(var e=[],t=0;t<this.entries.length;t++)e.push($.extend(this.entries[t].request,i.getAdditionalMetric())),this.entries[t].response&&e.push($.extend(this.entries[t].response,i.getAdditionalMetric()));return e},i.prototype.getRequestMetricEntry=function(e,t){for(var i=0;i<this.entries.length;i++){var o=this.entries[i];if(o.request.inputElementId===e&&o.request.query===t&&!o.response)return o}},i.prototype.getWorstLatencyMetric=function(){for(var e=void 0,t=0;t<this.entries.length;t++){var i=this.entries[t];i.response&&(!e||e.response.latency<i.response.latency)&&(e=i)}return e},i.prototype.getMedianLatency=function(){var e=void 0,t=this.getSuccessMetrics();if(t.sort(function(e,t){return e.response.latency-t.response.latency}),t.length){var i=Math.floor(t.length/2);e=t.length%2?t[i].response.latency:(t[i-1].response.latency+t[i].response.latency)/2}return e},i.prototype.getSuccessMetrics=function(){return this.entries.filter(function(e){return e.response})},i}();t.PerformanceMetrics=i}),define("typeahead/core/logging/PerformanceMetricsLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/PerformanceMetrics","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/EssErrorMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionReadyMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage"],function(e,t,i,o,n,a,r,s,l,c,u){"use strict";t.__esModule=!0;var p=function(){function e(){var i=this;this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.metrics=new o.PerformanceMetrics,c.TypeaheadMessage.subscribe(a.ElementFocusedMessage.getTopic(),function(e,t){i.metrics.logRequest(i.TRIGGER_TYPE_FOCUS,t.getDomElementId(),"")}),c.TypeaheadMessage.subscribe(s.InputValueEditedMessage.getTopic(),function(e,t){""!==t.getNewInputValue()&&i.metrics.logRequest(i.TRIGGER_TYPE_INPUT,t.getDomElementId(),t.getNewInputValue())}),c.TypeaheadMessage.subscribe(l.SuggestionReadyMessage.getTopic(),function(e,t){i.metrics.logResponse(t.getDomElementId(),t.getQuery(),t.getSuggestions()?t.getSuggestions().length:0,t.getActiveEssTests())}),c.TypeaheadMessage.subscribe(r.EssErrorMessage.getTopic(),function(e,t){i.metrics.logError(t.getStatusCode())}),c.TypeaheadMessage.subscribe(u.UserExitedMessage.getTopic(),function(){i.emitMetrics()})}return e.prototype.resetLogger=function(){this.metrics=new o.PerformanceMetrics},e.prototype.emitMetrics=function(){this.emitToSplunk(),this.emitToCollector(),this.resetLogger()},e.prototype.emitToSplunk=function(){var e=this.metrics.getAggregatedMetric();e&&n.default.log(void 0,void 0,void 0,e)},e.prototype.emitToCollector=function(){var e=this.metrics.getAllEntries();e&&e.length&&(new i.CollectorTransport).logPerformanceMetric(e)},e}();t.PerformanceMetricsLogger=p}),define("typeahead/core/logging/ProblemOrigin",["require","exports"],function(e,t){"use strict";var i;t.__esModule=!0,(i=t.ProblemOrigin||(t.ProblemOrigin={}))[i.Unspecified=0]="Unspecified",i[i.ExpediaSuggestService=1]="ExpediaSuggestService",i[i.UniversalTypeahead=2]="UniversalTypeahead",i[i.ClientOfUniversalTypeahead=3]="ClientOfUniversalTypeahead",i[i.DataCaptureToolkit=4]="DataCaptureToolkit",i[i.TypeaheadInteractionMetric=5]="TypeaheadInteractionMetric",i[i.FlightOriginLogging=6]="FlightOriginLogging"}),define("typeahead/core/logging/ScanabilityLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/ScanabilityMetric","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,o,n,a,r){"use strict";t.__esModule=!0;var s=function(){function e(){var i=this;this.activeESSTests="",r.TypeaheadMessage.subscribe(a.SuggestionShownMessage.getTopic(),function(e,t){i.domElementId=t.getDomElementId(),i.lob=t.getLob(),i.activeESSTests=t.getActiveESSTests(),i.suggestionShownTimestamp=Date.now()}),r.TypeaheadMessage.subscribe(n.SuggestionSelectedMessage.getTopic(),function(e,t){i.domElementId&&(i.selectionMethod=t.getSelectionMethod(),i.suggestionSelectedTimestamp=Date.now(),i.emitScanabilityMetric(),i.domElementId=void 0,i.lob=void 0,i.selectionMethod=void 0,i.suggestionShownTimestamp=0,i.suggestionSelectedTimestamp=0)})}return e.prototype.emitScanabilityMetric=function(){(new i.CollectorTransport).log(new o.ScanabilityMetric(this.lob,this.domElementId,this.suggestionShownTimestamp,this.suggestionSelectedTimestamp,this.selectionMethod,this.activeESSTests))},e}();t.ScanabilityLogger=s});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/logging/ScanabilityMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(s){function e(e,t,i,o,n,a){var r=s.call(this,e,t,"scan",a)||this;return r.latency=o-i,r.selectionMethod=n,r}return __extends(e,s),e}(i.TypeaheadMetric);t.ScanabilityMetric=o}),define("typeahead/core/logging/SelectionToSubmissionLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SelectionToSubmissionMetric","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,o,n,a,r,s){"use strict";t.__esModule=!0;var l=function(){function e(){var i=this;this.activeESSTests="",s.TypeaheadMessage.subscribe(r.SuggestionShownMessage.getTopic(),function(e,t){i.activeESSTests=t.getActiveESSTests()}),s.TypeaheadMessage.subscribe(a.SuggestionSelectedMessage.getTopic(),function(e,t){i.domElementId=t.getDomElementId(),i.lob=t.getLob(),i.suggestionSelectedTimestamp=Date.now()}),s.TypeaheadMessage.subscribe(n.SubmitClickedMessage.getTopic(),function(e,t){i.domElementId&&(i.submitClickedTimestamp=Date.now(),i.emitSelectionToSubmissionMetric(),i.domElementId=void 0,i.lob=void 0,i.suggestionSelectedTimestamp=0,i.submitClickedTimestamp=0)})}return e.prototype.emitSelectionToSubmissionMetric=function(){(new i.CollectorTransport).log(new o.SelectionToSubmissionMetric(this.lob,this.domElementId,this.suggestionSelectedTimestamp,this.submitClickedTimestamp,this.activeESSTests))},e}();t.SelectionToSubmissionLogger=l});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/logging/SelectionToSubmissionMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(r){function e(e,t,i,o,n){var a=r.call(this,e,t,"selectionToSubmission",n)||this;return a.latency=o-i,a}return __extends(e,r),e}(i.TypeaheadMetric);t.SelectionToSubmissionMetric=o}),define("typeahead/core/logging/Severity",["require","exports"],function(e,t){"use strict";var i;t.__esModule=!0,(i=t.Severity||(t.Severity={}))[i.MustFix=0]="MustFix",i[i.Excusable=1]="Excusable",i[i.Negligible=2]="Negligible"}),define("typeahead/core/logging/SuggestionEngagementLogger",["require","exports","typeahead/core/logging/CollectorTransport","typeahead/core/logging/SuggestionEngagementMetric","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils"],function(e,t,i,o,n,a,r,s,l,c,u){"use strict";t.__esModule=!0;var p=function(){function e(){var i=this;this.isSuggestionShown=!1,this.isSuggestionSelected=!1,this.userTypedQuery="",this.displayText="",this.activeESSTests=[],l.TypeaheadMessage.subscribe(n.ElementFocusedMessage.getTopic(),function(e,t){i.lob=t.getContext().lob,i.domElementId=t.getDomElementId(),i.displayText=t.getElementValue()}),l.TypeaheadMessage.subscribe(s.SuggestionShownMessage.getTopic(),function(e,t){i.isSuggestionShown=!0,i.activeESSTests.push(t.getActiveESSTests())}),l.TypeaheadMessage.subscribe(a.InputValueEditedMessage.getTopic(),function(e,t){i.lob=t.getLob(),i.domElementId=t.getDomElementId(),i.isSuggestionSelected=!1,i.userTypedQuery=t.getNewInputValue(),i.displayText=t.getNewInputValue(),i.selectedSuggestion=void 0}),l.TypeaheadMessage.subscribe(r.SuggestionSelectedMessage.getTopic(),function(e,t){i.lob=t.getLob(),i.selectedSuggestion=t.getSuggestion()}),l.TypeaheadMessage.subscribe(c.UserExitedMessage.getTopic(),function(e,t){i.domElementId&&(i.lob="4096"===$("#"+i.domElementId).attr("data-mask")?"DISCOVER":i.lob,i.emitMetric(),i.domElementId=void 0,i.lob=void 0,i.isSuggestionShown=!1,i.isSuggestionSelected=!1,i.userTypedQuery="",i.displayText="",i.selectedSuggestion=void 0,i.activeESSTests=[])})}return e.prototype.updatePackageType=function(){var e=u.TypeaheadUtils.getPackageType();e!==u.PackageType.Unknown&&(this.lob="PACKAGES:"+function(e){switch(e){case u.PackageType.FlightHotelCar:return"FHC";case u.PackageType.HotelCar:return"HC";case u.PackageType.FlightCar:return"FC";case u.PackageType.FlightHotel:return"FH";default:return"-"}}(e))},e.prototype.removeDuplicateESSTests=function(){for(var e=[],t=0,i=this.activeESSTests;t<i.length;t++){var o=i[t];"string"==typeof o&&0<o.length&&(e=e.concat(o.split("|")))}for(e=e.sort().filter(function(e,t,i){return!t||e!==i[t-1]});0===e.indexOf("");)e.shift();this.activeESSTests=e},e.prototype.emitMetric=function(){this.updatePackageType(),this.removeDuplicateESSTests(),(new i.CollectorTransport).log(new o.SuggestionEngagementMetric(this.lob,this.domElementId,this.userTypedQuery,this.displayText,this.isSuggestionShown,this.selectedSuggestion,this.activeESSTests.join("|")))},e}();t.SuggestionEngagementLogger=p});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/logging/SuggestionEngagementMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(l){function e(e,t,i,o,n,a,r){var s=l.call(this,e,t,"SuggestionEngagement",r)||this;return s.suggestionShown=n,s.userTypedQuery=i,a?(s.suggestionSelected=!0,s.text=a.getDisplayText(),s.selectedSuggestionEssid=a.getSourceName().orElse("-")+":"+a.getSourceId().orElse("-"),s.isAddrAutocomplete=a.isAddrAutoComplete()):(s.suggestionSelected=!1,s.text=o,s.selectedSuggestionEssid=void 0),s}return __extends(e,l),e}(i.TypeaheadMetric);t.SuggestionEngagementMetric=o}),define("typeahead/core/logging/TypeaheadErrorLogger",["require","exports","typeahead/core/logging/DctkClientLogErrorTransport","typeahead/core/logging/ErrorLogger"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=new o.ErrorLogger(new i.DctkClientLogErrorTransport);t.default={log:function(e,t,i,o){void 0===o&&(o={}),n.log(e,t,i,o)}}});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/logging/TypeaheadInteractionLogger",["require","exports","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/SuggestionEngagementLogger","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/TypeaheadInteractionMetric"],function(e,t,i,o,n,a){"use strict";t.__esModule=!0;var r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.emitMetric=function(){this.updatePackageType(),this.removeDuplicateESSTests();var e=new a.TypeaheadInteractionMetric(this.lob,this.domElementId,this.userTypedQuery,this.isSuggestionShown,this.selectedSuggestion,this.activeESSTests.join("|"));e=this.cleanUpMetric(e),n.default.log(void 0,void 0,i.ProblemOrigin.TypeaheadInteractionMetric,e)},t.prototype.cleanUpMetric=function(i){var o={};return Object.keys(i).forEach(function(e,t){e&&void 0!==i[e]&&(o[e]=i[e].toString())}),o},t}(o.SuggestionEngagementLogger);t.TypeaheadInteractionLogger=r});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/logging/TypeaheadInteractionMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(s){function e(e,t,i,o,n,a){var r=s.call(this,e,t,"TypeaheadInteraction",a)||this;return r.suggestionShown=o,r.userTypedQuery=i,r.inputLength=i.length,n?(r.suggestionSelected=!0,r.selectionDepth=n.getPosition().toString(),r.isAddrAutocomplete=n.isAddrAutoComplete()):(r.suggestionSelected=!1,r.selectionDepth="undefined",r.isAddrAutocomplete=!1),r}return __extends(e,s),e}(i.TypeaheadMetric);t.TypeaheadInteractionMetric=o}),define("typeahead/core/logging/TypeaheadMetric",["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils"],function(e,t,n,a){"use strict";t.__esModule=!0;var i=function(e,t,i,o){this.contentFlavor="uTA",this.deviceType=a.TypeaheadUtils.getDeviceType(),this.guid=a.TypeaheadUtils.getGuid(),this.lob=e,this.locale=a.TypeaheadUtils.getLocale(),this.pageId=a.TypeaheadUtils.getPageId(),this.pointOfSale=a.TypeaheadUtils.getPointOfSale(),this.siteId=a.TypeaheadUtils.getSiteId(),this.textInputElementId=t,this.timestamp=Date.now(),this.type=i,this.userAgent=navigator.userAgent,this.variants=[n.abTest.getActiveClientTests(),o].filter(Boolean).join("|")};t.TypeaheadMetric=i}),define("typeahead/core/plugins/CompositePageLoadHandler",["require","exports","typeahead/core/context","uitk","typeahead/client/ActivitiesSearchResultsPageHandler","typeahead/client/CarSearchResultsPageHandler","typeahead/client/ClientHandlerRegistry","typeahead/client/FlightSearchResultsPageHandler","typeahead/client/HotelSearchResultsPageHandler","typeahead/client/MercuryWizardHandler","typeahead/client/OpenSearchPageHandler","typeahead/client/UserAccountPageHandler","typeahead/core/plugins/DefaultPluginAssembly","typeahead/core/plugins/ExecutionHelper","typeahead/core/plugins/PrefetchLoader","typeahead/core/TypeaheadUtils"],function(e,r,s,t,i,o,n,l,c,u,p,g,d,h,a,f){"use strict";r.__esModule=!0,r.prefetchInstance=a.PrefetchLoader.getInstance();var y=function(){function a(){}return a.getInstance=function(){return a.instance||(a.instance=new a),a.instance},a.prototype.handlePageLoad=function(t){if(!a.isPageLoadHandled){var e=h.abTest.getAllExperimentsAttribute(t.get(d.DefaultPluginAssembly.experimentIdentifier),"id").join("|"),i={maxresults:10},o={clientId:f.TypeaheadUtils.getClientId(),deviceType:f.TypeaheadUtils.getDeviceType(),expuserid:f.TypeaheadUtils.getExpUserId(),getShortPackageType:function(){},guid:f.TypeaheadUtils.getGuid(),lob:void 0,locale:s.locale,serviceUrl:s.serviceUrl,siteid:s.siteid},n=t.get(d.DefaultPluginAssembly.pageLoadHandlerIdentifier);r.prefetchInstance.prefetch(e).done(function(){r.prefetchInstance.getPrefetchExperiments().done(function(e){h.abTest.evaluateAllExperiments(t,e)})}),n&&0<n.length&&n.map(function(e){e.handlePageLoad(i,o)}),this.registerClients(),a.isPageLoadHandled=!0}},a.prototype.registerClients=function(){n.ClientHandlerRegistry.registerClient(new i.ActivitiesSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new o.CarSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new l.FlightSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new c.HotelSearchResultsPageHandler),n.ClientHandlerRegistry.registerClient(new u.MercuryWizardHandler),n.ClientHandlerRegistry.registerClient(new p.OpenSearchPageHandler),n.ClientHandlerRegistry.registerClient(new g.UserAccountPageHandler),n.ClientHandlerRegistry.handlePageLoad()},a.isPageLoadHandled=!1,a}();r.CompositePageLoadHandler=y}),define("typeahead/core/plugins/DefaultPluginAssembly",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(){this.plugins=[]}return e.prototype.registerPlugin=function(e){var t,i;t=this.plugins,i=e,t.indexOf(i)<0&&t.push(i)},e.prototype.get=function(t){return this.plugins.filter(function(e){return t(e)})},e.requestParamModifierIdentifier=function(e){return"modifyParameters"in e},e.suggestionsModifierIdentifier=function(e){return"modifySuggestions"in e},e.dropDownHideHandler=function(e){return"function"==typeof e.handleDropDownHide},e.dropDownShowHandler=function(e){return"function"==typeof e.handleDropDownShow},e.dropdownContentHandler=function(e){return"function"==typeof e.handleContentToShow},e.onFocusSuggestionsProviderIdentifier=function(e){return"function"==typeof e.suggestOnFocus},e.pageLoadHandlerIdentifier=function(e){return"function"==typeof e.handlePageLoad},e.experimentIdentifier=function(e){return"function"==typeof e.getExperiments},e}();t.DefaultPluginAssembly=o}),define("typeahead/core/plugins/ExecutionHelper",["require","exports","jquery","typeahead/core/ABTest"],function(e,a,r,t){"use strict";a.__esModule=!0;var l={clients:"clientId",deviceTypes:"deviceType",lobs:"lob",locales:"locale",packageTypes:"getShortPackageType",siteids:"siteid",tabs:"tab"};function s(e,t){void 0===t&&(t=a.abTest);var i=t.getAndLog(e);return void 0!==e.value?e.value===i.value:0<i.value}function c(e,t){for(var i,o,n=0;n<t.length;n++){i=t[n];var a=!0;for(var r in i)if("experiment"!==r&&i.hasOwnProperty(r)&&i[r]){var s=(o=r,l.hasOwnProperty(o)?l[o]:null);if(s&&i[r].indexOf(e[s])<0){a=!1;break}}if(a)return i}}a.abTest=new t.ABTest,a.evaluateExperiment=s,a.shouldExecute=function(e,t,i){if(void 0===i&&(i=a.abTest),!t||!t.length||!e)return!0;var o=c(e=function(e){for(var t=r.extend({},e),i=0,o=Object.getOwnPropertyNames(t);i<o.length;i++){var n=o[i];"function"==typeof t[n]&&(t[n]=t[n]())}return t}(e),t);if(o){var n=o.experiment;return!n||s(n,i)}return!1},a.doNotCallThisToGetEvaluatedExperimentInfo=function(e,t,i){void 0===i&&(i=a.abTest);var o=void 0;if(e){var n=c(e,t);n&&(o=i.getAndLog(n.experiment))}return o}}),define("typeahead/core/plugins/PrefetchLoader",["require","exports","typeahead/core/context","typeahead/core/TypeaheadUtils"],function(e,t,l,c){"use strict";t.__esModule=!0;var i=function(){function e(){this.hintsDeferred=$.Deferred(),this.experimentsDeferred=$.Deferred(),this.activeSearchDeferred=$.Deferred(),this.flightOriginSuggestion=$.Deferred()}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.prefetch=function(e){var t=this,i=$.Deferred(),o=(c.TypeaheadUtils.getClientId(),c.TypeaheadUtils.getDeviceType(),c.TypeaheadUtils.getExpUserId()),n=c.TypeaheadUtils.getGuid(),a=l.locale,r=l.serviceUrl+"/api/v4/prefetch/?callback=?&format=jsonp&siteid="+l.siteid+"&locale="+a+"&guid="+n+"&expuserid="+o+"&evalExp="+e,s=c.TypeaheadUtils.getUserLocation();return s&&(r+="&loc="+s),this.makePrefetchRequest(r).done(function(e){t.populatePrefetchData(e)}).always(function(e){return i.resolve(e)}),i.promise()},e.prototype.getPrefetchExperiments=function(){return this.experimentsDeferred.promise()},e.prototype.getPrefetchCarRentalHints=function(){return this.hintsDeferred.promise()},e.prototype.getPrefetchFlightOriginSuggestion=function(){return this.flightOriginSuggestion.promise()},e.prototype.getPrefetchActiveSearch=function(){return this.activeSearchDeferred.promise()},e.prototype.makePrefetchRequest=function(e){var t=$.Deferred(),i={};return $.getJSON(e).done(function(e){t.resolve(e)}).fail(function(){t.reject(i)}),t.promise()},e.prototype.populatePrefetchData=function(e){this.experimentsDeferred.resolve(e.experiments?e.experiments:{}),this.hintsDeferred.resolve(e.carRentalHints?e.carRentalHints:[]),this.activeSearchDeferred.resolve(e.activeSearch?e.activeSearch:{}),this.flightOriginSuggestion.resolve(e.flightOriginSuggestion||null)},e}();t.PrefetchLoader=i}),define("typeahead/core/plugins/SuggestionsProvider",["require","exports","jquery","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,i,o){"use strict";t.__esModule=!0;var n=function(){function e(e){this.suggestionsModifiers=[],this.suggestionsModifiers=e.get(o.DefaultPluginAssembly.suggestionsModifierIdentifier)}return e.prototype.modifySuggestions=function(t,i,o,n){return void 0===o&&(o={}),t&&0<t.length&&this.suggestionsModifiers&&0<this.suggestionsModifiers.length?(this.suggestionsModifiers.map(function(e){return e.modifySuggestions(t,i,o,n)}),t):[]},e}();t.SuggestionsProvider=n}),define("typeahead/core/message/ElementFocusedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.elementValue=e,this.domElementId=i,this.context=t}return e.getTopic=function(){return"typeahead.element_focused"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getContext=function(){return this.context},e}();t.ElementFocusedMessage=i}),define("typeahead/core/message/EssErrorMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e){this.statusCode=e}return e.getTopic=function(){return"typeahead.ess_error"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getStatusCode=function(){return this.statusCode},e}();t.EssErrorMessage=i}),define("typeahead/core/message/FlightOriginPopulationMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.populatedOrigin=e,this.latitude=t,this.longitude=i}return e.getTopic=function(){return"flight_origin_population"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getPopulatedOrigin=function(){return this.populatedOrigin},e.prototype.getLatitude=function(){return this.latitude},e.prototype.getLongitude=function(){return this.longitude},e}();t.FlightOriginPopulationMessage=i}),define("typeahead/core/message/FormLoadedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e){this.tab=e}return e.getTopic=function(){return"typeahead.form_loaded"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getTab=function(){return this.tab},e}();t.FormLoadedMessage=i}),define("typeahead/core/message/FormSubmittedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.formValid=e,this.context=t,this.event=i}return e.getTopic=function(){return"typeahead.form_submitted"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.isFormValid=function(){return this.formValid},e.prototype.getContext=function(){return this.context},e.prototype.getEvent=function(){return this.event},e}();t.FormSubmittedMessage=i}),define("typeahead/core/message/InputClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e){this.$elem=e}return e.getTopic=function(){return"Input cleared"},e.prototype.getTopic=function(){return e.getTopic()},e}();t.InputClearedMessage=i}),define("typeahead/core/message/InputValueEditedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.newInputValue=e,this.domElementId=i,this.lob=t}return e.getTopic=function(){return"typeahead.input_value_edited"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getNewInputValue=function(){return this.newInputValue},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getLob=function(){return this.lob},e}();t.InputValueEditedMessage=i}),define("typeahead/core/message/SubmitClickedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t){this.rfrrIdPrefix=e,this.event=t}return e.getTopic=function(){return"typeahead.submit_clicked"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getRfrrIdPrefix=function(){return this.rfrrIdPrefix},e.prototype.getEvent=function(){return this.event},e}();t.SubmitClickedMessage=i}),define("typeahead/core/message/SuggestionAutoSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t){this.suggestion=e,this.domElementId=t}return e.getTopic=function(){return"typeahead.suggestion_auto_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionAutoSelectedMessage=i}),define("typeahead/core/message/SuggestionListSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.suggestion=e,this.lob=t,this.domElementId=i}return e.getTopic=function(){return"typeahead.suggestionlist_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getLob=function(){return this.lob},e}();t.SuggestionListSelectedMessage=i}),define("typeahead/core/message/SuggestionReadyMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i,o){this.query=e,this.suggestions=t,this.activeEssTests=i,this.domElementId=o}return e.getTopic=function(){return"typeahead.suggestion_ready"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getQuery=function(){return this.query},e.prototype.getSuggestions=function(){return this.suggestions},e.prototype.getActiveEssTests=function(){return this.activeEssTests},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.SuggestionReadyMessage=i}),define("typeahead/core/message/SuggestionSelectedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i,o){this.suggestion=e,this.domElementId=o,this.lob=i,this.selectionMethod=t&&t.type?-1<t.type.indexOf("mouse")?"mouse":-1<t.type.indexOf("key")?"keyboard":-1<t.type.indexOf("touch")?"touch":"unknown":"unknown"}return e.getTopic=function(){return"typeahead.suggestion_selected"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getSuggestion=function(){return this.suggestion},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getSelectionMethod=function(){return this.selectionMethod},e.prototype.getLob=function(){return this.lob},e}();t.SuggestionSelectedMessage=i}),define("typeahead/core/message/SuggestionShownMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i,o,n,a){this.suggestions=e,this.domElementId=a,this.elementValue=t,this.lob=o,this.activeESSTests=i,this.renderTime=n}return e.getTopic=function(){return"typeahead.suggestion_shown"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getShownSuggestions=function(){return this.suggestions},e.prototype.getElementValue=function(){return this.elementValue},e.prototype.getLob=function(){return this.lob},e.prototype.getActiveESSTests=function(){return this.activeESSTests},e.prototype.getRenderTime=function(){return this.renderTime},e}();t.SuggestionShownMessage=i}),define("typeahead/core/message/TypeaheadMessage",["require","exports","uitk"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(){}return e.publish=function(e){i.publish(e.getTopic(),e)},e.subscribe=function(e,t){return i.subscribe(e,t)},e.unsubscribe=function(e,t){return i.unsubscribe(e,t)},e}();t.TypeaheadMessage=o}),define("typeahead/core/message/UserExitedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i){this.context=e,this.domElementId=t,this.triggerEvt=i}return e.getTopic=function(){return"typeahead.user_exited"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getContext=function(){return this.context},e.prototype.getDomElementId=function(){return this.domElementId},e.prototype.getTriggerEvt=function(){return this.triggerEvt},e}();t.UserExitedMessage=i}),define("typeahead/core/presentation/DisplayGroupHandler",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(){}return e.prototype.getResultsByDisplayGroup=function(e){var i=this.getDisplayGroupsPresent(e);return $.each(e,function(e,t){t.displayGroup?i[t.displayGroup.groupName].items.push(t):i.default.items.push(t)}),this.sortDisplayGroupsByDisplayOrder(i)},e.prototype.getDisplayGroupsPresent=function(e){var i={};return $.each(e,function(e,t){t.displayGroup?i[t.displayGroup.groupName]={index:Object.keys(i).length,items:[],label:t.displayGroup.label}:i.default={index:Object.keys(i).length,items:[],label:""}}),i},e.prototype.sortDisplayGroupsByDisplayOrder=function(i){var e=Object.keys(i).sort(function(e,t){return i[e].index-i[t].index}),t=[];return e.forEach(function(e){t.push({groupName:e,items:i[e].items,label:i[e].label})}),t},e}();t.DisplayGroupHandler=i}),define("typeahead/core/presentation/DropDownHideHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(i.DefaultPluginAssembly.dropDownHideHandler)}return e.prototype.runHandlers=function(t,i,o){this.handlers.map(function(e){return e.handleDropDownHide(t,i,o)})},e}();t.DropDownHideHandlersAssembly=o}),define("typeahead/core/presentation/DropDownShowHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(i.DefaultPluginAssembly.dropDownShowHandler)}return e.prototype.runHandlers=function(t,i,o){this.handlers.map(function(e){return e.handleDropDownShow(t,i,o)})},e}();t.DropDownShowHandlersAssembly=o}),define("typeahead/core/presentation/DropdownContentHandlersAssembly",["require","exports","typeahead/core/plugins/DefaultPluginAssembly"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function e(e){this.handlers=e.get(i.DefaultPluginAssembly.dropdownContentHandler)}return e.prototype.runHandlers=function(t,i,o){this.handlers.map(function(e){return e.handleContentToShow(t,i,o)})},e}();t.DropdownContentHandlersAssembly=o}),define("typeahead/features/IDropDownHideHandler",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0}),define("typeahead/features/IDropDownShowHandler",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0}),define("typeahead/features/IDropdownContentHandler",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0}),define("typeahead/core/presentation/IInputElementFocusByHumanOrScriptHandler",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0,t.isInputElementFocusByHumanOrScriptHandler=function(e){return"object"==typeof e&&"function"==typeof e.handleInputElementFocusByHumanOrScript}}),define("typeahead/core/presentation/IInputElementFocusHandler",["require","exports","jquery"],function(e,t,i){"use strict";t.__esModule=!0,t.isInputElementFocusHandler=function(e){return"object"==typeof e&&"function"==typeof e.handleInputElementFocus}}),define("typeahead/core/presentation/SuggestionRendererUtils",["require","exports","typeahead/core/geolocation/GeolocationIcon","typeahead/core/TypeaheadUtils"],function(e,t,g,d){"use strict";t.__esModule=!0;var i=function(){function p(){}return p.getHtml=function(n){function a(){return"flight"===$("li.tab:visible").children("button.on").data("lob")||"Flights.Search"===d.TypeaheadUtils.getClientId()}function e(e){var t,i,o=e;return a()&&(o=n.showAsHierarchy?-1!==(i=(t=e).indexOf("-"))?"(<B>"+t.substring(0,i).replace(/&nbsp;/i,"").trim()+"</B>)"+t.substring(i+1,t.length):t:p.isApAlTagged(e)?p.convertApAlTaggedMainToMultiLineHtml(e):function(e){var t,i,o="",n="",a="",r=e.indexOf("("),s=e.indexOf(")");if(-1!==r&&-1!==s){o=e.substring(0,r);var l=(n=e.substring(r+1,s)).indexOf("-");-1!==l?(t=n.substring(0,l).replace(/&nbsp;/i,"").trim(),i=n.substring(l+1,n.length)):(t=n,i=""),n="(<B>"+t+"</B>)"+i,s+1<e.length&&(a=e.substring(s+1,e.length))}else o=e;return p.createMultiLineHtml(o,a,n)}(e)),o}var t,i,o,r="geolocation"===n.icon?'<span data-tid="typeahead-icon'+n.index+'" class="icon" aria-hidden="true"><img alt="" style="height:1em;width:1em;vertical-align:middle;" src=\''+g.locationIcon+"'/></span>":"none"===n.icon?'<span data-tid="typeahead-icon'+n.index+'" aria-hidden="true"></span>':'<span data-tid="typeahead-icon'+n.index+'" class="icon" aria-hidden="true">                  \n                    <svg class="uitk-icon-svg"'+("trainalt"===n.icon?' style="height:18px;width:18px;margin-left:-4px;margin-top:-10px;top:4px;left:2px"':"")+'>\n                        <use xlink:href="#uitk-icon-'+n.icon+'"/>\n                    </svg>\n                    </span>',s=n.regionNames.displayName;n.showAsHierarchy&&(t=n.regionNames.displayName,(o=(i=n).hierarchyInfo&&i.hierarchyInfo.nearby?i.hierarchyInfo.nearby.locDist:void 0)&&(t=t+" "+o),s=t);var l,c,u=("LX.Checkout"===d.TypeaheadUtils.getClientId()&&"HOTELNOTPRESENT"!==n.type?(n&&n.hotelAddress&&(c=n.hotelAddress.street+", "+n.hotelAddress.city+", "+n.hotelAddress.province),l='<span style="position:relative;bottom:0.6em">'+r+'</span><div style="display:inline-block;">\n            <span class="text">'+e(s)+'</span><span class="text" style=display:block;height:19px;font-size:12px;line-height:1.5;color:#757575;>'+c+"</span></div>"+("LIST"===n.type?p.toggleIconHtml:"")):l=r+'<span class="text">'+e(s)+"</span>"+("LIST"===n.type?p.toggleIconHtml:""),l);return n.showAsHierarchy?'<div class="child-suggestion" style="padding-left:'+("none"===n.icon?"12px":"1.88235em")+'; width: 100%;">'+u+"</div>":u},p.formatApText=function(e,t){if(-1!==e.indexOf(p.apOpenTag)){var i=(e=e.replace(p.apOpenTag+"(","").replace(")"+p.apCloseTag,"")).indexOf("-"),o="",n="";-1!==i?(o=e.substring(0,i).trim(),n=e.substring(i+1,e.length)):(o=e,n=""),e=t?"(<B>"+o+"</B>)"+n:"("+e.replace(o,"<B>"+o+"</B>")+")",e=p.apOpenTag+e+p.apCloseTag}return e},p.convertApAlTaggedMainToMultiLineHtml=function(e){var t=e.indexOf(p.apOpenTag),i=e.indexOf(p.apCloseTag),o=e.indexOf(p.alOpenTag),n=e.indexOf(p.alCloseTag),a=t<o,r=e.substring(0,a?t:o),s="";s=a?e.substring(i+p.apCloseTag.length,o):e.substring(i+p.apCloseTag.length,e.length);var l=e.substring(t,i+p.apCloseTag.length),c=e.substring(o,n+p.alCloseTag.length);return a?this.createMultiLineHtmlWrapped(r+s,this.formatApText(l,!1),this.addAlVariantTwoStyleToTags(c)):this.createMultiLineHtmlWrapped(r+c,s,this.formatApText(l,!0))},p.addAlVariantTwoStyleToTags=function(e){if(this.isAlTagged(e)){e=(e=e.replace("(","").replace(")","")).replace(p.alOpenTag,'<al style="font-weight:bold;font-size:12px;color:black">')}return e},p.isAlTagged=function(e){return-1!==e.indexOf(p.alOpenTag)&&-1!==e.indexOf(p.alCloseTag)},p.isApTagged=function(e){return-1!==e.indexOf(p.apOpenTag)&&-1!==e.indexOf(p.apCloseTag)},p.isApAlTagged=function(e){return this.isApTagged(e)&&this.isAlTagged(e)},p.createMultiLineHtmlWrapped=function(e,t,i){var o="<div class='multiLineDisplay details' style='width:100%'>";return o+=e.trim(),t&&(o+=" "+t.trim()),i&&(o+="<br>"+i.trim()),o+="</div>"},p.createMultiLineHtml=function(e,t,i){var o="<div class='multiLineDisplay'>";return o+=e.trim(),t&&(o+=" "+t.trim()),i&&(o+="<br>"+i.trim()),o+="</div>"},p.alOpenTag="<al>",p.alCloseTag="</al>",p.apOpenTag="<ap>",p.apCloseTag="</ap>",p.toggleIconHtml='<span class="icon" aria-hidden="true" style="float:right;font-size:20px;margin-top:-4px;">\n            <svg class="uitk-icon-svg">\n                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#uitk-icon-toggle90"></use>\n            </svg>\n        </span>',p}();t.SuggestionRendererUtils=i}),define("typeahead/core/presentation/SvgIcons",["require","exports","jquery"],function(e,t,o){"use strict";t.__esModule=!0;var i=function(){function i(){}return i.init=function(){if(!i.initialized){var e=document.createElement("div");e.setAttribute("aria-hidden","true"),e.setAttribute("style","display:none"),e.innerHTML=i.svgSprite,o(function(){document.body.insertBefore(e,document.body.childNodes[0])}),i.initialized=!0;var t=document.createElement("style");t.type="text/css",t.innerHTML=".icon > .uitk-icon-svg \n            {fill:currentcolor;height:1em;width:1em;pointer-events:none;position:relative;top:0.15em;}",document.head.appendChild(t)}},i.initialized=!1,i.svgSprite='\n    <svg xmlns="http://www.w3.org/2000/svg">\n    <symbol id="uitk-icon-location" viewBox="0 0 18 18"><path d="M9 0C5.8 0 3.3 2.6 3.3 5.7V6C3.5 11.5 9 18 9 18s5.5-6.5\n     5.7-11.9v-.3C14.7 2.6 12.2 0 9 0zm0 8.3c-1.4 0-2.6-1.2-2.6-2.6S7.6 3.1 9 3.1s2.6 1.2 2.6 2.6S10.4 8.3 9 8.3z"/>\n    </symbol>\n    <symbol id="uitk-icon-flights" viewBox="0 0 18 18"><path d="M1.2 11.1l2.7.9 3.8-3.8L.1 \n    3.9l1.1-1.1c.1-.1.2-.1.4-.1l8.7 2.8L14.8 1c.6-.6 1.5-.9 2.3-1 .2 0 .5 0 .7.2.2.2.3.4.2.7-.1.7-.4 1.7-1 2.3l-4.5 4.5 \n    2.8 8.7c0 .1 0 .3-.1.4l-1.1 1.1-4.3-7.5L6 14.1l.9 2.7-1.1 1.1-2.3-3.4-3.4-2.3 1.1-1.1z"/></symbol>\n    <symbol id="uitk-icon-hotels" viewBox="0 0 18 18"><path d="M17.7 \n    17.5l-.4-1c-.1-.1-.2-.2-.3-.2h-.8V4.9c0-.2-.2-.4-.4-.4h-3.4V.4c0-.2-.2-.4-.4-.4H2.2c-.2 0-.3.2-.3.4v15.9h-.8c-.1 \n    0-.3.1-.3.2l-.4 1c-.1.1 0 .2 0 .4s.2.1.3.1h16.6c.1 0 \n    .2-.1.3-.2s.1-.2.1-.3zm-11.3-4H4.1v-2.2h2.2v2.2zm0-4.5H4.1V6.8h2.2V9zm0-4.5H4.1V2.2h2.2v2.3zM10.1 \n    16H7.9v-4.8h2.2V16zm0-7H7.9V6.8h2.2V9zm0-4.5H7.9V2.2h2.2v2.3zm3.8 9h-2.2v-2.2h2.2v2.2zm0-4.5h-2.2V6.8h2.2V9z"/>\n    </symbol>\n    <symbol id="uitk-icon-cars" viewBox="0 0 18 18"><path d="M17.8 8.3l-1.5-1.4L14.8 2c0-.2-.2-.3-.4-.3H3.6c-.2 \n    0-.3.1-.4.3L1.6 6.9.2 8.3s-.1.1-.1.2V13c0 .1 0 .2.1.3l.6.6V16c0 .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1h8.9V16c0 \n    .2.2.4.4.4h3c.2 0 .4-.2.4-.4v-2.1l.6-.6c.1-.1.1-.2.1-.3V8.5l-.2-.2zM4.4 3.2h9.3l1.1 3.7H3.3l1.1-3.7zm-.8 8.2c-.8 \n    0-1.5-.7-1.5-1.5 0-.9.7-1.5 1.5-1.5S5 9 5 9.9c0 .8-.6 1.5-1.4 1.5zm10.8 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.6 \n    1.5 1.5c0 .8-.7 1.5-1.5 1.5z"/></symbol>\n    <symbol id="uitk-icon-train" viewBox="0 0 18 18"><path d="M3.8 18l1-2.5h2l-.2 1h5l-.2-1h2l1 2.5H3.8zm9-18c.8 0 1.5.7\n     1.5 1.5v12.1c0 .2-.2.4-.4.4H4.1c-.2 0-.4-.2-.4-.4V1.5C3.8.7 4.4 0 5.2 0h7.6zM6.5 2.6c0 .2.2.4.4.4h4.2c.2 0 \n     .4-.2.4-.4v-.7c0-.2-.2-.4-.4-.4H6.9c-.2 0-.4.2-.4.4v.7zm.8 8.9c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm5.5 \n     0c0-.6-.4-1-1-1s-1 .4-1 1 .4 1 1 1 1-.4 1-1zm0-7H5.3v4.8h7.5V4.5z"/></symbol>\n     <symbol id="uitk-icon-trainalt" viewBox="0 0 18 18"><path d="M10.6 9.9c-.3 \n     0-.6.3-.6.6s.3.6.6.6.6-.3.6-.6-.3-.6-.6-.6zm-3.1 0c-.3 0-.6.3-.6.6s.2.5.6.5c.3 0 \n     .5-.2.5-.6s-.2-.5-.5-.5zm.3-4.4h2.4c.1 0 .2-.1.2-.2v-.4c0-.1-.1-.2-.2-.2H7.8c-.1 0-.2.1-.2.2v.4c0 \n     .2.1.2.2.2zm-.9.9h4.3v2.7H6.9V6.4zM9 .4C4.2.4.4 4.2.4 9s3.9 8.6 8.6 8.6 8.6-3.9 8.6-8.6S13.8.4 9 \n     .4zM6 14.2l.6-1.4h1.2l-.1.6h2.9l-.1-.6h1.2l.6 1.4H6zm6-2.5c0 .1-.1.2-.2.2H6.2c-.1 \n     0-.2-.1-.2-.2v-7c0-.5.4-.9.9-.9h4.3c.5 0 .9.4.9.9l-.1 7z"/></symbol>\n    <symbol id="uitk-icon-notime" viewBox="0 0 18 18"><path d="M17.4 9c0 4-3.2 7.2-7.2 7.2V14c2.8 0 5-2.3 5-5 \n    0-2.8-2.3-5-5-5s-4.9 2.2-5 4.8v.8l.1-.4.9-1c.1-.1.2-.1.3-.1s.2 0 .3.1l1 1c.1.1.1.2.1.3s0 .2-.1.3l-3.6 3.6L.5 \n    9.8c-.1-.1-.1-.2-.1-.3s0-.2.1-.3l1-1c.1-.1.2-.1.3-.1s.2 0 .3.1l.8.9.2.5v-.7c0-4 3.2-7.2 7.2-7.2S17.4 5 17.4 \n    9zm-4.1-.5l-2.4-.2-.2-2.9h-1l-.2 4.3 3.8-.2v-1z"/></symbol>\n    <symbol id="uitk-icon-tag" viewBox="0 0 18 18"><path d="M7.928.111A.376.376 0 0 0 7.661 0H3.434a.37.37 0 0 \n    0-.267.111L.11 3.168a.376.376 0 0 0-.111.267v4.227a.37.37 0 0 0 .111.267l9.961 9.961a.38.38 0 0 0 .535 \n    0l7.284-7.284a.38.38 0 0 0 0-.535L7.928.111zm-3.39 5.942a1.514 1.514 0 1 1 .002-3.028 1.514 1.514 0 0 1-.002 \n    3.028z"/></symbol>\n    <symbol id="uitk-icon-return" viewBox="0 0 18 18"><path d="M18 10.8c0 .1 0 .2-.1.3l-5 4.9c-.2.2-.4.2-.6 \n    0l-1.1-1.1c-.2-.2-.2-.4 0-.6l2-2 .5-.2H.5c-.1 0-.2 0-.3-.1-.1-.1-.1-.2-.1-.3V2.3c0-.1 0-.2.1-.3s.2-.1.3-.1h1.6c.1 0 \n    .2 0 .3.1.1 0 .1.1.1.3v7.3h11.3l-.5-.2-2-2c-.3-.2-.3-.4-.1-.6l1.1-1.1c.2-.2.4-.2.6 0l4.9 4.9c.1 0 .1.1.2.2z"/>\n    </symbol>\n    <symbol id="uitk-icon-close" viewBox="0 0 18 18"><path d="M14.4 \n    5.9c.1-.1.1-.2.1-.3s0-.2-.1-.3l-1.7-1.7c-.2-.2-.4-.2-.6 0L9 6.7 5.9 3.6c-.1-.1-.2-.1-.3-.1-.1 0-.2 0-.3.1L3.6 \n    5.3c-.2.2-.2.4 0 .6L6.7 9l-3.1 3.1c-.1.1-.1.2-.1.3s0 .2.1.3l1.7 1.7c.2.2.4.2.6 0L9 11.3l3.1 3.1c.2.2.4.2.6 \n    0l1.7-1.7c.1-.1.1-.2.1-.3s0-.2-.1-.3L11.3 9l3.1-3.1z"/></symbol>\n    <symbol id="uitk-icon-info" viewBox="0 0 18 18"><path d="M9 .4C4.2.4.4 4.2.4 9s3.9 8.6 8.6 8.6 8.6-3.9 8.6-8.6\n    S13.8.4 9 .4zm1.1 13.9H7.9V7.1h2.2v7.2zm0-8.7H7.9V3.5h2.2v2.1z"/></symbol>\n    <symbol id="uitk-icon-search" viewBox="0 0 18 18"><path d="M10.712.001a7.288 7.288 0 0 0-6.107 11.263L.111 \n    15.758a.378.378 0 0 0 0 .534l1.599 1.599a.378.378 0 0 0 .534 0l4.494-4.494A7.288 7.288 0 1 0 10.713.002l.001.001zm0 \n    11.56c-2.356 0-4.272-1.918-4.272-4.272s1.918-4.272 4.272-4.272 4.272 1.918 4.272 4.272-1.918 4.272-4.272 4.272z"/>\n    </symbol>\n    <symbol id="uitk-icon-toggle90" viewBox="0 0 18 18"><path d="M12.8 8.7c.1.1.1.2.1.3s0 .2-.1.3l-5.5 5.5c-.1.1-.4.1-.5\n     0l-1.6-1.6c-.1-.1-.1-.4 0-.5L8.8 9 5.2 5.3c-.2-.1-.2-.4 0-.5l1.6-1.6c.1-.1.4-.1.5 0l5.5 5.5z"/></symbol>\n     <symbol id="uitk-icon-list" viewBox="0 0 18 18"><path d="M4.5 4.125a.374.374 0 0 1-.375.375H.375A.374.374 0 0 1 0 \n     4.125V.375C0 .167.168 0 .375 0h3.75c.208 0 .375.168.375.375v3.75zM18 .375A.374.374 0 0 0 17.625 0h-10.5a.374.374 0 \n     0 0-.375.375v3.75c0 .208.168.375.375.375h10.5A.374.374 0 0 0 18 4.125V.375zM4.5 7.125a.374.374 0 0 \n     0-.375-.375H.375A.374.374 0 0 0 0 7.125v3.75c0 .208.168.375.375.375h3.75a.374.374 0 0 0 .375-.375v-3.75zm13.5 \n     0a.374.374 0 0 0-.375-.375h-10.5a.374.374 0 0 0-.375.375v3.75c0 .208.168.375.375.375h10.5a.374.374 0 0 0 \n     .375-.375v-3.75zm-13.5 6.75a.374.374 0 0 0-.375-.375H.375a.374.374 0 0 0-.375.375v3.75c0 \n     .208.168.375.375.375h3.75a.374.374 0 0 0 .375-.375v-3.75zm13.5 0a.374.374 0 0 0-.375-.375h-10.5a.374.374 0 0 \n     0-.375.375v3.75c0 .208.168.375.375.375h10.5a.374.374 0 0 0 .375-.375v-3.75z"/></symbol>\n     <symbol id="uitk-icon-tune" viewBox="0 0 24 24"><path d="M3,17V19H9V17H3M3,\n            5V7H13V5H3M13,\n            21V19H21V17H13V15H11V21H13M7,\n            9V11H3V13H7V15H9V9H7M21,\n            13V11H11V13H21M15,\n            9H17V7H21V5H17V3H15V9Z" /></symbol>\n    </svg>',i}();t.SvgIcons=i}),define("typeahead/core/presentation/TypeaheadDropdownBuilder",["require","exports","typeahead/core/presentation/SuggestionRendererUtils"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function a(){}return a.getHtml=function(e){var t=document.createElement("style");t.innerHTML=a.style;var i=document.createElement("ul");if(i.setAttribute("class","results"),i.setAttribute("id",e.ariaOwns),i.setAttribute("role","listbox"),e.resultsByDisplayGroup&&e.resultsByDisplayGroup.length)for(var o=0;o<e.resultsByDisplayGroup.length;o++)i.appendChild(a.getDisplayGroupResultDiv(e.resultsByDisplayGroup[o]));var n=document.createElement("div");return n.appendChild(t),n.appendChild(i),n.appendChild(this.getFooter(e.closeText)),n.innerHTML},a.getFooter=function(e){var t=document.createElement("footer");t.setAttribute("class","footer");var i=document.createElement("a");return i.setAttribute("aria-label",e),i.setAttribute("class","close"),i.setAttribute("href","#"),i.innerHTML=e+'<span class="icon icon-close"></span>',t.appendChild(i),t},a.getDisplayGroupResultDiv=function(e){var t=document.createElement("div");if(t.setAttribute("class","display-group-results"),e.label&&t.appendChild(a.getDisplayGroupLabelListItem(e)),e.items&&e.items.length)for(var i=0;i<e.items.length;i++){var o=e.items[i];o.label&&o.showAsHierarchy&&t.appendChild(a.getLabelListItem(o)),t.appendChild(a.getSuggestionListItem(o))}return t},a.getDisplayGroupLabelListItem=function(e){var t=document.createElement("li");return t.setAttribute("class","display-group-name"),t.setAttribute("role","presentation"),t.setAttribute("tabindex","-1"),t.innerHTML='<div role="option" class="details">'+e.label+"</div>",t},a.getLabelListItem=function(e){var t=document.createElement("li");return t.setAttribute("class","non-results-item"),t.setAttribute("role","presentation"),t.setAttribute("tabindex","-1"),t.innerHTML='\n            <div class="child-suggestion">\n                <span class="child-suggestion-label">'+e.label+"</span>\n            </div>",t},a.getSuggestionListItem=function(e){var t=document.createElement("li");return"LIST"===e.type?t.setAttribute("class","results-item list-item"):t.setAttribute("class","results-item"),t.setAttribute("role","presentation"),e.html?t.innerHTML=e.html:t.appendChild(a.getSuggestionAnchorTag(e)),t},a.getSuggestionAnchorTag=function(e){var t=document.createElement("a");return t.setAttribute("aria-selected","false"),t.setAttribute("class","details"),t.setAttribute("data-id",e.gaiaId),t.setAttribute("data-row",e.index),t.setAttribute("data-type",e.type),t.setAttribute("data-value",e.regionNames.lastSearchName),t.setAttribute("href","#"),t.setAttribute("id","aria-option-"+e.index),t.setAttribute("onclick","return false;"),t.setAttribute("role","option"),t.setAttribute("style",e.style?e.style:""),t.setAttribute("tabindex","-1"),t.innerHTML=i.SuggestionRendererUtils.getHtml(e),t},a.style="       \n        .autocomplete-dropdown .display-group-results:not(:first-of-type) {\n            padding-top: 0.9230769230769231em;\n            border-top: 0.07692307692307693em solid #c7c7c7;\n        }\n        .autocomplete-dropdown .display-group-results:not(:last-of-type) {\n            padding-bottom: 0.9230769230769231em;\n        }\n        .autocomplete-dropdown li.display-group-name {\n            list-style: none;\n            padding: 0 0.92307692em;\n        }\n        .autocomplete-dropdown li.display-group-name div.details {\n            color: #313131;\n            padding: 0.46153846em;\n        }\n        .autocomplete-dropdown li.non-results-item div.child-suggestion {\n            padding-left: 1.88235em;\n        }\n        .autocomplete-dropdown span.child-suggestion-label {\n            padding-left: 1.5em;\n            color: #313131;\n        }\n        .autocomplete-dropdown li.results-item {\n            margin: 0 !important;           \n        }\n        .results-item.list-item {\n            box-shadow: 0 0 3px 0 rgba(0,0,0,0.2) !important;\n            background: white;\n            padding: 0;\n        }\n        .results-item.list-item > a.details {\n            height: 44px;\n            padding-left: 18px;\n            padding-top: 12px;\n        }  \n        .autocomplete-dropdown > footer > a.close.highlight {\n            border: 1px solid #0087f5;   \n            padding-bottom: 5px;\n            padding-top: 5px;\n        }        \n    ",a}();t.TypeaheadDropdownBuilder=o}),define("typeahead/core/util/Functional",["require","exports","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity"],function(e,t,c,u,p){"use strict";t.__esModule=!0,t.mapMethodByName=function(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!Array.isArray(e))return c.default.log(new Error("mapMethodByName expected targets to be in an array, but got "+JSON.stringify(e)),p.Severity.MustFix,u.ProblemOrigin.UniversalTypeahead),[];for(var n=[],a=0,r=e;a<r.length;a++){var s=r[a],l=s[t];if("function"==typeof l)try{n.push(l.apply(s,i))}catch(e){c.default.log(e,p.Severity.MustFix,u.ProblemOrigin.UniversalTypeahead)}else c.default.log(new Error(t+" is not supported by "+JSON.stringify(s)),p.Severity.MustFix,u.ProblemOrigin.UniversalTypeahead)}return n}}),define("typeahead/core/util/Optional",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function t(e){this.value=e}return t.of=function(e){if(t.isEmpty(e))throw"Optional.of() does not accept undefined or null as argument";return new t(e)},t.ofNullable=function(e){return new t(e)},t.empty=function(){return new t(null)},t.isEmpty=function(e){return null==e},t.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("trying to get the value of an empty Optional")},t.prototype.isPresent=function(){return!t.isEmpty(this.value)},t.prototype.orElse=function(e){return this.isPresent()?this.value:e},t}();t.Optional=i});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();define("typeahead/core/geolocation/logging/GeolocationMetric",["require","exports","typeahead/core/logging/TypeaheadMetric"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(l){function e(e,t,i,o,n,a,r){var s=l.call(this,e,t,"GeolocationAsSuggestion",r)||this;return s.position=n,s.positionError=a,s.latency=o-i,s}return __extends(e,l),e}(i.TypeaheadMetric);t.GeolocationMetric=o}),define("typeahead/core/geolocation/logging/GeolocationMetricLogger",["require","exports","typeahead/core/geolocation/logging/GeolocationMetric","typeahead/core/geolocation/message/GeolocationRequestMessage","typeahead/core/geolocation/message/GeolocationResponseMessage","typeahead/core/logging/CollectorTransport","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils"],function(e,t,i,o,n,a,r,s){"use strict";t.__esModule=!0;var l=function(){function e(){var i=this;r.TypeaheadMessage.subscribe(o.GeolocationRequestMessage.getTopic(),function(e,t){i.lob=s.Lob[s.TypeaheadUtils.getLob()],i.domElementId=t.getDomElementId(),i.beginTimestamp=Date.now()}),r.TypeaheadMessage.subscribe(n.GeolocationResponseMessage.getTopic(),function(e,t){i.position=t.getPosition(),i.positionError=t.getPositionError(),i.endTimestamp=Date.now(),i.emitGeolocationMetric()})}return e.prototype.emitGeolocationMetric=function(){(new a.CollectorTransport).log(new i.GeolocationMetric(s.Lob[s.TypeaheadUtils.getLob()],this.domElementId,this.beginTimestamp,this.endTimestamp,this.position,this.positionError,void 0))},e}();t.GeolocationMetricLogger=l}),define("typeahead/core/geolocation/message/GeolocationClearedMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t){this.domElementId=e,this.geolocationResult=t}return e.getTopic=function(){return"typeahead.geolocation_cleared"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.GeolocationClearedMessage=i}),define("typeahead/core/geolocation/message/GeolocationRequestMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e){this.domElementId=e}return e.getTopic=function(){return"typeahead.geolocation_request"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.GeolocationRequestMessage=i}),define("typeahead/core/geolocation/message/GeolocationResponseMessage",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(e,t,i,o,n){void 0===n&&(n=void 0),this.domElementId=e,this.position=t,this.postionError=i,this.geolocationResult=o,this.submitButton=n}return e.getTopic=function(){return"typeahead.geolocation_response"},e.prototype.getTopic=function(){return e.getTopic()},e.prototype.getPosition=function(){return this.position},e.prototype.getPositionError=function(){return this.postionError},e.prototype.getGeolocationResult=function(){return this.geolocationResult},e.prototype.getSubmitButton=function(){return this.submitButton},e.prototype.getDomElementId=function(){return this.domElementId},e}();t.GeolocationResponseMessage=i}),define("typeahead/dataprovider/IClientSideCacheStatusChecker",["require","exports"],function(e,t){"use strict";t.__esModule=!0,t.isClientSideCacheDisabled=function(e){return"object"==typeof e&&"function"==typeof e.isClientSideCacheDisabled}}),define("typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils",["require","exports","typeahead/core/plugins/ExecutionHelper"],function(e,t,a){"use strict";t.__esModule=!0,t.addFeatureFlag=function(e,t,i,o,n){return void 0!==i&&(i.features=i.features&&i.features.length&&i.features.push&&i.features||[],a.shouldExecute(o,t)&&i.features.indexOf(e)<0&&i.features.push(e)),i}}),require(["require","exports","typeahead/core/message/FlightOriginPopulationMessage","typeahead/core/message/FormLoadedMessage","typeahead/core/message/SuggestionAutoSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/SearchParametersUpdater","typeahead/core/StripingConfiguration","typeahead/core/SuggestionFactory","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,s,n,l,c,a,u,p,i,g,d,o){"use strict";t.__esModule=!0;var h=[{clients:["Homepage","FlightsLandingPage"],experiment:{id:25022,name:"ESS_Akamai_Current_Location_Flight"},tabs:["flight"]}],r=function(){function e(){this.SELECTOR="input[data-provide='utypeahead'][data-lob='FLIGHTS'][id^='flight-origin-']"}return e.prototype.handlePageLoad=function(e,i){var o=this;c.TypeaheadMessage.subscribe(n.FormLoadedMessage.getTopic(),function(e,t){i.tab=t.getTab(),a.prefetchInstance.getPrefetchFlightOriginSuggestion().done(function(t){a.prefetchInstance.getPrefetchActiveSearch().done(function(e){o.populateFlightOriginIfApplicable(e,i,t)})})})},e.prototype.getExperiments=function(){return i.getExperiments(h)},e.prototype.populateFlightOriginIfApplicable=function(e,t,i){if(this.isNotActiveSearch(e)&&u.shouldExecute(t,h)&&i.suggestion){var o=g.createSuggestion(i.suggestion),n=o.getLastSearchName().orElse(""),a=$(this.SELECTOR),r=d.TypeaheadUtils.getUserLocation().split("|");n&&a&&0<a.length&&(a.val(n),p.updateForSuggestion(n,o,a.data(),a.attr("id")),c.TypeaheadMessage.publish(new s.FlightOriginPopulationMessage(n,r[0],r[1])),c.TypeaheadMessage.publish(new l.SuggestionAutoSelectedMessage(o,a.attr("id"))))}},e.prototype.isNotActiveSearch=function(e){return e.hasOwnProperty("AIR")&&!0!==e.AIR},e}();o.registerPlugin(new r)}),require(["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,a,o,i,n,r){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","HotelsLandingPage"],tabs:["hotel"]},{clients:["Hotels.Search"],lobs:["HOTELS"]}],l=function(){function e(){}return e.prototype.modifySuggestions=function(n,e,t){return n&&0<n.length&&i.shouldExecute(e,s)&&("focus"===t.renderTrigger?n.forEach(function(e,t){if(e.hierarchyInfo){var i=e.hierarchyInfo.relation;if(i&&"alt"===i[0]){e.showAsHierarchy=!0;var o=n[t-1];o.hierarchyInfo&&o.hierarchyInfo.relation||(e.label=a.altSuggestionLabelText?a.altSuggestionLabelText:"People also search")}}}):"type"===t.renderTrigger&&n.forEach(function(e,t){if(e.hierarchyInfo){var i=e.hierarchyInfo.relation;i&&"alt"===i[0]&&(e.displayGroup={groupName:"altSuggestion",label:a.altSuggestionLabelText?a.altSuggestionLabelText:"People also search"})}})),n},e.prototype.modifyParameters=function(e,t,i){return t.tab=o.ClientHandlerRegistry.getTab(),n.addFeatureFlag("altRegion",s,e,t,i)},e}();r.registerPlugin(new l)});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{lobs:["HOTELS"]}],e.featureName="IncludeHLR",e}return __extends(e,t),e.prototype.modify=function(e,t,i){this.addRegionType(e,256)},e}(o.SuggestServiceParamModifier);n.registerPlugin(new a)});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{clients:["Homepage","HotelsLandingPage"],tabs:["hotel"]},{clients:["Hotels.Search"]}],e.featureName="GoogleAutocomplete",e}return __extends(e,t),e.prototype.modify=function(e,t,i){this.addFeatureFlag(e,"google")},e}(o.SuggestServiceParamModifier);n.registerPlugin(new a)}),require(["require","exports","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,i,o,a,n,r){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","FlightsLandingPage"],deviceTypes:["Desktop"],experiment:{id:26839,name:"typeahead_auto_focus_destination_field_on_origin_selection"},lobs:["FLIGHTS"]}],l=function(){function e(){}return e.prototype.handlePageLoad=function(e,n){o.TypeaheadMessage.subscribe(i.SuggestionSelectedMessage.getTopic(),function(e,t){if(n.lob=t.getLob(),a.shouldExecute(n,s)){var i="#"+t.getDomElementId(),o=$(i).parents("form.gcw-form");"gcw-origin"===$(i).attr("data-gcw-storeable-name")&&setTimeout(function(){o.find("[data-gcw-storeable-name=gcw-destination]").focus()},0)}})},e.prototype.getExperiments=function(){return n.getExperiments([].concat.apply([],s))},e}();r.registerPlugin(new l)}),require(["require","exports","typeahead/core/loc","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,n,a,r,o){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","CarsLandingPage"]}],l=[{clients:["Homepage","AWSHomepage","CarsLandingPage"]},{lobs:["CARS"]}],c=function(){function o(){var i=this;this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.originalPlaceholder=this.$input.attr("placeholder")||"City, airport or address",this.placeholderIndex=-1,this.modifyInputElement=function(e){i.$input=e,n.prefetchInstance.getPrefetchCarRentalHints().done(function(e){var t=e;0===t.length&&(t=i.getCarPlaceholders(r.TypeaheadUtils.getSiteId())),o.placeholders=t,uitk.subscribe("sfSelectedLobs.updated",function(e,t){i.stopCyclePlaceholders(),0!==i.recheckVariant(!0)&&i.startCyclePlaceholders()}),i.startCyclePlaceholders(),i.$input.blur(i.startCyclePlaceholders),i.$input.focus(i.stopCyclePlaceholders)})},this.startCyclePlaceholders=function(){i.stopCyclePlaceholders(),0!==i.getVariant()&&(i.timeoutId=setTimeout(i.cyclePlaceholders,o.initialDelayMillis))},this.stopCyclePlaceholders=function(){void 0!==i.intervalId&&clearInterval(i.intervalId),void 0!==i.timeoutId&&clearTimeout(i.timeoutId),i.placeholderIndex=-1,i.setPlaceholderText(i.originalPlaceholder)},this.cyclePlaceholders=function(){i.intervalId=setInterval(i.setNextPlaceholderText,o.cycleDelayMillis)},this.setPlaceholderText=function(e){i.$input.attr("placeholder",e),uitk.prepFields()},this.setNextPlaceholderText=function(e){i.setPlaceholderText(i.getNextText(e))},this.getNextIndex=function(e){if(void 0===e&&(e=o.placeholders.length),1===i.getVariant()){if(0!==o.placeholders.length)for(e=i.placeholderIndex;e===i.placeholderIndex;)e=Math.floor(Math.random()*(o.placeholders.length+1))}else if(2===i.getVariant()&&(e=i.placeholderIndex+1,i.placeholderIndex>o.placeholders.length))return 0;return e},this.getNextText=function(e){return void 0===e&&(e=i.getNextIndex(),i.placeholderIndex=e),e>=o.placeholders.length?i.originalPlaceholder:o.tryPhrase.replace("{0}",o.placeholders[e])},this.getVariant=function(){return i.recheckVariant(),o.variant}}return o.prototype.handlePageLoad=function(e,t){$(".car-rental-hint-text").data("hint-order","random"),this.$input=$("input[data-provide=utypeahead][data-dest=true][data-lob=CARS]"),this.context=t,o.variant=0,a.shouldExecute(t,s)&&(a.shouldExecute(t,l)&&(o.variant=1),this.modifyInputElement(this.$input))},o.prototype.recheckVariant=function(e){if(void 0===e&&(e=!1),e||void 0===o.variant){if(!a.shouldExecute(this.context,s))return o.variant=0;if(a.shouldExecute(this.context,l))return o.variant=1}return 0},o.prototype.getCarPlaceholders=function(e){var t;switch(e){case"1":t=["Denver Hertz","Miami Budget","LAX","MCO","San Francisco","Boston"];break;case"3":t=["London Europcar","Miami Sixt","LON","DUB","Heathrow","Paris"];break;case"25":t=["Perth Enterprise","Brisbane Avis","MEL","SYD","Cairns","London"];break;case"27":t=["DEL","HYD","Bengaluru","Mumbai"];break;case"63":t=["Dublin Easirent","Sydney Europcar","LAS","DUB","London","Chicago"];break;case"29":t=["Wellington Economy Rent A Car","Queenstown Europcar","AKL","LON","Sydney","Auckland"];break;case"70125":t=["Belfast Sixt","Brisbane Hertz","MEL","SYD","Melborne","Las Vegas"];break;case"70403":t=["Houston Avis","Boston Dollar","LON","DUB","Paris","London"];break;case"70301":t=["Miami Hertz","Denver National Car Rental","LAS","MCO","Orlando","San Jose"];break;case"80001":t=["Tampa Budget","Atlanta Avis","MCO","LAS","Denver","Orlando"];break;case"70201":t=["Denver Hertz","Miami Budget","LAX","MCO","San Francisco","Boston"];break;default:t=[]}return t},o.tryPhrase=i.carPlaceholderCycleTryPhrase||'Try "{0}"',o.initialDelayMillis=1e3,o.cycleDelayMillis=2e3,o}();o.registerPlugin(new c)});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();require(["require","exports","jquery","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=["cars_rental","carsclickpopularity"],r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.configuration=[{lobs:["CARS"]}],e}return __extends(e,t),e.prototype.modify=function(e,t,i){e.maxresults=8,e.sortcriteria="popularity",e.features=e.features&&e.features.length?e.features:[],Array.prototype.push.apply(e.features,a)},e}(o.SuggestServiceParamModifier);n.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,i,o,n,a){"use strict";t.__esModule=!0;var r=[{experiment:{id:24928,name:"UtaTurnOffClientSideCache",value:1}}],s=function(){function e(){}return e.prototype.getExperiments=function(){return n.getExperiments(r)},e.prototype.isClientSideCacheDisabled=function(e){return o.shouldExecute(e,r)},e}();a.registerPlugin(new s)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/GeolocationDataProvider","typeahead/core/geolocation/logging/GeolocationMetricLogger","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/CompositePageLoadHandler","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/SuggestionsAggregator","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,o,n,r,s,l,c,u,p,g,a){"use strict";t.__esModule=!0;var d=[{deviceTypes:["Tablet","Mobile"],tabs:["hotel"]},{clients:["Homepage","AWSHomepage"],deviceTypes:["Desktop"],tabs:["activity"]},{clients:["LXLandingPage"],deviceTypes:["Desktop"]}],h=[{deviceTypes:["Tablet","Mobile"],experiment:{id:15389,name:"uTA_PrepopulateCurrentLocationForMobile",value:1},tabs:["hotel"]}],f=[{clients:["Homepage","AWSHomepage"],deviceTypes:["Tablet","Mobile"],experiment:{id:25348,name:"ess_Current_Location_for_LX_Follow_up",value:1},tabs:["activity"]},{clients:["LXLandingPage"],deviceTypes:["Tablet","Mobile"],experiment:{id:25348,name:"ess_Current_Location_for_LX_Follow_up",value:1}}],y=[d,h,f],m=["Homepage","AWSHomepage","HotelsLandingPage","FlightsLandingPage","PackageLandingPage","LXLandingPage"],v=function(){function a(){}return a.isFirstStepInMultiStepTypeahead=function(){return window.location.search.indexOf("&depth=")<0},a.prototype.handlePageLoad=function(e,i){var o=this;-1<m.indexOf(i.clientId)&&s.TypeaheadMessage.subscribe(r.FormLoadedMessage.getTopic(),function(e,t){c.abTest.getBucketingPromise().done(function(){i.tab=t.getTab(),g.TypeaheadUtils.isWithinMobileBreakpoint()&&(c.shouldExecute(i,[].concat(d,f))||c.shouldExecute(i,f))&&(o.initialize(),o.geolocationViewController&&o.geolocationViewControllerPageloadHandler(i))})})},a.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},a.prototype.suggest=function(e,t){var i=this,o=$.Deferred(),n={id:this.getId(),results:[]};return(c.shouldExecute(t,d)||c.shouldExecute(t,f))&&a.isFirstStepInMultiStepTypeahead()?(this.initialize(),this.geolocationDataProvider.fetchData(e).done(function(e){o.resolve({id:i.getId(),results:e.results})}).fail(function(){o.resolve(n)})):o.resolve(n),o.promise()},a.prototype.getId=function(){return p.SuggesterId.CurrentLocationSuggester},a.prototype.getExperiments=function(){return u.getExperiments([].concat.apply([],y))},a.prototype.initialize=function(){this.geolocationDataProvider||(this.geolocationDataProvider=new o.GeolocationDataProvider,this.geolocationViewController=i.ClientHandlerRegistry.getGeolocationViewController(this.geolocationDataProvider),this.geolocationMetricLogger=new n.GeolocationMetricLogger)},a.prototype.geolocationViewControllerPageloadHandler=function(n){var a=this;l.prefetchInstance.getPrefetchActiveSearch().done(function(e){var t=$("form[data-lob-form="+n.tab+"]").find("input[name=destination]"),i=!!$(t).val(),o=n.tab.toUpperCase();!(!!e.hasOwnProperty(o)&&e[o])&&i&&g.TypeaheadUtils.isWithinMobileBreakpoint()?a.mustPopulateCurrentLocationConfigHelper(!0,n,h):a.handlePageLoadPrefetchHelper(n)}).fail(function(e){a.handlePageLoadPrefetchHelper(n)})},a.prototype.mustPopulateCurrentLocationConfigHelper=function(e,t,i){(i&&c.shouldExecute(t,i)||null===i)&&this.geolocationViewController.handlePageLoad(t,e)},a.prototype.handlePageLoadPrefetchHelper=function(e){g.TypeaheadUtils.isWithinMobileBreakpoint()?this.mustPopulateCurrentLocationConfigHelper(!1,e,f):this.mustPopulateCurrentLocationConfigHelper(!1,e,null)},a}();a.registerPlugin(new v)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,a,o,i,n){"use strict";t.__esModule=!0;var s=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:1}}],r=function(){function r(){this.showHandlers={}}return r.optimizeDropDownGeometry=function(e,t){var i=4+document.body.clientWidth-2*r.baseSpacingHorz,o=4+Math.min(r.maxAvailableMediaWidthPx,i),n=Math.min(o,i),a=t.offset().left-2;i<a+n&&(a=r.baseSpacingHorz+i-n-2),e.css({left:a+"px","max-width":o+"px",width:n+"px"})},r.prototype.getExperiments=function(){return i.getExperiments(s)},r.prototype.handleDropDownShow=function(e,t,i){o.shouldExecute(i,s)&&this.doHandleDropDownShow(e,t)},r.prototype.handleDropDownHide=function(e,t,i){var o=t.attr("id"),n=o?this.showHandlers[o]:void 0;n&&(a(window).off(r.resizeEventTypes,null,n),delete this.showHandlers[o])},r.prototype.doHandleDropDownShow=function(t,i){var e=function(e){r.optimizeDropDownGeometry(t,i)};e(),a(window).on(r.resizeEventTypes,null,null,e),i.attr("id")&&(this.showHandlers[i.attr("id")]=e)},r.baseSpacingHorz=12,r.maxAvailableMediaWidthPx=770,r.resizeEventTypes="orientationchange resize",r}();n.registerPlugin(new r)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,a,i){"use strict";t.__esModule=!0;var r=[{lobs:["PACKAGES"]}],o=function(){function o(){}return o.prototype.modifySuggestions=function(e,t,i){return e&&0<e.length&&n.shouldExecute(t,r)&&this.isPackageOrigin()&&e.forEach(function(e){"USERHISTORY"===e.category||"LIST"===e.type||a.TypeaheadUtils.isChildSuggestion(e)||(e.icon=o.FLIGHTS_ICON)}),e},o.prototype.isPackageOrigin=function(){return $("input:focus").data("gcw-storeable-name")&&-1<$("input:focus").data("gcw-storeable-name").indexOf(o.ORIGIN_FIELD_TYPE)},o.FLIGHTS_ICON="flights",o.ORIGIN_FIELD_TYPE="origin",o}();i.registerPlugin(new o)}),require(["require","exports","jquery","typeahead/core/message/SuggestionListSelectedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,l,o,c,u,p,i,g,n){"use strict";t.__esModule=!0;var d="28",h=[{clients:["AWSHomepage","Homepage"],experiment:{id:25450,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Hotel"},locales:["ja_JP"],siteids:[d],tabs:["hotel"]},{clients:["HotelsLandingPage"],experiment:{id:25450,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Hotel"},locales:["ja_JP"],packageTypes:[void 0],siteids:[d]},{clients:["AWSHomepage","Homepage"],experiment:{id:25452,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Flights"},locales:["ja_JP"],siteids:[d],tabs:["flight"]},{clients:["FlightsLandingPage"],experiment:{id:25452,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Flights"},locales:["ja_JP"],packageTypes:[void 0],siteids:[d]},{clients:["Homepage","AWSHomepage"],experiment:{id:25453,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Packages"},locales:["ja_JP"],packageTypes:["FH"],siteids:[d],tabs:["package"]},{clients:["PackageLandingPage"],experiment:{id:25453,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_Packages"},locales:["ja_JP"],packageTypes:["FH"],siteids:[d]},{clients:["AWSHomepage","Homepage"],experiment:{id:25451,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_LX"},locales:["ja_JP"],siteids:[d],tabs:["activity"]},{clients:["LXLandingPage"],experiment:{id:25451,name:"ess_Recommendations_of_popular_destinations_at_Focus_jaJP_LX"},locales:["ja_JP"],siteids:[d]}],f=[{clients:["Homepage","AWSHomepage"],experiment:{id:25284,name:"ess_Recommendations_of_popular_destinations_at_Focus"},tabs:["hotel"]},{clients:["HotelsLandingPage"],experiment:{id:25284,name:"ess_Recommendations_of_popular_destinations_at_Focus"},packageTypes:[void 0]},{clients:["Homepage","AWSHomepage"],experiment:{id:25331,name:"Ess_Recommendations_of_popular_destinations_at_Focus_Flights"},tabs:["flight"]},{clients:["FlightsLandingPage"],experiment:{id:25331,name:"Ess_Recommendations_of_popular_destinations_at_Focus_Flights"},packageTypes:[void 0]},{clients:["Homepage","AWSHomepage"],experiment:{id:25332,name:"Ess_Recommendations_of_popular_destinations_at_Focus_Packages"},packageTypes:["FH"],tabs:["package"]},{clients:["HotelsLandingPage","FlightsLandingPage"],experiment:{id:25332,name:"Ess_Recommendations_of_popular_destinations_at_Focus_Packages"},packageTypes:["FH"]},{clients:["PackageLandingPage"],experiment:{id:25332,name:"Ess_Recommendations_of_popular_destinations_at_Focus_Packages"},packageTypes:["FH"]},{clients:["Homepage","AWSHomepage"],experiment:{id:25330,name:"Ess_Recommendations_of_popular_destinations_at_Focus_LX"},tabs:["activity"]},{clients:["LXLandingPage"],experiment:{id:25330,name:"Ess_Recommendations_of_popular_destinations_at_Focus_LX"}}],a=[f,h],r=function(){function s(){}return s.isOpen=function(e){return e.hasClass("typeahead-overlay")},s.addCancelButton=function(e){var t=l.parseHTML(s.cancelButtonHtml).pop();return e.append(t),l(t).off("mousedown").on("mousedown",function(e){e.stopPropagation(),window.history.back()}),l(t).off("click focusin").on("click focusin",function(e){e.stopPropagation()}),t},s.applyFullScreenStyle=function(e){e.addClass("typeahead-overlay"),l("body").addClass("scroll-hidden"),"absolute"===l(".typeahead-overlay span.label").css("position")&&l(".typeahead-overlay span.label").addClass("show")},s.close=function(t,i,o,n){setTimeout(function(){var e=l(t).closest("div.col");l(t).attr("placeholder",i),l("body").removeClass("scroll-hidden"),s.enableOtherInputs(t),l(o).remove(),e.removeClass("typeahead-overlay"),u.TypeaheadMessage.unsubscribe(c.SuggestionSelectedMessage.getTopic(),n),uitk.utils.focusElement(l(t).parent().siblings("button.btn-clear")),window.uitkautocomplete.prototype.closeAllTA(),t.off("mousedown.fullscreentypeahead keydown.fullscreentypeahead keyup.fullscreentypeahead")},0)},s.open=function(i){var o,e=l(i).closest("div.col"),n=l(i).attr("placeholder");if(!s.isOpen(e)){o=Date.now(),history.pushState({placeholder:n},document.title,"?taid="+o+"&tapage=1&next=popular"),s.disableOtherInputs(i);var a=s.addCancelButton(e);s.applyFullScreenStyle(e);var r=u.TypeaheadMessage.subscribe(c.SuggestionSelectedMessage.getTopic(),function(){window.history.go(-parseInt(g.TypeaheadUtils.getURLParameter("tapage"),10))});l(window).off("popstate.typeahead").on("popstate.typeahead",function(e){if(-1<location.search.indexOf("taid="+o)){i.trigger("focus",!0);var t=e.originalEvent;t&&t.state&&t.state.placeholder&&i.attr("placeholder",t.state.placeholder)}else s.close(i,n,a,r),o=0}),l("html, body").animate({scrollTop:0,scrollLeft:0},"slow")}},s.disableOtherInputs=function(e){l(e).closest("form").find("input:visible, select:visible").not(e).attr("disabled","true")},s.enableOtherInputs=function(e){l(e).closest("form").find("input:visible, select:visible").not(e).removeAttr("disabled")},s.shouldExecute=function(e){return e.siteid===d?p.shouldExecute(e,h):p.shouldExecute(e,f)},s.isMultiStep=function(e,t){return!t.srchText&&g.TypeaheadUtils.isWithinMobileBreakpoint()&&this.shouldExecute(e)},s.handleSuggestionListSelection=function(e,t){var i="next="+t.getSuggestion().getNext().orElse(""),o="tapage="+(parseInt(g.TypeaheadUtils.getURLParameter("tapage"),10)+1),n="taid="+g.TypeaheadUtils.getURLParameter("taid");history.pushState({placeholder:t.getSuggestion().getDisplayText()},document.title,"?"+n+"&"+o+"&"+i+"&depth="+t.getSuggestion().getPosition());var a=l("#"+t.getDomElementId());a.attr("placeholder",t.getSuggestion().getDisplayText()),a.trigger("focus",!0)},s.prototype.handlePageLoad=function(e,t){var i=document.createElement("style");i.type="text/css",i.innerHTML=s.css,document.head.appendChild(i),-1<location.search.indexOf("taid=")&&history.pushState(null,document.title,location.pathname),u.TypeaheadMessage.subscribe(o.SuggestionListSelectedMessage.getTopic(),s.handleSuggestionListSelection)},s.prototype.handleInputElementFocusByHumanOrScript=function(e,t){g.TypeaheadUtils.isWithinMobileBreakpoint()&&s.shouldExecute(t)&&(s.open(e),l("div.dropdown-con").css("display","none"),e.on("mousedown.fullscreentypeahead keydown.fullscreentypeahead keyup.fullscreentypeahead",function(){l("div.dropdown-con").css("display","none")}))},s.prototype.modifyParameters=function(e,t,i){if(s.isMultiStep(t,i)){e.next=g.TypeaheadUtils.getURLParameter("next");var o=void 0;t.siteid!==d?o=p.doNotCallThisToGetEvaluatedExperimentInfo(t,f):"ja_JP"===t.locale&&(o=p.doNotCallThisToGetEvaluatedExperimentInfo(t,h)),o&&(e.ab=o.id+"."+o.value);var n=-1<(e.next+"").toLowerCase().indexOf("domestic"),a=-1<(e.next+"").toLowerCase().indexOf("international"),r=l("input:focus").data("gcw-storeable-name")&&-1<l("input:focus").data("gcw-storeable-name").indexOf("origin");"ja_JP"===t.locale&&(n||a)&&(e.maxresults=r&&n?15:18)}return e},s.prototype.modifySuggestions=function(e,t,i){if(s.isMultiStep(t,i)){var o=g.TypeaheadUtils.getURLParameter("depth");e.forEach(function(e){e.parentPosition=o})}return e},s.prototype.getExperiments=function(){return i.getExperiments([].concat.apply([],a))},s.cancelButtonHtml='\n        <button type="button" class="typeahead-overlay-cancel"><span class="uitk-icon">\n        <svg role="img" aria-labelledby="icon-uitk-typeahead-cancel-title" viewBox="0 0 24 24" \n         style="fill:#616161; height:1.4em; width:1.4em;" xmlns="http://www.w3.org/2000/svg">\n        <title id="icon-uitk-typeahead-cancel-title">Cancel</title> \n        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></span></button>',s.css="\n            .typeahead-overlay {\n                background: rgba(245,245,245,1); \n                margin: 0;\n                overflow: hidden !important; \n                padding: 0 !important;\n                position: fixed !important;\n                top: 0; right: 0; bottom: 0; left: 0;\n                transition: top 0.3s;\n                -moz-transition: top 0.3s;\n                -webkit-transition: top 0.3s;                \n                z-index: 99;\n            }\n            \n            .typeahead-overlay-cancel {\n                background-color: white;\n                border:0;\n                height: 52px;\n                margin:0;\n                padding-top: 6px;\n                position: absolute;\n                top: 0;\n                width: 48px;\n            }\n            \n            .typeahead-overlay input {       \n                border: 0 !important;\n                border-radius: 0 !important;   \n                box-shadow: none !important;    \n                height: 52px !important;               \n                padding-left: 48px !important;\n                padding-right: 48px !important;                \n            }\n            \n            .typeahead-overlay label {     \n                box-shadow: 0 2px 0.25rem 0 rgba(0,0,0,0.2) !important;         \n                margin: 0;                \n            }                        \n            \n            .typeahead-overlay button.btn-clear {\n                height: 52px;\n                margin-top: -12px;                \n                right: 0;\n                width: 48px;\n            }                         \n            \n            .typeahead-overlay .autocomplete-open .autocomplete-arrow::after,\n            .typeahead-overlay label span.label, \n            .typeahead-overlay label span.icon {\n                display: none;\n            }   \n            \n            .typeahead-overlay .autocomplete-dropdown {\n                background: none;\n                border: 0;\n                box-shadow: none;\n                height: -moz-calc(100% - 52px);\n                height: -webkit-calc(100% - 52px);\n                height: calc(100% - 52px);\n                left:0 !important;\n                margin: 0;   \n                max-width: 100% !important;\n                overflow:auto;    \n                right: 0 !important;\n                width: 100% !important;                                                          \n            }    \n            \n            .typeahead-overlay a.details { min-height: 32px; }\n            .typeahead-overlay .footer { display: none; }   \n            .typeahead-overlay .autocomplete-open { height: 100%; }            \n            .scroll-hidden { overflow: hidden; position: fixed; }                  \n            .typeahead-overlay .label.show { display: block; left: 48px; }          \n            .typeahead-overlay .btn-clear:disabled { display:none; }   \t\t\n    \t\t.typeahead-overlay input:placeholder-shown { padding-right:18px !important; }            \n            .typeahead-overlay input::-webkit-input-placeholder { font-size: 14px; }\n            .typeahead-overlay input::-moz-placeholder { font-size: 14px; }\n            .typeahead-overlay input:-ms-input-placeholder { font-size: 14px; }\n            .typeahead-overlay input::placeholder { font-size: 14px; } \n            .typeahead-overlay ul.results { padding-top: 2px; }       \n            .typeahead-overlay div.multiLineDisplay { display: inline-block; }                           \n        ",s}();n.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,i,o,n,a,r,s){"use strict";t.__esModule=!0;var l=[{lobs:["HOTELS","FLIGHTS","RAILS","PACKAGES"]}],c=function(){function e(){}return e.prototype.getExperiments=function(){return n.getExperiments(l)},e.prototype.modifyParameters=function(e,t,i){return a.TypeaheadUtils.getPackageType()!==a.PackageType.FlightCar?r.addFeatureFlag("ta_hierarchy",l,e,t,i):e},e.prototype.modifySuggestions=function(e,i,t){return e&&0<e.length&&e.forEach(function(e){if(o.shouldExecute(i,l)){var t=e.relation;0<+e.index&&e.hierarchyInfo&&(t=e.hierarchyInfo.relation),!t||"child"!==t[0]&&"nearby"!==t[0]||(e.showAsHierarchy=!0)}}),e},e}();s.registerPlugin(new c)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,n,i,a,o){"use strict";t.__esModule=!0;var r=[{experiment:{id:25399,name:"ESS_Region_Type_Specific_Icon_for_Hierarchy",value:1},lobs:["HOTELS"]}],s=function(){function e(){}return e.prototype.modifySuggestions=function(e,t,i){if(e&&0<e.length){var o=void 0;e.forEach(function(e){a.TypeaheadUtils.isChildSuggestion(e,i.renderTrigger)&&(void 0===o&&(o=!n.shouldExecute(t,r)),o&&(e.icon="return"))})}return e},e.prototype.getExperiments=function(){return i.getExperiments(r)},e}();o.registerPlugin(new s)}),require(["require","exports","jquery","typeahead/core/loc","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,o,n,a,r){"use strict";t.__esModule=!0;var s=[{lobs:["ACTIVITIES"]}],l=function(){function e(){this.applicableClientIds=["LX.Checkout"],this.applicableTextInputElementIds=["lx-pickup-uta"]}return e.prototype.modifyParameters=function(e,t,i){return-1<this.applicableClientIds.indexOf(a.TypeaheadUtils.getClientId())&&n.shouldExecute(t,s)&&-1<this.applicableTextInputElementIds.indexOf(i.inputElementId)&&(e.rid=i.searchRegionId),e},e}();r.registerPlugin(new l)}),require(["require","exports","jquery","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,p,i,o,g,n){"use strict";t.__esModule=!0;var d=[{clients:["Homepage","HotelsLandingPage","AWSHomepage"],tabs:["hotel"]}],a=function(){function e(){}return e.prototype.handlePageLoad=function(e,c){var u=this;o.TypeaheadMessage.subscribe(i.SubmitClickedMessage.getTopic(),function(e,t){if(c.tab=u.getMercuryWzdTab(),g.shouldExecute(c,d)){var i=p("[data-gcw-storeable-name=gcw-destination]:visible"),o="#"+p(i).attr("data-hotel_id_element"),n="#"+p(i).attr("data-city_element"),a=p(o),r=p(a).val(),s=p(n),l=p(s).val();r&&l?(p(s).attr("name","destination"),p(i).removeAttr("name")):(p(i).attr("name","destination"),p(s).removeAttr("name"))}})},e.prototype.getMercuryWzdTab=function(){return p("li.tab:visible").children("button.on").data("lob")},e}();n.registerPlugin(new a)}),require(["require","exports","jquery","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,n,a,i,r,c,u,p,g,s,l,d,o){"use strict";t.__esModule=!0;var h=[{clients:["Hotels.Search"],experiment:{id:26252,name:"ESS_One_Search_Typeahead_in_HSRP_that_supports_both_regions_and_hotels",value:1}}],f=function(){function o(){}return o.updateQueryParam=function(e,t,i){var o=e,n=t+"="+i,a="?"+n;if(o){var r=new RegExp(t+"[^&]*"),s=new RegExp(t+"=[^&;]+[&;]?");a=null==i||""===i?(a=o.replace(s,"$1")).replace(/[&;]$/,""):null!==o.match(r)?o.replace(r,""+n):o+"&"+n}return a},o.prototype.getExperiments=function(){return s.getExperiments(h)},o.prototype.modifyParameters=function(e,t,i){return-1<o.applicableClientIds.indexOf(l.TypeaheadUtils.getClientId())&&-1<o.applicableTextInputElementIds.indexOf(i.inputElementId)&&g.shouldExecute(t,h)&&(e.rid=i.searchRegionId,e.mask|=128,d.addFeatureFlag("onesearchta",h,e,t)),e},o.prototype.handlePageLoad=function(e,s){var l=this;p.TypeaheadMessage.subscribe(r.ElementFocusedMessage.getTopic(),function(e,t){if(g.shouldExecute(s,h)){var i=t.getDomElementId();n("#"+i).attr("placeholder",a.taOneSearchPlaceholderText)}}),p.TypeaheadMessage.subscribe(c.InputValueEditedMessage.getTopic(),function(e,t){l.clearRegionIdForChangeSearchSelection(),l.clearLatLongForChangeSearchSelection(),l.clearHotelIdForChangeSearchSelection(),n("input[name='searchPriorityOverride']").val("")}),p.TypeaheadMessage.subscribe(u.SuggestionSelectedMessage.getTopic(),function(e,t){var i=t.getSuggestion().getHotelId().orElse(""),o=t.getSuggestion().getRegionId().orElse(""),n=t.getSuggestion().getLatLong().orElse(""),a=t.getSuggestion().getCity().orElse("");if(g.shouldExecute(s,h)){var r=t.getSuggestion().getExtraSearchParams();l.regionId=o,l.latLong=n,i&&(r.orElse([]).forEach(function(e){"searchPriorityOverride"===e.field&&(l.searchPriorityOverride=e.value)}),l.selected=i,l.cityName=a)}else i?l.selected=i:l.clearHotelIdForChangeSearchSelection()}),uitk.subscribe(i.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(e,t){g.shouldExecute(s,h)&&(l.setRegionIdForChangeSearchSelection(t),l.setLatLongForChangeSearchSelection(t),l.selected?l.setSelectedHotelIdForChangeSearchSelection(t):n("input[name='searchPriorityOverride']").val(""))}),uitk.subscribe(i.ClientHandlerRegistry.HSR_SUBMIT_BEFORE_UPDATE_HASH_MESSAGE,function(e,t){if(l.selected){var i=o.updateQueryParam(t.query,"destination",l.cityName);t.query=i}else n("#selected").val()||n("input[name='searchPriorityOverride']").val("")})},o.prototype.setRegionIdForChangeSearchSelection=function(e){var t=this.regionId;t&&(n("#regionId").val(t),e.query&&-1===e.query.indexOf("regionId")&&(e.query+="&regionId="+t))},o.prototype.clearRegionIdForChangeSearchSelection=function(){this.regionId=null,n("#regionId").val("")},o.prototype.setSelectedHotelIdForChangeSearchSelection=function(e){var t=this.selected,i=this.searchPriorityOverride;t&&(n("#selected").val(t),e.query&&-1===e.query.indexOf("selected")&&(e.query+="&selected="+t),e.query&&-1===e.query.indexOf("searchPriorityOverride")&&(e.query+="&searchPriorityOverride="+i))},o.prototype.clearHotelIdForChangeSearchSelection=function(){this.selected=null,n("#selected").val(""),this.searchPriorityOverride=null,n("input[name='searchPriorityOverride']").val(""),this.cityName=null},o.prototype.setLatLongForChangeSearchSelection=function(e){var t=this.latLong;t&&(n("#latLong").val(t),e.query&&-1===e.query.indexOf("latLong")&&(e.query+="&latLong="+t))},o.prototype.clearLatLongForChangeSearchSelection=function(){this.latLong=null,n("#latLong").val("")},o.applicableClientIds=["Hotels.Search"],o.applicableTextInputElementIds=["inpSearchNear"],o.inputPromptElementId="oneSearchTypeaheadPrompt",o}();o.registerPlugin(new f)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,n,o,a,r){"use strict";t.__esModule=!0;var s=[{tabs:["flight"]}],l=[{tabs:["car"]}],c=[s,l],u=function(){function e(){}return e.prototype.getExperiments=function(){return o.getExperiments([].concat.apply([],c))},e.prototype.modifySuggestions=function(e,t,i){var o="";return a.TypeaheadUtils.isWithinMobileBreakpoint()&&e&&0<e.length&&(n.shouldExecute(t,s)&&(o="1.077"),n.shouldExecute(t,l)&&(o="1.231"),""!==o&&e.forEach(function(e){e.style="font-size:"+o+"em"})),e},e}();r.registerPlugin(new u)}),require(["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,o,n,a,r,s,l,c,i){"use strict";t.__esModule=!0;var u=[{clients:["Homepage","AWSHomepage"],tabs:["activity"]},{clients:["LXLandingPage"]}],p=function(){function e(){}return e.prototype.modifyParameters=function(e,t,i){return t.tab=n.ClientHandlerRegistry.getTab(),c.addFeatureFlag("lxcategory",u,e,t,i)},e.prototype.modifySuggestions=function(e,t,i){return e&&0<e.length&&l.shouldExecute(t,u)&&e.forEach(function(e){if(e.hierarchyInfo){var t=e.hierarchyInfo.relation;t&&"lxcategory"===t[0]&&(e.showAsHierarchy=!0)}}),e},e.prototype.handlePageLoad=function(e,i){s.TypeaheadMessage.subscribe(r.SuggestionSelectedMessage.getTopic(),function(e,t){(i.tab=n.ClientHandlerRegistry.getTab(),l.shouldExecute(i,u))&&t.getSuggestion().getExtraSearchParams().orElse([]).forEach(function(e){var t=document.createElement("INPUT");t.setAttribute("type","hidden"),t.setAttribute("class","uta-search-parameter"),t.setAttribute("name",e.field),t.setAttribute("value",e.value),o("div.tabs-container").find("form:visible").append(t)})}),s.TypeaheadMessage.subscribe(a.InputValueEditedMessage.getTopic(),function(e,t){l.shouldExecute(i,u)&&o("input.uta-search-parameter").remove()})},e}();i.registerPlugin(new p)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,a,i,o){"use strict";t.__esModule=!0;var r=[{lobs:["HOTELS"]},{clients:["Homepage","HotelsLandingPage","Hotels.Search"]}],n=function(){function n(){}return n.isClarifyStationExperimentBucketedVariantTwo=function(e){return"2"===i.TypeaheadUtils.getEssAbTestVariant("25379",e)},n.prototype.modifySuggestions=function(e,t,i,o){return a.shouldExecute(t,r)&&n.isClarifyStationExperimentBucketedVariantTwo(o)&&e.forEach(function(e){"METROSTATION"===e.type&&(e.icon="trainalt")}),e},n}();o.registerPlugin(new n)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,i,o,n,a,r){"use strict";t.__esModule=!0;var s=[{deviceTypes:["Desktop"],experiment:{id:25163,name:"ess_nlp_typeahead_suggestion",value:1},lobs:["HOTELS"]}],l=function(){function e(){this.applicableLocales=["en_AU","en_CA","en_GB","en_HK","en_IE","en_MY","en_NZ","en_PH","en_SG","en_US"]}return e.prototype.getExperiments=function(){return o.getExperiments(s)},e.prototype.modifyParameters=function(e,t,i){return this.checkLogExposureConditions(t,i)&&a.addFeatureFlag("nlpta",s,e,t),e},e.prototype.modifySuggestions=function(e,t,i){return this.checkLogExposureConditions(t,i)&&"type"===i.renderTrigger&&e.forEach(function(e,t){"GOOGLEMAPS"===e.category&&(e.displayGroup={groupName:"GoogleSuggestion",label:""}),e.hierarchyInfo&&e.hierarchyInfo.relation&&"hotelfilter"===e.hierarchyInfo.relation[0]&&(e.icon="tune")}),e},e.prototype.checkLogExposureConditions=function(e,t){return-1<this.applicableLocales.indexOf(e.locale)&&!n.TypeaheadUtils.isWithinMobileBreakpoint()&&i.shouldExecute(e,s)},e}();r.registerPlugin(new l)}),require(["require","exports","typeahead/core/StripingConfiguration","typeahead/dataprovider/suggestservice/SuggestServiceQueryParamsUtils","universalTypeahead"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=[{lobs:["FLIGHTS"]}],r=function(){function e(){}return e.prototype.modifyParameters=function(e,t,i){return o.addFeatureFlag("nearby_airport",a,e,t,i)},e.prototype.getExperiments=function(){return i.getExperiments(a)},e}();n.registerPlugin(new r)}),require(["require","exports","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,o,n,a,s,l,i,c,r){"use strict";t.__esModule=!0;var u=[{experiment:{id:25632,name:"ess_non_mobile_typeahead_takeover_experience_hotel"},tabs:["hotel"]},{experiment:{id:25633,name:"ess_non_mobile_typeahead_takeover_experience_flights"},tabs:["flight"]},{experiment:{id:25634,name:"ess_non_mobile_typeahead_takeover_experience_cars"},tabs:["car"]},{experiment:{id:26570,name:"ess_non_mobile_typeahead_takeover_experience_lx"},tabs:["activity"]},{experiment:{id:25635,name:"ess_non_mobile_typeahead_takeover_experience_packages"},tabs:["package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]}],p=[{experiment:{id:25632,name:"ess_non_mobile_typeahead_takeover_experience_hotel",value:2},tabs:["hotel"]},{experiment:{id:25633,name:"ess_non_mobile_typeahead_takeover_experience_flights",value:2},tabs:["flight"]},{experiment:{id:26570,name:"ess_non_mobile_typeahead_takeover_experience_lx",value:2},tabs:["activity"]},{experiment:{id:25634,name:"ess_non_mobile_typeahead_takeover_experience_cars",value:2},tabs:["car"]},{experiment:{id:25635,name:"ess_non_mobile_typeahead_takeover_experience_packages",value:2},tabs:["package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]}],g=[u,p],d=function(){function r(){}return r.shouldEnableNonMobileTakeOver=function(e){return!c.TypeaheadUtils.isWithinMobileBreakpoint()&&l.shouldExecute(e,u)},r.getMercuryWzdTab=function(){return $("li.tab:visible").children("button.on").data("lob")},r.removeCloseTypeaheadLink=function(e){"block"===$(e).children().find(".autocomplete-dropdown").children().find("a.feedback").css("display")?($(e).children().find(".autocomplete-dropdown").find("a.close").remove(),$(e).children().find(".autocomplete-dropdown").find("footer").css("backgroundColor","#ffffff")):($(e).children().find(".autocomplete-dropdown").find("footer").remove(),$(e).children().find(".autocomplete-dropdown").css("paddingBottom","1em"))},r.addNonMobileOverlayParentClass=function(e){$(e).addClass("typeahead-non-mobile-overlay-autocomplete-parent")},r.addNonMobileModalBackground=function(e){0<$("div.typeahead-non-mobile-overlay").length||$(e).prepend('<div class="typeahead-non-mobile-overlay modal-background modal-dismiss active"></div>')},r.indentTypeaheadResultsWithIcon=function(e){$(e).children().find(".autocomplete-dropdown").find("ul.results").children().find("li.results-item").css("padding","0 0.92307692em 0 0.12307692em")},r.indentypeaheadResultsWithoutIcon=function(e){$(e).children().find(".autocomplete-dropdown").find("ul.results").children().find("li.results-item").css("padding","0 0.92307692em 0 1.92307692em")},r.removeNonMobileModalBackground=function(e){$("div.typeahead-non-mobile-overlay").remove()},r.setNonMobileOverlayZIndex=function(e){var t=$(e).children().find("div.input-btn-group");$(t).addClass("typeahead-non-mobile-overlay-zIndex")},r.resetNonMobileOverlayZIndex=function(e){$(e).children().find("div.input-btn-group").removeClass("typeahead-non-mobile-overlay-zIndex")},r.handleInputStyles=function(e){r.shouldEnableNonMobileTakeOver(e)&&(r.removeInputBorders(),r.modifyInputPlaceholderIcon())},r.removeInputBorders=function(){$("input[aria-owns='typeaheadDataPlain']:visible").addClass("typeahead-non-mobile-overlay-input")},r.modifyInputPlaceholderIcon=function(){var e=$("input[aria-owns='typeaheadDataPlain']:visible").parent().find("span.icon");e.children().remove(),e.append('\n                    <svg class="uitk-icon-svg">\n                        <use xlink:href="#uitk-icon-search"/>\n                    </svg>\n        ')},r.openOverlay=function(e){var t=$(e).closest("div.col");r.addNonMobileOverlayParentClass(t),r.addNonMobileModalBackground(t),r.setNonMobileOverlayZIndex(t)},r.removeNonMobileOverlay=function(e){var t=$("#"+e),i=$(t).closest("div.col");r.removeNonMobileModalBackground(i),r.resetNonMobileOverlayZIndex(i),t.off("mousedown.nonmobiletakeover keydown.nonmobiletakeover keyup.nonmobiletakeover")},r.handOverFocus=function(e,t){var i=document.getElementById(e);r.shouldEnableNonMobileTakeOver(t)&&$(i).blur()},r.handleSuggestionSelection=function(e,t,i){r.shouldEnableNonMobileTakeOver(i)&&(r.removeNonMobileOverlay(t.getDomElementId()),r.handOverFocus(t.getDomElementId(),i),r.isInputClearBtnClicked=!1)},r.handleUserExit=function(e,t,i){if(r.shouldEnableNonMobileTakeOver(i)){var o=document.getElementById(t.getDomElementId()),n=$(o).closest(".input-btn-group").find('button[data-control="clear-field"]').get(0),a=t.getTriggerEvt().relatedTarget;this.isInputClearBtnClicked=n===a,this.isInputClearBtnClicked||r.removeNonMobileOverlay(t.getDomElementId())}},r.prototype.getExperiments=function(){return i.getExperiments([].concat.apply([],g))},r.prototype.handlePageLoad=function(e,i){var t=document.createElement("style");t.type="text/css",t.innerHTML="\n        .typeahead-non-mobile-overlay {\n            background: #000000 !important;\n            margin-left: -50%;\n            width: 150%;\n            opacity: 0.6 !important;\n        }\n\n        .typeahead-non-mobile-overlay-zIndex {\n            z-index: 1000 !important;\n        }\n\n        .typeahead-non-mobile-overlay-input, .typeahead-non-mobile-overlay-input:focus {\n            border: none !important;\n            box-shadow: none !important;\n            -webkit-box-shadow: none !important;\n            border-radius: 0 !important;\n        }\n\n        .typeahead-non-mobile-overlay-autocomplete-parent  .autocomplete-dropdown {\n            border: none !important;\n            border-radius: 0 !important;\n            top: 40px;\n        }\n\n        .typeahead-non-mobile-overlay-autocomplete-parent .autocomplete-arrow::after {\n            display: none !important;\n        }\n    ",document.head.appendChild(t),i.tab=r.getMercuryWzdTab(),l.abTest.getBucketingPromise().done(function(){r.handleInputStyles(i),uitk.subscribe("sfSelectedLobs.updated",function(e,t){i.tab=t.searchType,r.handleInputStyles(i)}),$("body").on("click","[data-control='clear-field']",function(e){r.isInputClearBtnClicked=!0}),a.TypeaheadMessage.subscribe(o.SuggestionSelectedMessage.getTopic(),function(e,t){r.handleSuggestionSelection(e,t,i)}),a.TypeaheadMessage.subscribe(s.UserExitedMessage.getTopic(),function(e,t){r.handleUserExit(e,t,i)})})},r.prototype.handleInputElementFocusByHumanOrScript=function(e,i){if(r.shouldEnableNonMobileTakeOver(i)){var o=$(e).closest("div.col");if(i.tab=r.getMercuryWzdTab(),l.shouldExecute(i,u)){r.openOverlay(e);var t=$(e).closest(".input-btn-group").height()-8;$(".typeahead-non-mobile-overlay-autocomplete-parent  .autocomplete-dropdown").css("top",t+"px"),$("div.dropdown-con").css("display","none"),e.on("mousedown.nonmobiletakeover keydown.nonmobiletakeover keyup.nonmobiletakeover",function(){$("div.dropdown-con").css("display","none")})}a.TypeaheadMessage.subscribe(n.SuggestionShownMessage.getTopic(),function(e,t){l.shouldExecute(i,u)&&("flight"!==r.getMercuryWzdTab()?r.indentTypeaheadResultsWithIcon(o):r.indentypeaheadResultsWithoutIcon(o)),l.shouldExecute(i,p)&&r.removeCloseTypeaheadLink(o)})}},r.isInputClearBtnClicked=!1,r}();r.registerPlugin(new d)}),require(["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/SuggestionShownMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,o,r,s,l,c,n){"use strict";t.__esModule=!0;var a=function(){function e(){this.isMetricsLogged=!1}return e.prototype.handlePageLoad=function(e,t){this.evaluateMetrics()},e.prototype.evaluateMetrics=function(){var i=this,e=Date.now(),o={name:"UtaPageloadMetrics"};o.utaBundle=c.TypeaheadUtils.getUtaBundleUrl(),o.numberOfInputInteractions=0,o.durationInMillisFromStorefrontScriptStartToUtaScriptStart=isNaN(window.storefrontScriptLoadingStartedTimestamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaScriptLoadingStartedTimestamp-window.storefrontScriptLoadingStartedTimestamp,o.durationInMillisFromUtaScriptStartToUtaReady=isNaN(window.utaModuleReadyTimeStamp)||isNaN(window.utaScriptLoadingStartedTimestamp)?void 0:window.utaModuleReadyTimeStamp-window.utaScriptLoadingStartedTimestamp,o.durationInMillisFromUtaReadyToUtaPageLoadHandler=isNaN(e)||isNaN(window.utaModuleReadyTimeStamp)?void 0:e-window.utaModuleReadyTimeStamp,$("body").one("focus","[data-provide=utypeahead]",function(){var e=Date.now();o.durationInMillisFromStorefrontScriptStartToInputFocus=isNaN(window.storefrontScriptLoadingStartedTimestamp)?void 0:e-window.storefrontScriptLoadingStartedTimestamp}),$("body").on("input.typeahead_metrics","[data-provide=utypeahead]",function(){o.numberOfInputInteractions++});var n=l.TypeaheadMessage.subscribe(s.SuggestionShownMessage.getTopic(),function(e,t){o.domElementId=t.getDomElementId(),o.suggestionsRenderTimeInMillis=t.getRenderTime(),l.TypeaheadMessage.unsubscribe(e,n),i.logMetrics(o)}),a=l.TypeaheadMessage.subscribe(r.SubmitClickedMessage.getTopic(),function(e,t){l.TypeaheadMessage.unsubscribe(e,a),i.logMetrics(o)})},e.prototype.logMetrics=function(e){this.isMetricsLogged||(e.tab=i.ClientHandlerRegistry.getTab(),e.isReadyOnFocus=!window.isUtaModuleNotReadyOnFocus,o.default.log(void 0,void 0,void 0,e),this.isMetricsLogged=!0,$("body").off("input.typeahead_metrics"),window.utaDebug&&(console.dir("uTA Pageload Metrics:"+JSON.stringify(e)),console.dir(e)))},e}();n.registerPlugin(new a)}),require(["require","exports","typeahead/core/context","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,n,a,u,o){"use strict";t.__esModule=!0;var r="https://threepp-comingle."+("prod"===i.environment?"prod-p":"int")+".expedia.com/api/v1/build3ppSrpLink",s=function(){function e(){var o=this;this.applicableClientIds=["Homepage","AWSHomepage","PackageLandingPage"],this.applicablePackageTypes=["FH"],a.TypeaheadMessage.subscribe(n.FormSubmittedMessage.getTopic(),function(e,t){if(t.isFormValid()&&o.isRedirectApplicable()&&t.getEvent()){var i=o.getRedirectPath($(t.getEvent().currentTarget));i&&(t.getEvent().preventDefault(),o.submitFormData(o.collectFormData(t.getEvent()),i))}})}return e.prototype.isRedirectApplicable=function(){var e=u.TypeaheadUtils.getClientId(),t=u.TypeaheadUtils.getShortPackageType();return-1<this.applicableClientIds.indexOf(e)&&-1<this.applicablePackageTypes.indexOf(t)},e.prototype.getRedirectPath=function(e){var t=e.find("input[data-gcw-field-type=destination]:visible").closest("div.autocomplete").find("input[data-gcw-storeable-name=gcw-destination-ta]").val();if(t){var i=JSON.parse(t);if(i.redirectPath)return window.location.protocol+"//"+window.location.host+i.redirectPath}},e.prototype.collectFormData=function(e){var t={};t.locale=u.TypeaheadUtils.getLocale();var i=e.target["package-origin-hp-package-ta"].value;t.originTla=i?JSON.parse(i).airportCode:void 0;var o=e.target["package-destination-hp-package-ta"].value;t.destinationId=o?JSON.parse(o).regionId:void 0,t.fromDate=e.target["package-departing-hp-package"].value,t.toDate=e.target["package-returning-hp-package"].value,t.rooms=[],t.totalAdults=0,t.totalChildren=0;for(var n=Number($("form:visible")[0]["package-rooms-hp-package"].value),a=1;a<=n;a++){for(var r=Number(e.target["package-"+a+"-adults-hp-package"].value),s=Number(e.target["package-"+a+"-children-hp-package"].value),l=[],c=1;c<=s;c++)l.push(Number(e.target["package-"+a+"-age-select-"+c+"-hp-package"].value));t.rooms.push({childAges:l}),t.totalAdults+=r,t.totalChildren+=s}return t},e.prototype.submitFormData=function(e,t){var i=this;$.ajax({beforeSend:function(e,t){i.setRequestHeaders(e)},data:JSON.stringify(e),dataType:"json",error:function(){location.href=t},success:function(e){e.srpUrl?window.location.href=e.srpUrl:location.href=t},type:"POST",url:r})},e.prototype.setRequestHeaders=function(e){var t=u.TypeaheadUtils.getGuid();e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Client-Token","ess-cuba-redirect"),e.setRequestHeader("Session-ID",t),e.setRequestHeader("Transaction-ID",t),e.setRequestHeader("Message-ID",t),e.setRequestHeader("Site-Id",i.siteid),e.setRequestHeader("Tpid",String(u.TypeaheadUtils.getSiteParamValue(u.SiteParam.tpid))),e.setRequestHeader("Eapid",String(u.TypeaheadUtils.getSiteParamValue(u.SiteParam.eapid))),e.setRequestHeader("Duaid",String(u.TypeaheadUtils.getCookie("DUAID")))},e}();o.registerPlugin(new s)}),require(["require","exports","jquery","typeahead/core/message/ElementFocusedMessage","typeahead/core/message/InputValueEditedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,r,o,n,a,s,i,l,c){"use strict";t.__esModule=!0;var u=[{clients:["PackageLandingPage","FlightsLandingPage","HotelsLandingPage","CarsLandingPage"]},{clients:["Homepage","AWSHomepage"],tabs:["flight","hotel","car","package"]}],p=function(){function e(){var i=this;this.isScrollTopOn=!1,a.TypeaheadMessage.subscribe(o.ElementFocusedMessage.getTopic(),function(e,t){i.isScrollTopOn=!1,l.TypeaheadUtils.isWithinMobileBreakpoint()&&s.shouldExecute(t.getContext(),u)&&(i.scrollTop(r("#"+t.getDomElementId())),i.isScrollTopOn=!0)}),a.TypeaheadMessage.subscribe(n.InputValueEditedMessage.getTopic(),function(e,t){i.isScrollTopOn&&i.scrollTop(r("#"+t.getDomElementId()))})}return e.prototype.getExperiments=function(){return i.getExperiments(u)},e.prototype.scrollTop=function(e){var t=r("body"),i="wheel touchmove";if(!(1<document.documentElement.clientWidth/window.innerWidth)){var o=e.offset().top-13,n=e.siblings(".label");0<n.length&&(o=n.offset().top-7);var a=t.scrollTop();Math.abs(a-o)<6.5||(t.on(i,function(){t.off(i),t.stop()}),t.animate({scrollTop:o},300))}},e}();c.registerPlugin(new p)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","universalTypeahead"],function(e,t,o,n,a,i){"use strict";t.__esModule=!0;var r=[{clients:["Flights.Search"]},{}],s=function(){function i(){}return i.enableAutoSelection=function(t){setTimeout(function(){var e;(e=o(t)[0])&&o(t).val()&&document.activeElement===e&&e.setSelectionRange(0,9999)},0)},i.prototype.getExperiments=function(){return a.getExperiments(r)},i.prototype.handleInputElementFocusByHumanOrScript=function(e,t){n.shouldExecute(t,r)&&i.enableAutoSelection(e)},i}();i.registerPlugin(new s)}),require(["require","exports","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/TypeaheadUtils","universalTypeahead"],function(o,e,a,t,i,n){"use strict";e.__esModule=!0;var r=[{deviceTypes:["Desktop"],experiment:{id:25824,name:"ESS_Helper"},lobs:["HOTELS"]}],s=function(){function n(){}return n.execute=function(i){n.showInterstitial(),setTimeout(function(){if(!n.essHelperJsPromise){var e=$.Deferred();n.essHelperJsPromise=e.promise();var t=n.getEssHelperJsUrl();t&&$.getScript(t,function(){e.resolve()})}n.essHelperJsPromise.done(function(){o(["EssHelper"],function(e){e.open(i.data)})})},0)},n.getEssHelperJsUrl=function(){var e=i.TypeaheadUtils.getUtaBundleUrl();return e?e.replace("universal_typeahead_bundle","ess_helper"):void 0},n.showInterstitial=function(){uitk.publish("results.changed",{contentId:".wrap",disable:!0,message:"Launching Search and Suggest Helper",scrollToTop:!1,showLoader:!0}),setTimeout(function(){uitk.publish("results.complete",{ariaLevel:"polite",contentId:".wrap"})},1e4)},n.prototype.handleContentToShow=function(e,t,i){if(a.shouldExecute(i,r)){var o=$('\n    <a aria-label="Feedback" class="feedback" href="#" onclick="return false;" \n        style="color:#616161; font-size:12px; width:auto; float:left;" >\n        <span class="icon icon-comment"></span> Need help with the suggestions you see?\n    </a>\n');o.on("click",null,t.attr("id"),n.execute),e.find("footer.footer").prepend(o)}},n.prototype.getExperiments=function(){return t.getExperiments(r)},n}();n.registerPlugin(new s)}),require(["require","exports","typeahead/core/EssDataProvider","typeahead/core/plugins/ExecutionHelper","typeahead/core/StripingConfiguration","typeahead/core/SuggestionsAggregator","universalTypeahead"],function(e,t,i,o,n,a,r){"use strict";t.__esModule=!0;var s=[{clients:["Homepage","AWSHomepage","FlightsLandingPage","CarsLandingPage","HotelsLandingPage"],tabs:["flight","hotel","car","activity","package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]},{clients:["Hotels.Search","Flights.Search","Cars.Search","LX.Search","LXLandingPage","PackageLandingPage"]}],l=function(){function e(){this.dataProvider=new i.EssDataProvider}return e.prototype.getId=function(){return a.SuggesterId.EssOnFocusPersonalizedSuggester},e.prototype.suggest=function(e,t){var i=$.Deferred();return o.shouldExecute(t,s)?this.fetchSuggestionsAndResolve(i,e,t):this.resolve(i,[]),i.promise()},e.prototype.getExperiments=function(){return n.getExperiments(s)},e.prototype.suggestOnFocus=function(e,t){return this.suggest(e,t)},e.prototype.resolve=function(e,t){e.resolve({id:this.getId(),results:t})},e.prototype.fetchSuggestionsAndResolve=function(e,t,i){var o=this,n=[];this.dataProvider.fetchData($.extend(!0,{},t,{context:i},{personalize:!0})).then(function(e){e&&e.results&&(n=n.concat(e.results))}).always(function(){o.resolve(e,n)})},e}();r.registerPlugin(new l)});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();require(["require","exports","jquery","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/SuggestServiceParamModifier","universalTypeahead"],function(e,t,o,n,a,i,r){"use strict";t.__esModule=!0;var s=function(e){function t(){var i=e.call(this)||this;return i.regionId="",i.configuration=[{clients:["Hotels.Search"],lobs:["HOTELS"]}],a.TypeaheadMessage.subscribe(n.SubmitClickedMessage.getTopic(),function(e,t){i.regionId=""}),i}return __extends(t,e),t.prototype.modify=function(e,t,i){i.srchText||(""===this.regionId&&(this.regionId=o("#regionId").val()),e.rid=this.regionId)},t}(i.SuggestServiceParamModifier);r.registerPlugin(new s)});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();require(["require","exports","jquery","typeahead/core/SuggestionModifier","typeahead/core/TypeaheadUtils","universalTypeahead"],function(e,t,i,o,n,a){"use strict";t.__esModule=!0;var r=function(i){function o(){var e=null!==i&&i.apply(this,arguments)||this;return e.configuration=[{lobs:["FLIGHTS"]},{clients:["Flights.Search"]}],e.featureName="SuppressIcon",e}return __extends(o,i),o.prototype.modify=function(e,t){e.forEach(function(e){"LIST"===e.type||n.TypeaheadUtils.isChildSuggestion(e)||(e.icon="none")})},o.prototype.precondition=function(e,t){return i.prototype.precondition.call(this,e,t)&&o.inapplicableClients.lastIndexOf(t.clientId)<0},o.inapplicableClients=[],o}(o.SuggestionModifier);a.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,a,o,i){"use strict";t.__esModule=!0;var n=[{clients:["Flights.Search"],experiment:{id:15336,name:"FSRP_uTA_OptimizeDropdownGeometry",value:0}}],r=function(){function s(){this.showHandlers={}}return s.optimizeDropDownGeometry=function(e,t){var i=4+document.body.clientWidth-2*s.baseSpacingHorz,o=4+Math.min(s.uitkTypeaheadWidthPx,i),n=4+Math.min(s.uitkTypeaheadMinWidthPx,i),a=Math.min(o,i),r=t.offset().left-2;i<r+a&&(r=s.baseSpacingHorz+i-a-2),r-=t.get(0).getBoundingClientRect().left,e.css({left:r+"px","max-width":o+"px","min-width":n+"px",width:a+"px"})},s.prototype.getExperiments=function(){},s.prototype.handleDropDownHide=function(e,t,i){var o=t.attr("id"),n=o?this.showHandlers[o]:void 0;n&&(a(window).off(s.resizeEventTypes,null,n),delete this.showHandlers[o])},s.prototype.handleDropDownShow=function(e,t,i){o.shouldExecute(i,n)&&this.doHandleDropDownShow(e,t)},s.prototype.doHandleDropDownShow=function(t,i){var e=function(e){s.optimizeDropDownGeometry(t,i)};e(),a(window).on(s.resizeEventTypes,null,null,e),i.attr("id")&&(this.showHandlers[i.attr("id")]=e)},s.baseSpacingHorz=12,s.uitkTypeaheadWidthPx=390,s.uitkTypeaheadMinWidthPx=282,s.resizeEventTypes="orientationchange resize",s}();i.registerPlugin(new r)}),require(["require","exports","jquery","typeahead/core/plugins/ExecutionHelper","universalTypeahead"],function(e,t,n,u,i){"use strict";t.__esModule=!0;var p=[{experiment:{id:25633,name:"ess_non_mobile_typeahead_takeover_experience_flights"},tabs:["flight"]},{experiment:{id:25632,name:"ess_non_mobile_typeahead_takeover_experience_hotel"},tabs:["hotel"]},{experiment:{id:25635,name:"ess_non_mobile_typeahead_takeover_experience_packages"},tabs:["package","packageFlightHotel","packageFlightHotelCar","packageFlightCar","packageHotelCar","flightHotel","flightHotelCar","flightCar","hotelCar","carHotel","carHotelFlight","carFlight"]},{experiment:{id:25634,name:"ess_non_mobile_typeahead_takeover_experience_cars"},tabs:["car"]},{experiment:{id:26570,name:"ess_non_mobile_typeahead_takeover_experience_lx"},tabs:["activity"]}],o=function(){function c(){this.showHandlers={}}return c.optimizeDropDownGeometry=function(e,t,i){var o=4+document.body.clientWidth-2*c.baseSpacingHorz,n=4+Math.min(c.uitkTypeaheadMinWidthPx,o),a=4+Math.min(c.uitkTypeaheadWidthPx,o),r=Math.min(a,o),s=t.offset().left-2;if(o<s+r&&(s=c.baseSpacingHorz+o-r-2),s-=t.get(0).getBoundingClientRect().left,u.shouldExecute(i,p)){var l=t.attr("id");s+=2,-1<c.twoInputsApplicable.indexOf(l)||(r=t.get(0).getBoundingClientRect().width),c.applyDropDownGeometry(e,s,r,n,r)}else c.applyDropDownGeometry(e,s,a,n,r)},c.applyDropDownGeometry=function(e,t,i,o,n){e.css({left:t+"px","max-width":i+"px","min-width":o+"px",width:n+"px"})},c.prototype.handleDropDownShow=function(e,t,i){0<=c.applicableClients.indexOf(i.clientId)&&this.doHandleDropDownShow(e,t,i)},c.prototype.doHandleDropDownShow=function(t,i,o){var e=function(e){c.optimizeDropDownGeometry(t,i,o)};e(),n(window).on(c.resizeEventTypes,null,null,e),i.attr("id")&&(this.showHandlers[i.attr("id")]=e)},c.applicableClients=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],c.leftOffsetApplicableInputs=["flight-origin-hp-flight","flight-2-origin-hp-flight","flight-3-origin-hp-flight","flight-4-origin-hp-flight","flight-5-origin-hp-flight","hotel-destination-hp-hotel","package-origin-hp-package","package-origin-FC-hp-package","hotel-destination-hp-package","car-pickup-hp-car","flight-origin-flp","flight-2-origin-flp","flight-3-origin-flp","flight-4-origin-flp","flight-5-origin-flp","package-origin-flp-fh","package-origin-flp-fhc","package-origin-FC-flp-fc","hotel-destination-hlp","hotel-destination-hlp-hc","package-origin-hlp-fh","package-origin-hlp-fhc","package-origin-plp-fh","package-origin-plp-fhc","package-origin-FC-plp-fc","hotel-destination-plp-hc","car-pickup-clp","hotel-destination-clp-hc","package-origin-clp-fhc","package-origin-FC-clp-fc"],c.rightOffsetApplicableInputs=["flight-destination-hp-flight","flight-2-destination-hp-flight","flight-3-destination-hp-flight","flight-4-destination-hp-flight","flight-5-destination-hp-flight","package-destination-hp-package","package-destination-FC-hp-package","car-dropoff-hp-car","flight-destination-flp","flight-2-destination-flp","flight-3-destination-flp","flight-4-destination-flp","flight-5-destination-flp","package-destination-flp-fh","package-destination-flp-fhc","package-destination-FC-flp-fc","package-destination-hlp-fh","package-destination-hlp-fhc","package-destination-plp-fh","package-destination-plp-fhc","package-destination-FC-plp-fc","car-dropoff-clp","package-destination-clp-fhc","package-destination-FC-clp-fc"],c.twoInputsApplicable=["flight-origin-hp-flight","flight-2-origin-hp-flight","flight-3-origin-hp-flight","flight-4-origin-hp-flight","flight-5-origin-hp-flight","flight-destination-hp-flight","flight-2-destination-hp-flight","flight-3-destination-hp-flight","flight-4-destination-hp-flight","flight-5-destination-hp-flight","package-origin-hp-package","package-destination-hp-package","package-origin-FC-hp-package","package-destination-FC-hp-package","car-pickup-hp-car","car-dropoff-hp-car","flight-origin-flp","flight-2-origin-flp","flight-3-origin-flp","flight-4-origin-flp","flight-5-origin-flp","flight-destination-flp","flight-2-destination-flp","flight-3-destination-flp","flight-4-destination-flp","flight-5-destination-flp","package-origin-flp-fh","package-destination-flp-fh","package-origin-flp-fhc","package-destination-flp-fhc","package-origin-FC-flp-fc","package-destination-FC-flp-fc","package-origin-hlp-fh","package-destination-hlp-fh","package-origin-hlp-fhc","package-destination-hlp-fhc","package-origin-plp-fh","package-origin-plp-fhc","package-origin-FC-plp-fc","package-destination-plp-fh","package-destination-plp-fhc","package-destination-FC-plp-fc","car-pickup-clp","car-dropoff-clp","package-origin-clp-fhc","package-destination-clp-fhc","package-origin-FC-clp-fc","package-destination-FC-clp-fc"],c.baseSpacingHorz=12,c.uitkTypeaheadWidthPx=600,c.uitkTypeaheadMinWidthPx=282,c.resizeEventTypes="orientationchange resize",c}();i.registerPlugin(new o)}),define("typeahead/client/ActivitiesSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","a#toggleSearch",function(){$("button#srpSearch").click(function(){i.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),i.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.rfrrIdPrefix="LX.SR|UpdateSearch",t.APPLICABLE_CLIENT_ID="LX.Search",t}();t.ActivitiesSearchResultsPageHandler=o}),define("typeahead/client/CarSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function t(){-1<window.location.search.indexOf("details?")?this.rfrrIdPrefix="CAR.CIS|UpdateSearch":this.rfrrIdPrefix="CAR.SR|UpdateSearch"}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){var e=this;$("body").on("click","a#wizard-toggle",function(){$("button#wizard-update").click(function(){i.ClientHandlerRegistry.publishSubmitClickedMessage(e.rfrrIdPrefix),i.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.APPLICABLE_CLIENT_ID="Cars.Search",t}();t.CarSearchResultsPageHandler=o}),define("typeahead/client/ClientHandlerRegistry",["require","exports","typeahead/core/context","typeahead/core/logging/ProblemOrigin","typeahead/core/logging/Severity","typeahead/core/logging/TypeaheadErrorLogger","typeahead/core/message/FormSubmittedMessage","typeahead/core/message/SubmitClickedMessage","typeahead/core/message/TypeaheadMessage","typeahead/core/message/UserExitedMessage","typeahead/core/TypeaheadUtils","typeahead/core/util/Optional"],function(e,t,i,n,a,r,s,l,c,u,p,g){"use strict";t.__esModule=!0;var o=function(){function o(){}return o.handlePageLoad=function(){(o.client=o.getClientHandler(p.TypeaheadUtils.getClientId())).isPresent()?(o.client.get().subscribeFormLoadedEvent(),o.client.get().subscribeFormSubmitEvent()):r.default.log(new Error("No client handler for this page. Omniture logs may not work."),a.Severity.MustFix,n.ProblemOrigin.UniversalTypeahead)},o.getTab=function(){return o.client.isPresent()?o.client.get().getTab():void 0},o.registerClient=function(e){o.allClients.indexOf(e)<0&&o.allClients.push(e)},o.publishSubmitClickedMessage=function(e,t){c.TypeaheadMessage.publish(new l.SubmitClickedMessage(e,t)),c.TypeaheadMessage.publish(new u.UserExitedMessage)},o.publishFormSubmittedMessage=function(e,t){c.TypeaheadMessage.publish(new s.FormSubmittedMessage(e,i,t))},o.getGeolocationViewController=function(e){return o.client.isPresent()?o.client.get().getGeolocationViewController(e):void 0},o.getClientHandler=function(e){var t=void 0;if(e)for(var i=0;i<o.allClients.length;i++)if(o.allClients[i].isApplicable(e)){t=o.allClients[i];break}return g.Optional.ofNullable(t)},o.HSR_SUBMIT_SHOW_ERRORS_MESSAGE="hsr.submit.showErrors",o.HSR_SUBMIT_GET_QUERY_MESSAGE="hsr.submit.getQuery",o.HSR_SUBMIT_BEFORE_UPDATE_HASH_MESSAGE="hsr.submit.beforeUpdateHash",o.allClients=[],o.client=g.Optional.ofNullable(void 0),o}();t.ClientHandlerRegistry=o}),define("typeahead/client/FlightSearchResultsPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry"],function(e,t,i){"use strict";t.__esModule=!0;var o=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){$("body").on("click","#flight-wizard-search-button",function(){i.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),$("#validation-alert").length||i.ClientHandlerRegistry.publishFormSubmittedMessage(!0)})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.rfrrIdPrefix="FLT.SR|UpdateSearch",t.APPLICABLE_CLIENT_ID="Flights.Search",t}();t.FlightSearchResultsPageHandler=o}),define("typeahead/client/HotelSearchResultsPageHandler",["require","exports","typeahead/core/loc","typeahead/client/ClientHandlerRegistry","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,o,n,a,r){"use strict";t.__esModule=!0;var i=function(){function i(){}return i.prototype.isApplicable=function(e){return 0<=i.APPLICABLE_CLIENT_IDS.indexOf(e)},i.prototype.subscribeFormSubmitEvent=function(){var i=this;$("form").on("click","button[type=submit]",function(e){if(0<$(e.target).parents("form:has(input[data-provide=utypeahead])").length){var t=$(e.target).data("track");t=t.match(/(\w+).(\w+)/g)[0]+"|"+t.match(/(\w+).(\w+)/g)[1],$(e.target).removeAttr("data-track"),n.ClientHandlerRegistry.publishSubmitClickedMessage(t)}}),uitk.subscribe(n.ClientHandlerRegistry.HSR_SUBMIT_SHOW_ERRORS_MESSAGE,function(e,t){n.ClientHandlerRegistry.publishFormSubmittedMessage(t.isValid)}),uitk.subscribe(n.ClientHandlerRegistry.HSR_SUBMIT_GET_QUERY_MESSAGE,function(e,t){i.setLatLongForCurrentLocation(t)})},i.prototype.subscribeFormLoadedEvent=function(){uitk.subscribe(i.SEARCH_WIZARD_OPENED_MESSAGE,function(e,t){i.SEARCH_WIZARD_TOGGLE_BUTTON_ID===t.attr("id")&&r.TypeaheadMessage.publish(new a.FormLoadedMessage(void 0))})},i.prototype.getTab=function(){},i.prototype.getGeolocationViewController=function(){},i.prototype.setLatLongForCurrentLocation=function(e){var t=this.getLatLongFromUrl();this.isDestinationCurrentLocation()&&t&&($("#latLong").val(t),e.query&&-1===e.query.indexOf("latLong")&&(e.query+="&latLong="+t))},i.prototype.getLatLongFromUrl=function(){var e;return(e=this.getRequestParameterValue("latLong"))&&e.match(/^[+-]?\d+\.\d+,[+-]?\d+\.\d+$/)?e:void 0},i.prototype.isDestinationCurrentLocation=function(){var e;return!!(e=this.getRequestParameterValue("destination"))&&(e=e.replace(/\+/g," "),o.geolocationDisplayText===$("#inpSearchNear").val()&&o.geolocationDisplayText===e)},i.prototype.getRequestParameterValue=function(e){var t=new RegExp(e+"=([^&]*)&?").exec(decodeURIComponent(window.location.href));if(t&&t.length&&t[1])return t[1]},i.APPLICABLE_CLIENT_IDS=["Hotels.Search","Packages.Search"],i.SEARCH_WIZARD_OPENED_MESSAGE="toggle.opened",i.SEARCH_WIZARD_TOGGLE_BUTTON_ID="changeSearchWizard",i}();t.HotelSearchResultsPageHandler=i}),define("typeahead/client/MercuryWizardHandler",["require","exports","jquery","typeahead/client/ClientHandlerRegistry","typeahead/core/geolocation/MercuryGeolocationViewController","typeahead/core/message/FormLoadedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,o,n,a,r){"use strict";t.__esModule=!0;var s=function(){function t(){uitk.subscribe("sfSelectedLobs.updated",function(e,t){-1<["flightHotel","flightHotelCar"].indexOf(t.searchSubType)&&i("input[data-provide=utypeahead]").removeData("typeahead")})}return t.prototype.isApplicable=function(e){return-1<t.APPLICABLE_CLIENT_IDS.indexOf(e)},t.prototype.subscribeFormSubmitEvent=function(){i("form").on("click","button[type=submit]",function(e){0<i(e.target).parents("form:has(input[data-provide=utypeahead])").length&&o.ClientHandlerRegistry.publishSubmitClickedMessage(null,e)}),setTimeout(function(){i("form:has(input[data-provide=utypeahead])").on("submit.typeahead",function(e){var t;o.ClientHandlerRegistry.publishFormSubmittedMessage((t=i("form:has(input[data-provide=utypeahead]):visible .validation-alert")).is(":hidden")||t.hasClass("visuallyhidden"),e)})},0)},t.prototype.subscribeFormLoadedEvent=function(){var e=this,t=function(){r.TypeaheadMessage.publish(new a.FormLoadedMessage(e.getTab()))};t(),uitk.subscribe("mercury-form-history-loaded",function(){t()})},t.prototype.getTab=function(){return i("li.tab:visible").children("button.on").data("lob")},t.prototype.getGeolocationViewController=function(e){return this.geolocationViewController||(this.geolocationViewController=new n.MercuryGeolocationViewController(e)),this.geolocationViewController},t.APPLICABLE_CLIENT_IDS=["Homepage","AWSHomepage","LXLandingPage","CarsLandingPage","FlightsLandingPage","HotelsLandingPage","PackageLandingPage","RailsLandingPage"],t}();t.MercuryWizardHandler=s}),define("typeahead/client/OpenSearchPageHandler",["require","exports","typeahead/client/ClientHandlerRegistry","typeahead/core/message/SuggestionSelectedMessage","typeahead/core/message/TypeaheadMessage"],function(e,t,i,o,n){"use strict";t.__esModule=!0;var a=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){var i=this;$("div.open-search-page").on("click","button#search-button",function(){$("#uta-search-query").val()&&i.publishSubmitMessages()}),n.TypeaheadMessage.subscribe(o.SuggestionSelectedMessage.getTopic(),function(e,t){setTimeout(function(){i.publishSubmitMessages()},0)})},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.prototype.publishSubmitMessages=function(){i.ClientHandlerRegistry.publishSubmitClickedMessage(t.rfrrIdPrefix),i.ClientHandlerRegistry.publishFormSubmittedMessage(!0)},t.rfrrIdPrefix="Open.Search|UpdateSearch",t.APPLICABLE_CLIENT_ID="OpenSearchPage",t}();t.OpenSearchPageHandler=a}),define("typeahead/client/UserAccountPageHandler",["require","exports"],function(e,t){"use strict";t.__esModule=!0;var i=function(){function t(){}return t.prototype.isApplicable=function(e){return t.APPLICABLE_CLIENT_ID===e},t.prototype.subscribeFormSubmitEvent=function(){},t.prototype.subscribeFormLoadedEvent=function(){},t.prototype.getTab=function(){},t.prototype.getGeolocationViewController=function(){},t.APPLICABLE_CLIENT_ID="UserAccountPage",t}();t.UserAccountPageHandler=i});
//# sourceMappingURL=universal_typeahead_bundle.min.js.map
