define("bannerConsolidation",["jquery","gc/pageModel","underscore","sfAbTest"],function(d,h,f,l){var b=b||{};b.bannerOrderConfig={ANONYMOUS:["travelAlert","couponCode","memberPricing"],Identified:["travelAlert","couponCode","memberPricing"],AUTHENTICATED:["travelAlert","hotMip","couponCode","memberPricing"]};b.bannerEquivalence=[{banner:"travelAlert",module:"travelAlert"},{banner:"couponCode",module:"couponBanner"},{banner:"memberPricing",module:"LoyaltySignup"},{banner:"memberOnly",module:"memberOnlyDeals"},{banner:"hotMip",module:"airAttachBanner"}];b.hasStarted=!1;b.bannerOrder;b.init=function(){this.hasStarted=!0;this.userStatus();if(null===localStorage.getItem("firstVisit")){var a=[{banner:"travelAlert",display:"show"},{banner:"memberPricing",display:""},{banner:"memberOnly",display:""},{banner:"couponCode",display:""},{banner:"hotMip",display:""}];b.bannerOrder=a;localStorage.setItem("firstVisit","true");this.saveBannerOrder(a)}else"true"===localStorage.getItem("firstVisit")&&localStorage.setItem("firstVisit","false"),this.bannerOrder=JSON.parse(localStorage.getItem("bannerOrder"))};b.saveBannerOrder=function(a){localStorage.setItem("bannerOrder",JSON.stringify(a))};b.userStatus=function(){var a=h.user;return a?a.userStatus:void 0};b.clearLocalStorage=function(){localStorage.removeItem("firstVisit");localStorage.removeItem("bannerOrder")};b.overrideBannerToShow=function(a,b){var k=this.currentBannerToShow(),c=this.bannerOrder;b?this.changeState(c,k,""):this.changeState(c,k,"hide");this.changeState(c,a,"show");this.bannerOrder=c;this.saveBannerOrder(c)};b.setNextBanner=function(){if(this.hasStarted){var a=this.currentBannerToShow(),b=this.bannerOrder,d=this.userStatus(),c=this.bannerOrderConfig[d];if(-1==c.indexOf(a)){var e=99,g;a=this.getNotShownBanners(b);f.each(a,function(a){g=c.indexOf(a.banner);g<e&&0<=g?e=g:e});c[e];this.overrideBannerToShow(c[e],!1)}else d=c.indexOf(a)+1,d<c.length&&(this.changeState(b,a,"hide"),this.changeState(b,c[d],"show"),this.bannerOrder=b,this.saveBannerOrder(b))}else return!1};b.changeState=function(a,b,d){f.find(a,function(c){if(c.banner==b)return c.display=d,a})};b.getNotShownBanners=function(a){0==a&&(a=JSON.parse(localStorage.getItem("bannerOrder")));return f.filter(a,function(a){if(""==a.display)return a})};b.currentBannerToShow=function(){return f.filter(this.bannerOrder,function(a){return"show"==a.display})[0].banner};b.getSelectedBannerStatus=function(a){return"show"};b.getAbtestStatus=function(){return l.get(16136,!0).then(function(a){return 1==a.value})};b.isSupported=function(){try{return window.localstorage.setItem("_test_key_","_test_key_"),window.localstorage.removeItem("_test_key_"),!0}catch(a){return!1}};return b});require("bannerConsolidation",function(d){"localhost"!==window.location.hostname?d.getAbtestStatus().then(function(h){h&&d.isSupported()&&d.init()}):d.isSupported&&d.init()});var test={};
//# sourceMappingURL=bannerConsolidation.js.map