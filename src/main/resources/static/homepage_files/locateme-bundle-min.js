define("locateme/constants",function(){return{version:"v.1.0",dctkClientLoggingURL:"//a.travel-assets.com/datacapture/2/js/cl.js",forceDctkLoggingOn:!0,ADOBEORGID:"C00802BE5330A8350A490D4C@AdobeOrg",EXPERIMENTS:{featureGate:13308},ENVIRONMENTS:{DEV:"dev",TEST:"test",INT:"int",PROD:"prod"},PATTERNS:{DEV:/(local|sandbox|localhost)/g,TEST:/(trunk|test)/g,INT:/(int)/g},DOMAINS:{DEV:"http://wwwexpediacom.sandbox.dev.sb.karmalab.net:8888"},location:{}}});define("locateme/utils",["locateme/constants","locateme/config"],function(h,k){var f={},b="";f.ie=function(){for(var a=3,c=document.createElement("div"),g=c.getElementsByTagName("i");c.innerHTML="\x3c!--[if gt IE "+ ++a+"]\x3e\x3ci\x3e\x3c/i\x3e\x3c![endif]--\x3e",g[0];);return 4<a?a:void 0}();f.ajax=function(a){var c=this.mergeObj({always:function(){},done:function(){},fail:function(){},dataType:"json",contentType:"text/plain; charset\x3dutf-8",type:"GET",url:null,encode:!0},a);a=l(c);if(10>f.ie&&window.XDomainRequest){var g=new XDomainRequest;g.open(c.type,a);g.onprogress=function(){};g.ontimeout=function(){};g.onload=function(){var a=g.responseText;if(c.dataType&&"json"===c.dataType&&"string"===typeof a)try{a=JSON.parse(a)}catch(v){}c.done(a,g)};g.onerror=function(){c.fail(g)};setTimeout(function(){g.send()},0)}else if(window.XMLHttpRequest){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status){if(d.response)var a=d.response;else!d.responseType||""!==d.responseType&&"text"!==d.responseType||(a=d.responseText);c.dataType&&"json"===c.dataType&&"string"===typeof a&&(a=JSON.parse(a));c.done(a,g)}else c.fail(d);c.always(d,a)}};d.open(c.type,a);d.setRequestHeader("Content-Type",c.contentType);d.responseType=c.dataType;d.send()}};f.getCookie=function(a){var c,g=document.cookie.split(";");for(c=0;c<g.length;c++){var d=g[c].substr(0,g[c].indexOf("\x3d"));var b=g[c].substr(g[c].indexOf("\x3d")+1);d=d.replace(/^\s+|\s+$/g,"");if(d==a)return unescape(b)}};f.setCookie=function(a,c,g){var d=new Date;d.setDate(d.getDate()+g);c+=null==g?"":"; expires\x3d"+d.toUTCString();g=h.location.hostname.replace("www.",".");document.cookie=a+"\x3d"+c+(";domain\x3d"+g)+";path\x3d/"};f.appendAdobeMIDAndRedirect=function(a){if("undefined"!=typeof Visitor){var c=Visitor.getInstance(h.ADOBEORGID);b=a;""!=c.getMarketingCloudVisitorID(p)&&p()}else require(["dctk/dctk"],function(a){a.logMessage("LocateMe",{message:"Visitor is undefined"})})};f.getFormatedURL=function(a,c){var g=h.location.protocol+"//",d=h.location.search.substring(1),b={spoofParamName:"spoof-location",langid:"langid"};d=d.replace(/spoof-location=country_code/,"spoof-location");0<d.length&&"\x26"==d[0]&&(d=d.replace("\x26",""));d=u(d);for(f in b)d.hasOwnProperty(b[f])&&delete d[b[f]];c&&(d=t(d,c));var f="?"+e(d);d=h.location.hash;var l=h.location.pathname,m=/www\./i;/(www|euro|taap)\./i.test(a)?(b=a.split("."),m.test(a)&&(b.splice(0,1),b[0]=q(b[0])),b=b.join("."),"prod"!==k.environment&&(a=a.split(".").join(""),m=h.location.hostname.split("."),m[0]=a,a=m.join("."))):(a=a.split(".")[0],b=a.slice(3),b=q(b),m=h.location.hostname.split("."),m[0]=a,a=m.join("."));d=a+l+f+d;return{URL:g+d,text:b,domain:a,search:f,urlWithoutProtocol:d}};f.mergeObj=function(a,c){return n(a)&&n(c)?t(a,c):a};var p=function(){var a=Visitor.getInstance(h.ADOBEORGID),c=b;c=a.appendVisitorIDsTo(c);window.location.replace(c)},q=function(a){return a[0].toUpperCase()+a.slice(1)},e=function(a){return Object.keys(a).map(function(c){return encodeURIComponent(c)+"\x3d"+encodeURIComponent(a[c])}).join("\x26")},u=function(a){a='{"'+a.replace(/&/g,'","').replace(/=/g,'":"')+'"}';return'{""}'===a?{}:JSON.parse(a,function(a,b){return""===a?b:decodeURIComponent(b)})},l=function(a){var c=a.data;c._=Math.floor(Math.random()*Math.pow(10,13));c=e(c);return a.url+"?"+c},n=function(a){return a&&"object"===typeof a&&!(a instanceof Array)&&!(a instanceof Date)},r=function(a){var c,b={};if(n(a)){for(c in a)a.hasOwnProperty(c)&&(b[c]=r(a[c]));return b}return a},t=function(a,c){var b={},d;for(d in a)c.hasOwnProperty(d)?n(a[d])&&n(c[d])?b[d]=t(a[d],c[d]):b[d]=r(c[d]):a.hasOwnProperty(d)&&(b[d]=r(a[d]));for(var e in c)c.hasOwnProperty(e)&&!b[e]&&(b[e]=r(c[e]));return b};return f});define("locateme/config",["locateme/constants"],function(h){findEnvironment=function(){for(var k in h.PATTERNS)if(h.PATTERNS[k].test(h.location.href))return h.ENVIRONMENTS[k.toString()];return h.ENVIRONMENTS.PROD};setLocationObject=function(k){k=k||window.location;h.location={port:k.port,host:k.host,href:k.href,hash:k.hash,origin:k.origin,search:k.search,protocol:k.protocol,hostname:k.hostname,pathname:k.pathname}};return{environment:h.ENVIRONMENTS.PROD,initAppConfiguration:function(h){setLocationObject(h);this.environment=findEnvironment()}}});define("locateme/core",["locateme/constants","locateme/config","locateme/utils"],function(h,k,f){var b={};b.utils=f;b.domainOverride=!1;b.spoofObject=null;k.initAppConfiguration();b.init=function(e,f,l){"function"==typeof e?(b.successCallback=e,b.errorCallback=f):(b.successCallback=f,b.errorCallback=l);e={spoofLocation:!1};e.siteid=window.site_id;f=h.location.search;f.match(/(spoof-location=)/g)?(e.spoofLocation=!0,f.match(/(country_code=)/g)&&(l=f.indexOf("country_code\x3d"),e.countryCode=f.substring(l+13,l+15))):null!=b.spoofObject&&(e.spoofLocation=b.spoofObject.spoofLocation,e.countryCode=b.spoofObject.countryCode,b.spoofObject.langid?e.langid=b.spoofObject.langid:b);f="";b.domainOverride||k.environment!==h.ENVIRONMENTS.DEV||(f=h.DOMAINS.DEV);b.utils.ajax({url:f+"/api/locate-me",data:e,done:p,fail:q})};b.saveUserPreference=function(f){var e=b.appContext;e.preference=e.sourceDomain;"LOCAL"===f&&(b.utils.setCookie("ipsnf3","v.3|"+e.countryCode+"|"+e.localSiteId+"|0|hsset"),e.preference=e.localSiteUrl)};b.getLocalURLObj=function(){return f.getFormatedURL(this.appContext.localSiteUrl,this.appContext.extraParameters)};b.getRequestedURLObj=function(){return f.getFormatedURL(this.appContext.sourceDomain)};var p=function(e){e.hasError?b.errorCallback(e.errorDetails):(b.appContext=e.redirectionDetails,b.utils.setCookie("ipsnf3","v.3|us|1|753|chandler"),b.successCallback(b.appContext))},q=function(e){e.response?b.errorCallback(e.response.errorDetails,e):b.errorCallback({status:"REQUEST_NOT_SENT",message:"Network failure or CORS issue."},e)};return b});
//# sourceMappingURL=locateme-bundle.js.map