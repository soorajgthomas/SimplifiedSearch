require(["gc/pageModel","dctk/dctk"],function(e,h){function g(e,f,g){if(window.dctk&&window.dctk.onReady)h.onReady(function(){h.logExperiment({id:7203,value:1,guid:e,tpid:f,eapid:g})})}var f=e.user.guid,l=e.site.tpid,n=e.site.eapid;if("object"===typeof e&&"object"===typeof e.user&&"object"===typeof e.site)try{g(f,l,n)}catch(k){logError("sf/abtests.js",Error("sfAbtests/call to logExperiments failed"),[])}});define("sfAbTest",["jquery","storefrontPageModel","cookies","dctk/dctk"],function(e,h,g,f){function l(){return-1<window.location.hostname.indexOf("localhost")||-1<window.location.hostname.indexOf("sandbox.dev")}function n(a){var b=g.get("abov"),c={experiments:[{id:a,value:0}],id:a,value:0};if("string"!==typeof b||0===b.length)return c;b=b.split(/[^\d]/);for(var d=0;d<b.length-2;d+=3)if(parseInt(b[d],10)===parseInt(a,10))return{experiments:[{id:b[d],value:b[d+2]}],id:b[d],value:b[d+2]};return c}var k=h.guid,m=h.userInteraction.context.site.tpid,p=h.userInteraction.context.site.eapid;return{_loggedTests:[],_forcedOverrides:{},get:function(a,b,c){try{var d=e.Deferred();if(l()){var q=n(a);if("function"===typeof c)c(q);else return d.resolve(q)}else if(k&&m&&a){if(b)if("function"===typeof c)this.log(a,c);else return this.log(a,c);else if(f.onReady(function(){f.evaluateExperiment({id:"string"===typeof a?parseInt(a,10):a,tpid:m,eapid:p,guid:k,callback:function(b){if(b&&b.error&&b.error.message)if("4301"===b.error.message.substr(0,4))d.reject(b);else{var a={notes:"sfAbTest/get"};b.experiments&&b.experiments[0]&&(a.ab=b.experiments[0].id);window.logError("sfError",b.error,a);void 0===c&&d.reject(b)}else"function"===typeof c?c(b):d.resolve(b)}})}),void 0===c)return d.promise();if(l()&&this._forcedOverrides.id&&this._forcedOverrides.value)return this._forcedOverrides}}catch(r){window.logError("sfError",r,{notes:"sfAbTest"})}},log:function(a,b){var c=e.Deferred();if(l()){var d=n(a);if("function"===typeof b)b(d);else return c.resolve(d)}else if(k&&m&&a&&(f.onReady(function(){f.evaluateExperimentAndLog({id:"string"===typeof a?parseInt(a,10):a,tpid:m,eapid:p,guid:k,callback:function(a){if(a&&a.error&&a.error.message){if("4301"!==a.error.message.substr(0,4)){var d={notes:"sfAbTest/log"};a.experiments&&a.experiments[0]&&(d.ab=a.experiments[0].id);window.logError("sfError",a.error,d);void 0===b&&c.reject(a)}}else"function"===typeof b?b(a):c.resolve(a)}})}),void 0===b))return c.promise()},override:function(a,b){this._forcedOverrides.id=a;this._forcedOverrides.value=b;var c=[a,"0",b].join("|");c=_.compact([g.get("abov"),c]).join(":");g.set("abov",c)}}});var test={};
//# sourceMappingURL=metrics.js.map