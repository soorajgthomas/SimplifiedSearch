require("gcw-custom-typeahead.hbs");define("gcwControllers","GcwActivitiesControllers GcwCarsControllers GcwCruisesControllers GcwFlightsControllers GcwHotelsControllers GcwPackagesControllers GcwRailsControllers".split(" "),function(g,f,e,b,a,d,c){return{activities:function(c,a,d,b){c=new g(c,a,d,b);c.init();return c},cars:function(c,a,d,b){c=new f(c,a,d,b);c.init();return c},cruises:function(c,a,d,b){c=new e(c,a,d,b);c.init();return c},flights:function(c,a,d,e){c=new b(c,a,d,e);c.init();return c},hotels:function(c,d,b,e){c=new a(c,d,b,e);c.init();return c},packages:function(c,a,b,e){c=new d(c,a,b,e);c.init();return c},rails:function(a,d,b,e){a=new c(a,d,b,e);a.init();return a}}});define("GcwActivitiesControllers",["classCheck","uitk","jquery","GcwUtilsControllers"],function(g,f,e,b){function a(c,k,b,e){g(this,a);d=this;d.$form=c;d.idSuffix=k;d.storedData=b;d.fieldsCollection=e}var d;a.prototype.init=function(){d.registerEvents();d.$form.data("gcw-original-action",d.$form.attr("action"));window.lx||(window.lx={})};a.prototype.registerEvents=function(){d.$form.on("change","[name\x3dgtDirection]",function(c){b.setHotel(d.idSuffix);b.swapGtSchedule(d.idSuffix,c.currentTarget.value)});f.subscribe("typeahead.opened",function(c,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+d.idSuffix||document.activeElement.id==="hotel"+d.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(a.results,function(c){c=this.regionNames.fullName;c=e("\x3cinput /\x3e").html(c).text();var a={};a.hotelId=this.hotelId;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[c]=a});else if(document.activeElement.id==="flight-origin"+d.idSuffix||document.activeElement.id==="flight"+d.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(a.results,function(c){c=this.hierarchyInfo.airport.airportCode;var a={};a.regionId=this.hierarchyInfo.airport.multicity;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];a.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[c]=a})});f.subscribe("typeahead.resultSelected",function(c,a){var k=d.idSuffix,e;document.activeElement.id==="flight-origin"+k?e="#hotel":document.activeElement.id==="flight"+k&&(e="#hotel-origin");e=d.$form.find(e+k);b.changeRegionIdOnAirportSelectionFromTASuggestion(k,a,e)});d.$form.on("focus","#hotel-origin"+d.idSuffix,function(){var c=d.$form.find("#hotel-origin"+d.idSuffix),a=d.$form.find("#flight"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,c,a)});d.$form.on("focus","#hotel"+d.idSuffix,function(){var c=d.$form.find("#hotel"+d.idSuffix),a=d.$form.find("#flight-origin"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,c,a)})};return a});
define("GcwCarsControllers","classCheck uitk jquery GcwUtilsControllers xdate GcwUtilsProcessingFunctions".split(" "),function(g,f,e,b,a,d){function c(a,d,b,e){g(this,c);k=this;k.$form=a;k.idSuffix=d;k.storedData=b;k.fieldsCollection=e}var k;c.prototype.init=function(){var c=k.storedData;k.registerEvents();window.lx||(window.lx={});c&&c["gcw-car-gt-type"]&&k.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage");k.carVendorToggle();k.$form.data("gcw-original-action",k.$form.attr("action"));0<k.$form.find(".gcw-cars-time-select").length&&k.LoadCarDateTime()};c.prototype.registerEvents=function(){var c=k.$form.data("gcw-error-msg-id");k.$form.on("change",".gcw-toggle-car-vendors, .gcw-toggle-discount-codes",function(){k.carVendorToggle()});k.$form.on("change","[name\x3dgtDirection]",function(c){b.setHotel(k.idSuffix);b.swapGtSchedule(k.idSuffix,c.currentTarget.value)});k.$form.on("change",".gcw-sub-nav-option",function(a){a=e(a.currentTarget).attr("value");"ttdGroundTransport"===a||"carsGroundTransport"===a?k.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage"):k.$form.data("gcw-error-msg-id",c)});f.subscribe("typeahead.opened",function(c,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+k.idSuffix||document.activeElement.id==="hotel"+k.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(a.results,function(c){c=this.regionNames.fullName;c=e("\x3cinput /\x3e").html(c).text();var a={};a.hotelId=this.hotelId;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[c]=a});else if(document.activeElement.id==="flight-origin"+k.idSuffix||document.activeElement.id==="flight"+k.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(a.results,function(c){c=this.hierarchyInfo.airport.airportCode;var a={};a.regionId=this.hierarchyInfo.airport.multicity;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];a.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[c]=a})});f.subscribe("typeahead.resultSelected",function(c,a){var r=k.idSuffix,p;document.activeElement.id==="flight-origin"+r?p="#hotel":document.activeElement.id==="flight"+r&&(p="#hotel-origin");p=k.$form.find(p+r);b.changeRegionIdOnAirportSelectionFromTASuggestion(r,a,p);p=e(a.element[0]).closest(".autocomplete").find('[data-provide\x3d"utypeahead"]');var l=p.data("gcw-storeable-name"),f=a.suggestionSelected.data.coordinates.lat,g=a.suggestionSelected.data.coordinates["long"];"gcw-destination"===l?(d.setInput(k.$form,"olat",f),d.setInput(k.$form,"olong",g),p.hasClass("gcw-carPickUp")&&p.hasClass("gcw-copy-pickup-to-dropoff")&&k.copyPickupToDropoff(r,a.suggestionSelected.data.regionNames.lastSearchName,f,g)):"gcw-carDropOff"===l&&(d.setInput(k.$form,"dlat",f),d.setInput(k.$form,"dlong",g))});k.$form.on("focus","#hotel-origin"+k.idSuffix,function(){var c=k.$form.find("#hotel-origin"+k.idSuffix),a=k.$form.find("#flight"+k.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(k.idSuffix,c,a)});k.$form.on("focus","#hotel"+k.idSuffix,function(){var c=k.$form.find("#hotel"+k.idSuffix),a=k.$form.find("#flight-origin"+k.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(k.idSuffix,c,a)})};c.prototype.carVendorToggle=function(){var c=k.$form.find(".gcw-toggle-car-vendors"),a=k.$form.find(".gcw-car-vendor-field"),d=a.find("select option:selected").val(),b=c.find("option:selected").data("gcw-toggled-vendor"),f=[],g=[];a.find("select option").each(function(c,a){0===e(a).parent("span").length&&e(a).wrap('\x3cspan style\x3d"display: none;" /\x3e');e(a).prop("disabled",!0).prop("selected",!1);f=e(a).data("gcw-discount-code-availability").split(",");-1<f.indexOf(b)&&g.push(e(a))});e.each(g,function(c,a){0<e(a).parent("span").length&&e(a).unwrap();e(a).prop("disabled",!1);e(a).val()===d&&e(a).prop("selected",!0)});a.find("select option:selected").val()||a.find("select option:enabled").eq(0).prop("selected",!0);c=k.discountCouponConfig(b);k.toggleCouponInputs(c)};c.prototype.toggleCouponInputs=function(c){var a={$corpCode:k.$form.find(".gcw-corp-code"),$rateCode:k.$form.find(".gcw-rate-code"),$couponCode:k.$form.find(".gcw-coupon-code"),$otherCouponCode:k.$form.find(".gcw-other-coupon-code")};e.each(a,function(c,a){a.addClass("gcw-disabled").find("input").prop("disabled",!0)});c&&(c.corp&&(a.$corpCode.removeClass("gcw-disabled").find("span").text(c.corp),a.$corpCode.find("input").prop("disabled",!1)),c.rate&&(a.$rateCode.removeClass("gcw-disabled").find("span").text(c.rate),a.$rateCode.find("input").prop("disabled",!1)),c.coupon&&(a.$couponCode.removeClass("gcw-disabled").find("span").text(c.coupon),a.$couponCode.find("input").prop("disabled",!1)),c.other&&(a.$otherCouponCode.removeClass("gcw-disabled").find("span").text(c.other),a.$otherCouponCode.find("input").prop("disabled",!1)))};c.prototype.discountCouponConfig=function(c){var a=k.$form.find(".gcw-car-vendor-field select option:selected").data("gcw-discount-code-data"),d={};if(a)switch(c){case "corp":a.split(",").forEach(function(c){"corp"===c.split("-")[0]&&(d[c.split("-")[0]]=c.split("-")[1])});break;case "special":a.split(",").forEach(function(c){"corp"!==c.split("-")[0]&&(d[c.split("-")[0]]=c.split("-")[1])})}return d};c.prototype.getCarNextPickupTime=function(c,a){var d="AM",k=c.getHours(),b=c.getMinutes();if(0<=b&&b<a)b=a;else{for(var r=a;b>=a;)a+=r;b=a;59<a&&(b=0,k+=1)}r=k;12<k&&24>k?(d="PM",r=k-12):0===k||24===k?r=12:12===k&&(d="PM");return(10>r?"0"+r:r).toString()+(0<=b&&10>b?"0"+b:b).toString()+d};c.prototype.getCarDateFormat=function(c,a){if(""===a||void 0===a)a="mm/dd/yyyy";return c.toString(a.replace(/m/g,"M").replace(/D/g,"d").replace(/Y/g,"y"))};c.prototype.LoadCarDateTime=function(){var c=new a,d=30,b=k.$form.find(".gcw-load-default-pickup-time option:eq(10)").val(),e=k.$form.find(".gcw-load-default-pickup-time option:eq(11)").val();""!==b&&void 0!==b&&""!==e&&void 0!==e&&(d=k.TimeIntervalCalculation(b,e));d=k.getCarNextPickupTime(c,d);k.$form.find(".gcw-load-default-pickup-time").attr("selected","selected").val(d);k.$form.find(".gcw-load-default-dropoff-time").attr("selected","selected").val(d);d=k.$form.find(".gcw-load-default-pickup-date").data("gcw-date-format");c=k.getCarDateFormat(c,d);k.$form.find(".gcw-load-default-pickup-date").val(c);c=(new a).addDays(4);c=k.getCarDateFormat(c,d);k.$form.find(".gcw-load-default-dropoff-date").val(c)};c.prototype.copyPickupToDropoff=function(c,a,b,e){k.$form.find(".gcw-carDropOff").val(a);f.prepFields();d.setInput(k.$form,"dlat",b);d.setInput(k.$form,"dlong",e)};c.prototype.TimeIntervalCalculation=function(c,a){var d=30;if(6===c.length&&6===a.length){var k=c.slice(0,2);var b=a.slice(0,2);var r=c.slice(2,4);var e=a.slice(2,4)}else k=c.slice(0,1),b=a.slice(0,1),r=c.slice(1,3),e=a.slice(1,3);b!==k?d=r===e?1<=b-k?60*(b-k):12===parseInt(k)?60*b:0:r>e?parseInt(e)+(60-r):e-r+(1<=b-k?60*(b-k):12===parseInt(k)?60*b:0):e>r&&(d=e-r);isNaN(d)&&(d=30);return d};return c});
define("GcwCruisesControllers",["classCheck"],function(g){function f(b,a,d,c){g(this,f);e=this;e.$form=b;e.idSuffix=a;e.storedData=d;e.fieldsCollection=c}var e;f.prototype.init=function(){e.registerEvents();e.setCruiseLine();e.setCruisesMonths()};f.prototype.registerEvents=function(){e.$form.on("change",".gcw-cruise-lane-select",function(b){e.cruiseLineSelected($(b.target))})};f.prototype.cruiseLineSelected=function(b){var a=e.$form.find(".gcw-cruise-lane select");b=e.$form.find(".gcw-cruise-ship");var d=e.$form.find(".cruise-ship");a=a.val();a=e.$form.find("#ship-name-"+a+e.idSuffix);b.addClass("gcw-disabled");0<a.length?a.parent().removeClass("gcw-disabled"):d.parent().removeClass("gcw-disabled")};f.prototype.setCruiseLine=function(){var b=e.$form.find(".gcw-cruise-lane select"),a;e.storedData&&(b.length&&(a=e.storedData[b.data("gcw-storeable-name")]),a&&(b=e.$form.find("#ship-name-"+a+e.idSuffix))&&0<b.length&&(e.$form.find(".cruise-ship").parent().addClass("gcw-disabled"),b.parent().removeClass("gcw-disabled"),(a=e.storedData[b.data("gcw-storeable-name")])&&b.val(a)))};f.prototype.setCruisesMonths=function(){var b=e.$form.find(".gcw-months-loc"),a=e.$form.find(".gcw-cruise-departure-month select"),d=a.data("gcw-date-value-format"),c=a.data("gcw-months-options")?a.data("gcw-months-options"):23;if(b.length&&1>=a.find("option").length){b=b.val().split(";");var k=new Date,r=k.getMonth();k=k.getFullYear();var p;e.storedData&&(p=e.storedData[a.data("gcw-storeable-name")]);for(var l=1;l<=c;l++){var f=b[r]+" "+k.toString();r+=1;if("YYYY-MM-DD"===d){var g=r.toString();g=1===g.length?"0"+g:g;g=k.toString()+"-"+g+"-01"}else"Mmm+DD+YYYY"===d?(g=b[r-1].slice(0,3),g+=1===l?"+13,":"+01,",g+=k.toString()):g=r.toString()+"X"+k.toString();k=11<r?k+1:k;r=11<r?0:r;p&&p===g?a.append("\x3coption selected value\x3d"+g+"\x3e"+f+"\x3c/option\x3e"):a.append("\x3coption value\x3d"+g+"\x3e"+f+"\x3c/option\x3e")}}};return f});
define("GcwFlightsControllers",["classCheck","GcwUtilsControllers","gcwDateFieldParser","gcwDateFieldValidations"],function(g,f,e,b){function a(c,k,b,e){g(this,a);d=this;d.$form=c;d.idSuffix=k;d.storedData=b;d.fieldsCollection=e}var d;a.prototype.init=function(){d.registerEvents();d.$form.hasClass("gcw-dynamic-leg-fields")&&d.loadMultiFlightLegData();void 0!==d&&void 0!==d.$form&&d.$form.hasClass("flights")&&d.$form.hasClass("gcw-grey-out-irrelevant-dates")&&d.setDatepickersFirstValidDateFromStorage();f.setRoomContainerClass(d.$form)};a.prototype.registerEvents=function(){d.$form.on("change",".gcw-rooms-field",function(c){f.setRoomContainerClass(d.$form)});f.addFieldHandler(d);f.removeFieldHandler(d);d.prepopulateNextOriginHandler(d);d.greyoutIrrelevantDatesHandler(d)};a.prototype.addFields=function(){var c=d.$form.find("[data-gcw-additional-fields]"),a=c.last().find(".datepicker"),b=c.last().attr("id"),e=a.attr("id"),l=c.last();a=d.$form.find("[data-gcw-add-fields]");var f=c.length+2,g,q;l.hasClass("gcw-disabled")?(l.removeClass("gcw-disabled"),d.removeFlightLegEnabled()):(c=l.clone().find("input").val("").removeAttr("data-typeahead").end(),c.attr("id",b.replace(f-1,f)),c.find(".datepicker").attr("id",e.replace(f-1,f)),b=c.find('input[type\x3d"text"]'),e=c.find('input[type\x3d"hidden"]'),b.each(function(){var c=$(this);d.setDataAttrForUta(c,f,!0);g=c.attr("data-gcw-storeable-name").slice(0,-1);q=c.attr("id");var a=q.replace(f-1,f),k=g+f;c.attr("data-gcw-storeable-name",k);c.data("gcw-storeable-name",k);c.attr("id",a);c.closest("label").attr("for",a);d.flightLegValid(c)}),e.each(function(){var c=$(this);g=c.attr("data-gcw-storeable-name");q=c.attr("id");var a=q.replace(f-1,f),d=g.replace(f-1,f);c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d);c.attr("id",a)}),a.before(c),d.removeFlightLegEnabled(),d.addFieldsInCollection(c),uitk.prepFields())};a.prototype.focusNextEl=function(){d.$form.find("input[type\x3dtext].gcw-origin").last().focus().select()};a.prototype.removeFlightLegEnabled=function(){var c=d.$form.find("[data-gcw-additional-fields]"),a=c.length;c=c.find("a");var b=$(".gcw-add-flight-leg");1<a?c.removeClass("gcw-disabled"):c.addClass("gcw-disabled");4<=a?b.addClass("gcw-disabled"):b.removeClass("gcw-disabled")};a.prototype.addFieldsInCollection=function(c){c.find("input").each(function(){d.fieldsCollection.add($(this))})};a.prototype.removeFieldsFromCollection=function(c){c.find("input").each(function(){d.fieldsCollection.remove($(this))})};a.prototype.removeFields=function(c){var a=d.$form.find("[data-gcw-additional-fields]"),b=a.attr("id"),e=!1,l;1<a.length?(c=c.closest(a),a=a.last().find("input"),c.remove(),a.each(function(){(l=$(this).data("gcw-storeable-name"))&&uitk.publish("gcw.storedDataUpdate",{targetStoreableName:l})}),a=d.$form.find("[data-gcw-additional-fields]"),d.readjustFlightLegNumbers(a),e=!0,d.removeFlightLegEnabled(),d.removeFieldsFromCollection(c)):(c.closest(a).attr("id",b),d.removeFlightLegEnabled());uitk.utils.focusElement(d.$form.find("#add-flight-leg"+d.idSuffix));return e};a.prototype.readjustFlightLegNumbers=function(c){var a,b,e,l;for(l=0;l<c.length;l++){var f=$(c[l]);var g=f.find(".datepicker");var q=parseInt(f.attr("id").match(/\d+/)[0],10);if(q!==l+2){var t=l+2;var u=f.attr("id");g=g.attr("id");f.attr("id",u.replace(q,t));f.find(".datepicker").attr("id",g.replace(q,t));f.find("input[type\x3dtext]").each(function(){var c=$(this);a=c.attr("id");b=c.attr("data-gcw-storeable-name").slice(0,-1);var k=a.replace(q,t),r=b+t;d.setDataAttrForUta(c,t,!1,q);c.attr("id",k);c.attr("data-gcw-storeable-name",r);c.data("gcw-storeable-name",r);c.parent("label").attr("for",k)});f.find("input[type\x3dhidden]").each(function(){var c=$(this);e=c.attr("data-gcw-storeable-name");a=c.attr("id");var d=a.replace(q,t),k=e.replace(q,t);c.attr("data-gcw-storeable-name",k);c.data("gcw-storeable-name",k);c.attr("id",d)})}}};a.prototype.setDataAttrForUta=function(c,a,d,b){d=d?a-1:b;c.hasClass("datepicker-trigger-input")||(b=c.attr("data-airport_code_element").replace(d,a),c.attr("data-airport_code_element",b),c.data("airport_code_element",b),b=c.attr("data-hotel_id_element").replace(d,a),c.attr("data-hotel_id_element",b),c.data("hotel_id_element",b),b=c.attr("data-lat_long_element").replace(d,a),c.attr("data-lat_long_element",b),c.data("lat_long_element",b),b=c.attr("data-region_id_element").replace(d,a),c.attr("data-region_id_element",b),c.data("region_id_element",b),b=c.attr("data-region_type_element").replace(d,a),c.attr("data-region_type_element",b),c.data("region_type_element",b),b=c.attr("data-station_code_element").replace(d,a),c.attr("data-station_code_element",b),c.data("station_code_element",b),b=c.attr("data-city_element").replace(d,a),c.attr("data-city_element",b),c.data("station_code_element",b),b=c.attr("data-country_code_element").replace(d,a),c.attr("data-country_code_element",b),c.data("country_code_element",b),b=c.attr("data-category_element").replace(d,a),c.attr("data-category_element",b),c.data("category_element",b),b=c.attr("data-heds_element").replace(d,a),c.attr("data-heds_element",b),c.data("heds_element",b),b=c.attr("data-search_name_element").replace(d,a),c.attr("data-search_name_element",b),c.data("search_name_element",b),b=c.attr("data-point_of_supply_element").replace(d,a),c.attr("data-point_of_supply_element",b),c.data("point_of_supply_element",b),a=c.attr("data-ta_element").replace(d,a),c.attr("data-ta_element",a),c.data("ta_element",a))};a.prototype.loadMultiFlightLegData=function(){var c=0,a;if(d.storedData)for(a in d.storedData)3===a.indexOf("-multidest-")&&c++;1<c&&d.addFieldsFromStorage(c);return[c]};a.prototype.addFieldsFromStorage=function(c){var a=3;for(a;a<=c+1;a++)d.addFields(),d.$form.find(".gcw-multidest-flights-container").find(".gcw-storeable").each(function(){var c=$(this),a=c.data("gcw-storeable-name");c.val(d.storedData[a])})};a.prototype.setDatepickersFirstValidDateFromStorage=function(){var c=[];c=c.concat(d.$form.find('.gcw-date-field[data-gcw-field-available-for-sub-nav-option*\x3d"multi"]').get());c=c.concat(d.$form.find(".gcw-multidest-flights-container").find(".gcw-multidest-date-field").get());$.each(c,function(c,a){var k=$(a),r=d.getNextDateField(k);k=k.find("input");0<r.length&&b.gcw_is_valid_date(e.parseDateField(k),null,k).valid&&d.updateDatepickerFirstValidDate(r,k.val())})};a.prototype.flightLegValid=function(c){c.parent().removeClass("invalid")};a.prototype.getNextOriginLocationField=function(c){return c.hasClass("gcw-location-field")?d.$form.find('.gcw-multidest-flights-container [data-gcw-additional-fields\x3d"flightlegs"]:eq(0) .gcw-multidest-location-field:eq(0)'):c.parents('[data-gcw-additional-fields\x3d"flightlegs"]').next().find(".gcw-multidest-location-field:eq(0)")};a.prototype.copyTypeaheadState=function(c,a){a.find('[data-provide\x3d"utypeahead"]').val(c.find('[data-provide\x3d"utypeahead"]').val());$.each(c.find('input[type\x3d"hidden"][data-gcw-storeable-name]'),function(c,d){var b=$(d).data("gcw-storeable-name");b=b.substr(b.lastIndexOf("-")+1);a.find('[data-gcw-storeable-name$\x3d"'+b+'"]').val($(d).val())});uitk.prepFields()};a.prototype.getNextDateField=function(c){return c.hasClass("gcw-date-field")?d.$form.find('.gcw-multidest-flights-container [data-gcw-additional-fields\x3d"flightlegs"]:eq(0) .gcw-multidest-date-field'):c.parents('[data-gcw-additional-fields\x3d"flightlegs"]').next().find(".gcw-multidest-date-field")};a.prototype.updateDatepickerFirstValidDate=function(c,a){var d=c.find('[data-control\x3d"datepicker"]');0<d.length&&d.uitk_datepicker("updateOptions",{firstValidDate:a});return d};a.prototype.prepopulateNextOriginHandler=function(c){uitk.subscribe("typeahead.resultSelected",function(a,d){if(c.$form.is(":visible")){var b=d.element.parents('[data-control\x3d"autocomplete"]').find('[data-provide\x3d"utypeahead"]'),k=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-prepopulate-flying-from")&&0<b.length&&b.hasClass("gcw-destination")&&
0<k.length&&"multi"===k.data("gcw-sub-nav-option-name")&&(b=b.parents('[data-control\x3d"autocomplete"]').parent(),k=c.getNextOriginLocationField(b),0<b.length&&0<k.length&&(c.copyTypeaheadState(b,k),k.next().find('[data-provide\x3d"utypeahead"]').focus()))}})};a.prototype.greyoutIrrelevantDatesHandler=function(c){uitk.subscribe("datepicker.selectDate",function(a,d){if(c.$form.is(":visible")){var b=d.element,k=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<b.length&&0<k.length&&"multi"===k.data("gcw-sub-nav-option-name")&&(k=b.parents('[data-control\x3d"datepicker"]').parent(),k=c.getNextDateField(k),c.updateDatepickerFirstValidDate(k,b.val()))}});uitk.subscribe("gcw.flight.addedFields",function(a,d){if(c.$form.is(":visible")){var k=d.prevElement,r=d.element,f=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<f.length&&"multi"===f.data("gcw-sub-nav-option-name")&&0<r.length&&0<k.length&&(k=k.find(".gcw-multidest-date-field").find("input"),r=r.find(".gcw-multidest-date-field"),b.gcw_is_valid_date(e.parseDateField(k),null,k).valid&&c.updateDatepickerFirstValidDate(r,k.val()))}});uitk.subscribe("gcw.flight.removedFields",function(a,d){if(c.$form.is(":visible")){var k=0<d.prevElement.length?d.prevElement:c.$form.find(".gcw-date-field:visible").parent(),r=d.nextElement,f=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<f.length&&"multi"===f.data("gcw-sub-nav-option-name")&&0<k.length&&0<r.length&&(k=0<k.find(".gcw-multidest-date-field").length?k.find(".gcw-multidest-date-field").find("input"):k.find(".gcw-date-field").find("input"),r=r.find(".gcw-multidest-date-field"),b.gcw_is_valid_date(e.parseDateField(k),null,k).valid&&c.updateDatepickerFirstValidDate(r,k.val()))}})};return a});define("GcwHotelsControllers",["classCheck","jquery","GcwUtilsControllers"],function(g,f,e){function b(d,c,k,r){g(this,b);a=this;a.$form=d;a.idSuffix=c;a.storedData=k;a.fieldsCollection=r;a.travelerSelectorEnabled=a.$form.hasClass("gcw-traveler-selector")}var a;b.prototype.init=function(){a.registerEvents();e.setRoomContainerClass(a.$form);a.setNRoomsClass();a.disableFlightAndCar()};b.prototype.registerEvents=function(){var d=a.$form.find(".gcw-guests-select"),c="#hotel-rooms"+a.idSuffix+", #hotel-1-adults"+a.idSuffix+", #hotel-1-children"+a.idSuffix;d.length&&(a.$form.on("change",c,function(){a.applyGuestsRules()}),a.$form.on("guestsChange",d,function(){a.applyGuestsRules();e.setRoomContainerClass(a.$form)}),a.$form.on("change",d,function(c){var d=a.$form.find(".gcw-guests-select select").data("gcw-guests-toggled-field-on-value").toString();f(c.target).val()===d&&f(c.target).addClass("guestsInactive");a.applyGuestsRules()}),a.applyGuestsRules());a.$form.on("change setNRoomsClass",".gcw-rooms-field",function(c){e.setRoomContainerClass(a.$form);a.setNRoomsClass();a.disableFlightAndCar()})};b.prototype.applyGuestsRules=function(){var d=a.$form.find(".gcw-guests-select select").hasClass("guestsInactive"),c=a.$form.find(".hotels.room-data"),b=c.find(".num-adults").val()[0],r=c.find(".num-children").val()[0],e=a.$form.find(".gcw-rooms-field").find("select").val(),l=!1;c=a.$form.find(".gcw-guests-select");c=a.getGuestsRules(c.find("select").data("gcw-guests-field-visible-on"));f.each(c,function(c,a){a.adults===b&&a.children===r&&a.rooms===e&&(l=!0)});d?a.toggleGuestsField(!1):a.toggleGuestsField(l)};b.prototype.setNRoomsClass=function(){var d=a.$form.find(".gcw-rooms-container");if(d.length){var c=a.$form.find(".gcw-rooms-field").find("select").val(),b=d.attr("class").split(" "),r;f.each(b,function(c,a){-1<a.indexOf("total-rooms")&&(r=b.indexOf(a))});d.removeClass();r&&b.splice(r,1);b.push("gcw-total-rooms-"+c);d.addClass(b.toString().replace(/,/g," "))}};b.prototype.getGuestsRules=function(a){var c={};f.each(a.split(","),function(a,d){c["rule"+a]={};f.each(d.split("\x26"),function(d,b){c["rule"+a][b.split("-")[0]]=b.split("-")[1]})});return c};b.prototype.disableFlightAndCar=function(){var d=a.$form.find(".gcw-hotel-add-flight"),c=a.$form.find(".gcw-hotel-add-car"),b=a.$form.find("#disable-flight-package-wrapper"+a.idSuffix),r=a.$form.find("#disable-car-package-wrapper"+a.idSuffix),e=a.$form.find(".gcw-rooms-field");e=a.travelerSelectorEnabled?e.val():e.find("select").val();3<("group"===e?9:e)?(d.addClass("gcw-disabled"),c.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),r.removeClass("gcw-disabled")):(d.removeClass("gcw-disabled"),c.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),r.addClass("gcw-disabled"))};b.prototype.toggleGuestsField=function(d){var c=a.$form.find(".gcw-guests-select"),b=a.$form.find(".gcw-rooms-field"),e=a.$form.find(".hotels.room-data");d?(c.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),e.first().addClass("gcw-disabled")):(c.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),e.first().removeClass("gcw-disabled"))};return b});define("GcwPackagesControllers",["classCheck","GcwUtilsControllers"],function(g,f){function e(a,d,c,k){g(this,e);b=this;b.$form=a;b.idSuffix=d;b.storedData=c;b.fieldsCollection=k}var b;e.prototype.init=function(){b.registerEvents();f.setRoomContainerClass(b.$form)};e.prototype.registerEvents=function(){var a=b.$form.find(".gcw-rooms-field");b.$form.on("change",a,function(a){f.setRoomContainerClass(b.$form)});b.$form.on("change",".gcw-partial-hotel",function(a){b.reflectHotelPartialStayDates($(a.target))})};e.prototype.reflectHotelPartialStayDates=function(a){if(a.prop("checked")){a=b.$form.find(".gcw-start-date:visible").first();var d=b.$form.find(".gcw-partial-start-date:visible").first(),c=b.$form.find(".gcw-end-date:visible").first(),k=b.$form.find(".gcw-partial-end-date:visible").first();""===d.val()&&d.val(a.val());""===k.val()&&k.val(c.val())}};return e});require("uitk_localized_dateApi");
define("GcwRailsControllers",["classCheck","uitk","jquery","GcwUtilsProcessingFunctions"],function(g,f,e,b){function a(c,b,e,p){g(this,a);d=this;d.$form=c;d.idSuffix=b;d.storedData=e;d.fieldsCollection=p}var d;a.prototype.init=function(){d.registerEvents();d.loadRailcardData();if(d.isCrossSupply()){var c=d.$form.find(".gcw-origin:visible");(c=b.getUTAFeature(c,"point_of_supply"))&&d.loadFormFieldsBasedOnPOS(c)}c=d.$form.find(".gcw-rails-time-select");if(0<c.length){var a=d.getDepartureTime();c.each(function(c,d){e(d).val(a)})}};a.prototype.registerEvents=function(){d.$form.on("click",".gcw-add-fields",function(c){c.preventDefault();d.addFields();d.focusSelect()});d.$form.on("click",".gcw-remove-fields",function(c){var a=e(c.target);c.preventDefault();d.removeFields(a)});d.$form.on("change railcardEnabled",".gcw-railcard-select",function(c){c=e(c.target);d.railcardNumberEnabled(c);d.railcardValid(c)});var c=d.isCrossSupply();if(d.$form.hasClass("gcw-rails-cross-country-class")||c){var a,b,p,l,g;f.subscribe("typeahead.suggestion_selected",function(k,e){if(c){g=e.suggestion.data.hierarchyInfo.rails.pointOfSupply;var r=g;if(r.constructor===Array)b:{r=d.$form.data("siteid");for(var f=d.$form.find(".gcw-supply-mapping-with-siteid").data("gcw-supply-mapping-with-siteid").split(";"),m=0,n=f.length;m<n;m++)if(+f[m].split(":")[1]===+r){r=f[m].split(":")[0];break b}r=void 0}g=r;d.loadFormFieldsBasedOnPOS(g)}p=e.suggestion.data.hierarchyInfo.country.name;-1<e.domElementId.indexOf("rail-destination")?b=-1<["Ungarn","Slowenien"].indexOf(p):a=-1<["Ungarn","Slowenien"].indexOf(p);l=a||b;d.$form.find(".gcw-cross-country").val(l)})}};a.prototype.isCrossSupply=function(){return"true"===e(".gcw-rails-cross-supply-flag").val()};a.prototype.loadFormFieldsBasedOnPOS=function(c){var a=d.$form.find(".datepicker");var b=d.$form.find(".gcw-"+c.toLowerCase()+"-config").data("gcw-"+c.toLowerCase()+"-config");c=b.lastValidTravelDate;var e=d.getLastValidTravelDate(c);var l=b.anytimeSearchSupported;var f=b.railCardOptions;var g=b.railcardsVisible;d.updateDateOptions(a,c,e.shortDate());d.updateAnytimeSelect(l);d.updateRailCard(g,f);d.updateValidation(b)};a.prototype.updateValidation=function(c){d.$form.data("gcw-max-travelers",c.maxTravelers);d.$form.data("rail-age-boundary",c.ageBoundary);d.$form.data("rail-accompanying-age",c.accompanyingAge)};a.prototype.updateRailCard=function(c,a){var b=d.$form.find(".railcard-data");if(c){var k=d.$form.find(".gcw-railcard-select");b.removeClass("hidden");k.find("option").remove().end();k.val(d.$form.find(".gcw-railcard-select option:first").val());e.each(a,function(){e("\x3coption/\x3e",{value:this.value,text:this.label}).appendTo(k)});d.railcardNumberEnabled(k);d.$form.find(".gcw-remove-fields").trigger("click")}else b.addClass("hidden")};a.prototype.updateAnytimeSelect=function(c){var a=d.$form.find("select[name\x3deTime], select[name\x3dsTime]"),b=a.find("option:first");c?b.show():(b.hide(),c=d.getDepartureTime(),a.val(c))};a.prototype.updateDateOptions=function(c,a,d){c.uitk_datepicker("updateOptions",{lastValidDate:d,maxRangeLength:a-1});c.data("last-valid-date",d);c.data("max-range-length",a-1)};a.prototype.getLastValidTravelDate=function(c){return f.utils.createLocalizedDate((new XDate).addDays(c-1),f.locale)};a.prototype.loadRailcardData=function(){var c=0,a={},b;if(d.storedData)for(b in d.storedData)3===b.indexOf("-railcard-")&&(a[b]=d.storedData[b],c++);c/=2;d.addFieldsFromStorage(a,c);d.enableRailCardSelectFromStorage();return[a,c]};a.prototype.addFieldsFromStorage=function(c,a){var b=1,k=[];for(b;b<=a;b++){var e=c["gcw-railcard-card-"+b];var f=c["gcw-railcard-amount-"+b];e&&(d.addFields(e,f),k.push([e,f]))}return k};a.prototype.addFields=function(c,a){var b=d.$form.find("[data-gcw-additional-fields]"),k=b.last().attr("id"),l=b.find("select"),f=b.last(),g=d.$form.find("[data-gcw-add-fields]"),q=b.length,t,u;f.hasClass("gcw-disabled")?(f.removeClass("gcw-disabled"),1<l.length&&1<l.val().length&&l.val(""),c&&(l.first().val(c),l.last().val(a)),d.railcardNumberEnabled(l.first())):(b=f.clone(),b.attr("id",k.replace(q-1,q)),k=b.find("select"),k.each(function(){var c=e(this);t=c.attr("data-gcw-storeable-name").slice(0,-1);u=c.attr("id");var a=u.replace(q-1,q),d=t+q;c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d);c.attr("id",a);c.closest("label").attr("for",a)}),g.before(b),c&&(k.first().val(c),k.last().val(a)),d.railcardNumberEnabled(k.first()))};a.prototype.railcardNumberEnabled=function(c){var a=c.parents("label").siblings("label"),d=a.siblings("a"),b=a.parents("fieldset").next(".gcw-advanced-options");""!==c.val()?(a.removeClass("gcw-disabled"),d.removeClass("gcw-disabled"),b.removeClass("gcw-disabled")):(a.addClass("gcw-disabled"),d.addClass("gcw-disabled"),b.addClass("gcw-disabled"))};a.prototype.enableRailCardSelectFromStorage=function(){var a=d.$form.find(".gcw-railcard-select");e.each(a,function(a,c){setTimeout(function(){e(c).trigger("railcardEnabled")},20)})};a.prototype.getDepartureTime=function(a){var c=a||new Date;c.setMinutes(30*Math.ceil((c.getMinutes()+30)/30));a=c.getHours();c=c.getMinutes();c=10>c?"0"+c:c.toString();a=10>a?"0"+a:a.toString();return a+c};a.prototype.focusSelect=function(){var a=d.$form.find("select.gcw-railcard-select").last();f.utils.focusElement(a)};a.prototype.removeFields=function(a){var c=d.$form.find("[data-gcw-additional-fields]"),b=c.attr("id"),e=!1;if(1<c.length){e=c.last().find("select");b=e.first().data("gcw-storeable-name");var l=e.eq(1).data("gcw-storeable-name");a.closest(c).remove();e=d.$form.find("[data-gcw-additional-fields]");a=e.last().find("select").first();d.readjustRailcardsNumbers(e);e=!0;d.railcardNumberEnabled(a);b&&f.publish("gcw.storedDataUpdate",{targetStoreableName:b});l&&f.publish("gcw.storedDataUpdate",{targetStoreableName:l})}else a.closest(c).attr("id",b),b=c.find("select"),""!==b.val()&&(b.first().val(""),b.last().val("1")),d.railcardNumberEnabled(b.first());f.utils.focusElement(d.$form.find("#add-rail-card"+d.idSuffix));return e};a.prototype.readjustRailcardsNumbers=function(a){var c,d,b;for(b=0;b<a.length;b++){var l=e(a[b]);var f=parseInt(l.attr("id").match(/\d+/)[0],10);if(f!==b){var g=b;var q=l.attr("id");l.attr("id",q.replace(f,g));l.find("select").each(function(){var a=e(this);c=a.attr("id");d=a.attr("data-gcw-storeable-name").slice(0,-1);var b=c.replace(f,g),k=d+g;a.attr("id",b);a.attr("data-gcw-storeable-name",k);a.data("gcw-storeable-name",k);a.parent("label").attr("for",b)})}}};a.prototype.railcardValid=function(a){a.parent().removeClass("invalid")};return a});
define("GcwUtilsControllers",["classCheck"],function(g){function f(){g(this,f)}f.setHotel=function(e){var b=$("#hotel-origin"+e).val(),a=$("#hotel"+e).val();a&&!b&&$("#hotel-origin"+e).val(a);b&&!a&&$("#hotel"+e).val(b)};f.swapGtSchedule=function(e,b){var a=$("input#gt-hotel-departure-date"+e),d=$("#gt-dropoff-time"+e),c=$("input#gt-origin-hotel-departure-date"+e),k=$("#gt-hotel-departure-time"+e);"to-airport"===b?(c.val(a.val()),k.val(d.val())):(a.val(c.val()),d.val(k.val()))};f.setRoomContainerClass=function(e){var b=$(".gcw-rooms-container");e=e.find(".gcw-rooms-field").find("select").val();void 0!==e&&(1<e||"group"===e?b.addClass("clearBoth"):b.removeClass("clearBoth"),1<e?b.addClass("rooms-wrapping"):b.removeClass("rooms-wrapping"))};f.emptyEssLastSearchCacheForGTHotelFieldOnFocus=function(e,b,a){!a.val().length&&b.data("autocomplete")&&(b.data("autocomplete").opts.regionid="0",b.data("autocomplete").opts.rid="0",b.data("autocomplete").cache={})};f.changeRegionIdOnAirportSelectionFromTASuggestion=function(e,b,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="flight-origin"+e||document.activeElement.id==="flight"+e)if(e=b.element[0].dataset.airportCode,window.lx.cache.airportSuggestionsMap&&(e=window.lx.cache.airportSuggestionsMap[e]))a.data("regionid",e.regionId),a.data("rid",e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.regionid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.rid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").cache={})};f.addFieldHandler=function(e){e.$form.on("click",".gcw-add-fields",function(b){b.preventDefault();b=$(b.target);if(b.parents("form").hasClass("gcw-prepopulate-flying-from")){var a=b.parent().prev().find(".gcw-multidest-location-field:eq(1)");e.addFields();var d=e.getNextOriginLocationField(a);0<a.length&&0<a.find('[data-provide\x3d"utypeahead"]').val().trim().length&&0<d.length?(e.copyTypeaheadState(a,d),d.next().find('[data-provide\x3d"utypeahead"]').focus()):e.focusNextEl()}else e.addFields(),e.focusNextEl();uitk.publish("gcw."+b.parents("form").data("lob-form")+".addedFields",{prevElement:e.$form.find("[data-gcw-additional-fields]").last().prev(),element:e.$form.find("[data-gcw-additional-fields]").last()})})};f.removeFieldHandler=function(e){e.$form.on("click",".gcw-remove-fields",function(b){b.preventDefault();b=$(b.target);var a=b.parents("[data-gcw-additional-fields]"),d=a.prev(".gcw-multi-flight-data"),c=a.next(".gcw-multi-flight-data");a=a.parents("form").data("lob-form");e.removeFields(b);uitk.publish("gcw."+a+".removedFields",{prevElement:d,nextElement:c})})};return f});define("gcwDataPreloadingFunctions",["GcwCruisesDataPreloadingFunctions","GcwHotelsDataPreloadingFunctions","GcwFlightsDataPreloadingFunctions","GcwThreeppDataPreloadingFunctions","GcwCarsDataPreloadingFunctions"],function(g,f,e,b,a){return{cruises:function(a,c,b){a=new g(a,c);a.init();return a},hotels:function(a,c,b){a=new f(a,c);a.init();return a},flights:function(a,c,b){a=new e(a,c);a.init();return a},threepp:function(a,c,k){a=new b(a,c);a.init();return a},cars:function(d,c,b){d=new a(d,c);d.init();return d}}});
define("GcwCruisesDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(c,b,e){g(this,a);d=this;d.$form=c;d.storedData=b;d.ignoreSavedFormData=e}var d;a.prototype.init=function(){d.registerEvents();0<d.$form.find(".cruise-earliest-departure-date").length?d.setOptions(!0):d.setOptionsForDatePicker(!0)};a.prototype.registerEvents=function(){d.$form.on("change",".cruise-destination, .cruise-earliest-departure-date, .gcw-start-date, .gcw-end-date",function(a){0<d.$form.find(".cruise-earliest-departure-date").length?d.setOptions(!1):d.setOptionsForDatePicker(!1)});0===d.$form.find(".cruise-earliest-departure-date").length&&e.subscribe("datepicker.selectDate",function(a,b){var c=b.element;0<d.$form.find(c).length&&(c.hasClass("gcw-start-date")||c.hasClass("gcw-end-date"))&&d.setOptionsForDatePicker(!1)})};a.prototype.loadOptions=function(a){var c={},b="",e=d.$form.find(".cruise-destination"),l=e.val();a&&a.destinationsMap&&1<=Object.keys(a.destinationsMap).length&&(c["Most Popular"]=[],c["Other Destinations"]=[],f.each(a.destinationsMap,function(a,d){d&&d.popular?c["Most Popular"].push({value:d.deepLink,label:d.displayText,index:d.index}):c["Other Destinations"].push({value:d.deepLink,label:d.displayText,index:d.index})}),c["Most Popular"].sort(function(a,c){return a.index-c.index}),c["Other Destinations"].sort(function(a,c){return a.label>c.label}));f.each(c,function(a,c){c&&0<c.length&&(b+='\x3coptgroup label\x3d"'+a+("Most Popular"===a?' ---"\x3e':'"\x3e'),f.each(c,function(a,c){b+='\x3coption value\x3d"'+c.value+'"\x3e'+c.label+"\x3c/option\x3e"}),b+="\x3c/optgroup\x3e")});""!==b&&(e.find("option").not(":first").remove(),e.find("optgroup").remove(),e.find("option").after(b));e.val(l)};a.prototype.selectOptions=function(a,k){var c=d.$form.find(".cruise-destination"),p=d.$form.find(".cruise-earliest-departure-date");c.val("");p.val("");if(k&&d.storedData&&!d.ignoreSavedFormData){var l=c.data("gcw-storeable-name");if(l=d.storedData[l])c.val(l),e.publish("gcw.inputChanged",{input:c,value:l});l=p.data("gcw-storeable-name");if(l=d.storedData[l])p.val(l),e.publish("gcw.inputChanged",{input:p,value:l})}else if(a.destinations&&""!==a.destinations&&c.val(a.destinations),a.earliestDeptDate&&""!==a.earliestDeptDate){var f=a.earliestDeptDate.split("-");c=f[0];l=("0"+f[1]).slice(-2);f=("0"+f[2]).slice(-2);c=new b(c+"-"+l+"-"+f);c=d.getFormattedDate(c,!0,!1);p.val(c)}};a.prototype.selectOptionsForDatePicker=function(a,k){var c=d.$form.find(".cruise-destination"),p=d.$form.find(".gcw-start-date"),l=d.$form.find(".gcw-end-date");c.val("");if(k&&d.storedData&&!d.ignoreSavedFormData){var f=c.data("gcw-storeable-name");if(f=d.storedData[f])c.val(f),e.publish("gcw.inputChanged",{input:c,value:f});f=p.data("gcw-storeable-name");if(f=d.storedData[f])p.val(f),e.publish("gcw.inputChanged",{input:p,value:f});f=l.data("gcw-storeable-name");if(f=d.storedData[f])l.val(f),e.publish("gcw.inputChanged",{input:l,value:f})}else{a.destinations&&""!==a.destinations&&c.val(a.destinations);if(a.earliestDeptDate&&""!==a.earliestDeptDate){var g=a.earliestDeptDate.split("-");f=g[0];c=("0"+g[1]).slice(-2);g=("0"+g[2]).slice(-2);c=new b(f+"-"+c+"-"+g);c=d.getFormattedDate(c,!0,!0,!0);p.val(c)}a.latestDeptDate&&""!==a.latestDeptDate&&(p=a.latestDeptDate.split("-"),f=p[0],c=("0"+p[1]).slice(-2),g=("0"+p[2]).slice(-2),c=new b(f+"-"+c+"-"+g),c=d.getFormattedDate(c,!0,!0),l.val(c))}};a.prototype.setOptions=function(a,b){var c=d.$form.find(".cruise-destination"),k=d.$form.find(".cruise-earliest-departure-date"),e=d.getSearchParameters(a),g=function(c){d.loadOptions(c);d.populateDataForMonthsFilter(c);d.selectOptions(e,a)};b=b||g;c.prop("disabled",!0);k.prop("disabled",!0);f.ajax({data:e,dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(b).always(function(a){c.prop("disabled",!1);k.prop("disabled",!1)})};a.prototype.setOptionsForDatePicker=function(a,b){var c=d.$form.find(".cruise-destination"),k=d.$form.find(".gcw-start-date"),e=d.$form.find(".gcw-end-date"),g=k.val(),n=e.val();if((""===g||d.isValidDateString(g))&&(""===n||d.isValidDateString(n))){var q=d.getSearchParametersForDatePicker(a);g=function(c){d.loadOptions(c);d.populateDataForDatePicker(c);d.selectOptionsForDatePicker(q,a)};b=b||g;c.prop("disabled",!0);k.prop("disabled",!0);e.prop("disabled",!0);f.ajax({data:q,dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(b).always(function(a){c.prop("disabled",!1);k.prop("disabled",!1);e.prop("disabled",!1)})}};a.prototype.populateDataForDatePicker=function(a){var c=d.$form.find(".gcw-start-date").closest("div"),b=d.$form.find(".gcw-end-date").closest("div");a&&(a={firstValidDate:a.searchFiltersListType.searchFilters.departureDates[0],lastValidDate:a.searchFiltersListType.searchFilters.departureDates[a.searchFiltersListType.searchFilters.departureDates.length-1],blackoutDates:{dates:a.searchFiltersListType.searchFilters.departureDates,blackoutDatesFlag:!1}},c.attr("data-first-valid-date",a.firstValidDate),c.attr("data-last-valid-date",a.lastValidDate),c.attr("data-blackout-dates",JSON.stringify(a.blackoutDates)),c.uitk_datepicker("updateOptions",a),b.attr("data-first-valid-date",a.firstValidDate),b.attr("data-last-valid-date",a.lastValidDate),b.attr("data-blackout-dates",JSON.stringify(a.blackoutDates)),b.uitk_datepicker("updateOptions",a))};a.prototype.populateDataForMonthsFilter=function(a){if(a&&a.searchFiltersListType&&a.searchFiltersListType.searchFilters&&a.searchFiltersListType.searchFilters.departureMonths){var c=d.$form.find(".cruise-earliest-departure-date"),b="";a.searchFiltersListType.searchFilters.departureMonths.forEach(function(a){var c=a.replace("-"," ");a=a.substring(0,3);a=(new Date(Date.parse(a+"  1, 2012"))).getMonth()+1;10>a&&(a="0"+a);var d=c.split(" ")[1];b+='\x3coption value\x3d"'+(d+"-"+a+"-01")+'"\x3e'+c+"\x3c/option\x3e"});""!==b&&(c.find("option").not(":first").remove(),c.find("option").after(b))}};a.prototype.getFormattedDate=function(a,b,e){var c="";d.isValidDate(a)&&(b?(b=("0"+a.getDate()).slice(-2),c=("0"+(a.getMonth()+1)).slice(-2)):(b=a.getDate(),c=a.getMonth()+1),a=a.getFullYear(),c=e?c+"/"+b+"/"+a:a+"-"+c+"-"+b);return c};a.prototype.getSearchParametersForDatePicker=function(a){var c=d.$form.find(".cruise-destination"),e=d.$form.find(".gcw-start-date"),f=d.$form.find(".gcw-end-date");if(a&&d.storedData){var l=d.storedData[c.data("gcw-storeable-name")];var g=d.storedData[e.data("gcw-storeable-name")];var n=d.storedData[f.data("gcw-storeable-name")]}a=l||c.val();e=g||e.val();f=n||f.val();n={};""!==a?n.destinations=a:""===e?n.destinations="":""===f&&(n.destinations="");""!==e&&(g=new b(e),n.earliestDeptDate=d.getFormattedDate(g,!1,!1));""!==f&&(f=d.reflectEndDateValueForDatePicker(e,f),n.latestDeptDate=d.getFormattedDate(new b(f),!1,!1));if(""!==e||""!==f)n.offset="1";n.adults="2";return n};a.prototype.getSearchParameters=function(a){var c=d.$form.find(".cruise-destination"),e=d.$form.find(".cruise-earliest-departure-date");if(a&&d.storedData){var f=d.storedData[c.data("gcw-storeable-name")];var l=d.storedData[e.data("gcw-storeable-name")]}a=f||c.val();l=l||e.val();e={};""!==a?e.destinations=a:""===l&&(e.destinations="");""!==l&&(l=new b(l),a=new b(l.getFullYear(),l.getMonth()+1,0),e.earliestDeptDate=d.getFormattedDate(l,!1,!1),e.latestDeptDate=d.getFormattedDate(a,!1,!1));return e};a.prototype.isValidDateString=function(a){a=new Date(a);return null!==a&&"undefined"!==typeof a&&"invalid date"!==(new b(a))[0].toString().toLowerCase()};a.prototype.isValidDate=function(a){return null!==a&&"undefined"!==typeof a&&"invalid date"!==(new b(a))[0].toString().toLowerCase()};a.prototype.reflectEndDateValueForDatePicker=function(a,k){var c=new b(d.getFormattedDate(new b(a),!0,!0)),e=new b(d.getFormattedDate(new b(k),!0,!0)),f=new b(c),g=new b(e);return c&&"Invalid Date"!==c.toString()?e&&0>f.diffDays(g)||""===k?f.toString("MM/dd/yyyy"):g.toString("MM/dd/yyyy"):
k};return a});define("GcwHotelsDataPreloadingFunctions",["classCheck","xdate"],function(g,f){function e(a,d){g(this,e);b=this;b.$form=a;b.storedData=d}var b;e.prototype.init=function(){b.$form.hasClass("gcw-prefillCalendar")&&b.prefillCalendar()};e.prototype.prefillCalendar=function(){var a=b.$form.find(".gcw-start-date"),d=b.$form.find(".gcw-end-date");var c=0;void 0!==a.data("min-range-length")&&(c=a.data("min-range-length"));var k=new f,e=(new f).clone().addDays(c);a.data("gcw-date-format")&&(c=a.data("gcw-date-format").toLowerCase().replace(/m/g,"M"),a.val(k.toString(c)),d.val(e.toString(c)))};return e});define("GcwFlightsDataPreloadingFunctions",["classCheck"],function(g){function f(b,a){g(this,f);e=this;e.$form=b;e.storedData=a;e.airlinesListConfig={selectElementContainer:b.find(".gcw-airline-select").parent(),selectElement:b.find(".gcw-airline-select"),request:{url:"/travel-entities/airlines",params:{siteid:b.data("siteid"),locale:b.data("locale"),sort:"name",isMajor:!0}}}}var e;f.prototype.init=function(){e.getAirlinesList(e.airlinesListConfig.request).then(function(b){0<b.length?(e.setAirlinesHTMLOptionsList(e.createAirlinesHTMLOptionsList(b)),void 0!==e.storedData&&e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")]&&e.setLastSearchAirline(e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")])):e.hideHTMLOptionsListContainer()}).fail(function(){e.hideHTMLOptionsListContainer()});return e};f.prototype.getAirlinesList=function(b){return $.ajax({method:"GET",type:"GET",url:b.url,data:b.params,dataType:"json",timeout:1E4}).then(function(a){return e.parseAirlinesListResponse(a)})};f.prototype.parseAirlinesListResponse=function(b){return b.data||[]};f.prototype.createAirlinesHTMLOptionsList=function(b){var a="";b.forEach(function(b){a+='\x3coption value\x3d"'+b.code+'"\x3e'+b.name+"\x3c/option\x3e"});return a};f.prototype.setAirlinesHTMLOptionsList=function(b){e.airlinesListConfig.selectElement.append(b)};f.prototype.setLastSearchAirline=function(b){e.airlinesListConfig.selectElement.val(b)};f.prototype.hideHTMLOptionsListContainer=function(){e.airlinesListConfig.selectElementContainer.hide()};return f});define("GcwThreeppDataPreloadingFunctions",["classCheck","jquery"],function(g,f){function e(a,d,c){g(this,e);b=this;b.$form=a;b.storedData=d;b.ignoreSavedFormData=c;b.locale=b.$form&&b.$form.data("locale")?b.$form.data("locale").substring(0,2):"en";b.url="https://threepp-destination-service.prod-p.expedia.com/wizard/getWizardJSON?fram\x3dExpediaRocks\x26lang\x3d"+b.locale+"\x26callback\x3d?"}var b;e.prototype.init=function(){b.getOrigins(!0);b.registerEvents()};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-threepp-origin-input",function(a){b.getDestinations()});b.$form.on("change",".gcw-threepp-destination-input",function(a){b.getDurationAndHotels()})};e.prototype.getDurationAndHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input").val();2<(d&&d.length?d.split("|"):[]).length?(b.getDuration(a),b.getHotels(a)):(b.resetHotels(),b.resetDuration(a))};e.prototype.getOrigins=function(a){var d=b.$form.find(".gcw-threepp-origin-input");f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3do"}).done(function(c){var k=[];f.each(c,function(a,c){k.push('\x3coption data-sort\x3d"'+c.name+'" value\x3d"'+c.code+'"\x3e'+c.name+"\x3c/option\x3e")});d.append(k.sort().join(""));a&&(b.loadValueFromLocalStorage(d),b.getDestinations(a))})};e.prototype.getDestinations=function(a){var d=b.$form.find(".gcw-threepp-origin-input"),c=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()?(d=b.url+"\x26q\x3dd\x26p\x3d"+d.val(),f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:d}).done(function(d){var k=[];f.each(d,function(a,c){if(c&&c.name){var b=c.name,d='" data-label\x3d"'+c.name;void 0!==c.destinations?1<c.destinations.length?(k.push('\x3coption value\x3d"'+c.name.replace(/\s/g,"kkk")+"xxx"+c.code.split(",").sort().join("_")+'|3,7,14" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+"\x3c/option\x3e"),f.each(c.destinations,function(a,c){k.push('\x3coption country\x3d"'+b+('" data-label\x3d"'+c.name)+'" value\x3d"'+c.code+"|"+c.durations+"|"+c.hotels+'"\x3e - '+c.name+"\x3c/option\x3e")})):k.push('\x3coption value\x3d"'+c.code+"|"+c.destinations[0].durations+"|"+c.destinations[0].hotels+'" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+" ("+c.destinations[0].name+")\x3c/option\x3e"):k.push('\x3coption value\x3d"'+c.name.replace(/\s/g,"kkk")+"xxx"+c.code.split(",").sort().join("_")+'|3,7,14" country\x3d"'+b+d+'" class\x3d"region"\x3e'+c.name+"\x3c/option\x3e")}});0<k.length&&(c.html(k.join("")),a&&(b.loadValueFromLocalStorage(c),b.getDurationAndHotels(a)))})):c.children().first().prop("selected",!0)};e.prototype.getHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()&&(d=d.val().split("|"),2<d.length&&f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3dh\x26p\x3d"+d[2]}).done(function(c){var d=[];f.each(c,function(a,c){c&&c.code&&c.name&&d.push('\x3coption value\x3d"'+c.code+'"\x3e'+b.toTitleCase(c.name)+"\x3c/option\x3e")});0<d.length&&(c=b.$form.find(".gcw-threepp-hotels-select"),c.html(c.children().first()),c.append(d.join("")),a&&b.loadValueFromLocalStorage(c))}))};e.prototype.getDuration=function(a){var d=b.$form.find(".gcw-threepp-destination-input");if(d.length&&d.val()&&(d=d.val().split("|"),1<d.length)){d=d[1];var c=d.split(",");if(f.isArray(c)&&"3,7,14"!==d){var k=b.$form.find(".gcw-threepp-duration-select");k.children().addClass("gcw-disabled");f.each(c,function(a,c){k.find("option[value\x3d"+c+"DAYS]").removeClass("gcw-disabled")});k.find("option[value\x3d7DAYS]").hasClass("gcw-disabled")?k.find("option:not(.gcw-disabled)").first().prop("selected","selected"):k.val("7DAYS");a&&b.loadValueFromLocalStorage(k)}else b.resetDuration(a)}};e.prototype.resetHotels=function(){var a=b.$form.find(".gcw-threepp-hotels-select");a.html(a.children().first());a.children().first().prop("selected",!0)};e.prototype.resetDuration=function(a){var d=b.$form.find(".gcw-threepp-duration-select");d.children().removeClass("gcw-disabled");d.find("option[value\x3d1DAYS]").addClass("gcw-disabled");d.find("option[value\x3d2DAYS]").addClass("gcw-disabled");a?b.loadValueFromLocalStorage(d):d.val("7DAYS")};e.prototype.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};e.prototype.loadValueFromLocalStorage=function(a){if(b.storedData&&!b.ignoreSavedFormData){var d=a.data("gcw-storeable-name");(d=b.storedData[d])&&a.val(d)}};return e});
define("GcwCarsDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(c,b){g(this,a);d=this;d.$form=c;d.storedData=b}var d;a.prototype.init=function(){d.carRentalHintText(d.$form.data("siteid"))};a.prototype.carRentalHintText=function(a){var c=d.$form.find(".car-rental-hint-text"),b=c.data("hint-order");0<c.length&&b&&(a=d.getValuesByPOS(a),d.phValue=c.attr("placeholder"),d.pickingUpInput=c,d.values=a,d.order=b,d.cycleDelayMillis=2E3,d.placeholderNext=0,d.intervalId=setInterval(d.cyclePlaceholderHelper.bind(null,c,a,b),d.cycleDelayMillis),d.$form.on("focus",".car-rental-hint-text",function(a){d.stopPlaceholderCycle();d.updateInputPlaceholder(d.pickingUpInput,d.phValue)}),d.$form.on("blur",".car-rental-hint-text",function(a){d.stopPlaceholderCycle();d.placeholderNext=0;d.intervalId=setInterval(d.cyclePlaceholderHelper.bind(null,d.pickingUpInput,d.values,d.order),d.cycleDelayMillis)}))};a.prototype.getValuesByPOS=function(a){a=d.$form.find(".pos"+a).val().split(";");var c;for(c=0;c<a.length;c++)a[c]="Try "+a[c]+"";return a};a.prototype.cyclePlaceholderHelper=function(a,b,e){d.updateInputPlaceholder(a,d.getPlaceholderText(b));d.placeholderNext=d.getNextPlaceholderIndex(b.length,e)};a.prototype.updateInputPlaceholder=function(a,b){a.attr("placeholder",b)};a.prototype.getPlaceholderText=function(a){return d.placeholderNext===a.length?d.phValue:a[d.placeholderNext]};a.prototype.getNextPlaceholderIndex=function(a,b){if("fixed"===b)return(d.placeholderNext+1)%(a+1);for(var c=Math.floor(Math.random()*(a+1));c===d.placeholderNext;)c=Math.floor(Math.random()*(a+1));return c};a.prototype.stopPlaceholderCycle=function(){clearInterval(d.intervalId)};return a});define("gcwDateFieldParser",function(){return{parseDateField:function(g){var f=g.closest('[data-control \x3d "datepicker"]');g=g.closest("label");var e=uitk.datePickerCalendarObj.getDateFromString(f.find("input").val(),!0),b=f.attr("data-first-valid-date")||uitk.datePickerCalendarObj.toStringFromDate(new Date),a=uitk.datePickerCalendarObj.getDateFromString(b,!0),d=f.attr("data-last-valid-date"),c=uitk.datePickerCalendarObj.getDateFromString(d,!0);f={$div:f,$label:g,errorMessages:[],date:e,options:{pairedStartFieldId:f.data("start-date"),pairedEndFieldId:f.data("end-date"),datePickerType:"singleDate",firstValidDate:a,lastValidDate:c,firstValidString:b,lastValidString:d,minRangeLength:f.find("input").data("min-range-length"),maxRangeLength:f.data("max-range-length")}};f.options.pairedStartFieldId&&(f.options.datePickerType="endDate",f.options.pairedStartField=$(f.options.pairedStartFieldId),f.options.minRangeLength=f.options.pairedStartField.find("input").data("min-range-length"),f.options.maxRangeLength=f.options.pairedStartField.closest('[data-control \x3d "datepicker"]').data("max-range-length"));f.options.pairedEndFieldId&&(f.options.datePickerType="startDate",f.options.pairedEndField=$(f.options.pairedEndFieldId));return f}}});define("gcwDateFieldValidations",["xdate"],function(g){function f(e,b,a,d,c){return{fieldId:e,msgId:b,strParams:d,valid:a,hideMessage:c}}return{gcw_is_valid_date:function(e,b,a){b=e.date;e=a.attr("id");a=a.attr("placeholder");b=null!==b&&"undefined"!==typeof b&&"invalid date"!==(new g(b))[0].toString().toLowerCase();return f(e,"gcw_is_valid_date",b,a)},gcw_date_range:function(e,b,a){b=!0;var d=[];a=a.attr("id");if(e.options.firstValidDate&&e.options.lastValidDate){var c=e.options.lastValidDate;e.options.firstValidDate<=e.date&&e.date<=c||(b=!1,d=[uitk.datePickerCalendarObj.toStringFromDate(e.options.firstValidDate),uitk.datePickerCalendarObj.toStringFromDate(e.options.lastValidDate)])}return f(a,"gcw_date_range",b,d)},gcw_max_date:function(e,b,a){b=!0;a=a.attr("id");e.options.lastValidDate&&e.date>e.options.lastValidDate&&(b=!1);return f(a,"gcw_max_date",b,[e.options.lastValidString])},gcw_min_date:function(e,b,a){b=!0;a=a.attr("id");e.options.firstValidDate&&e.date<e.options.firstValidDate&&(b=!1);return f(a,"gcw_min_date",b,[e.options.firstValidString])},gcw_min_range:function(e,b,a){var d=!0,c=!1;a=a.attr("id");if("startDate"===e.options.datePickerType||"endDate"===e.options.datePickerType)if(e.options.pairedEndFieldId||e.options.pairedStartFieldId)d=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input"),b=b.gcwForm.getDateFromString(d.val()),d=b-e.date,"startDate"===e.options.datePickerType&&(c=!0),"endDate"===e.options.datePickerType&&(d=e.date-b),d=d/1E3/60/60/23>=e.options.minRangeLength?!0:!1;return f(a,"gcw_min_range",d,[e.options.minRangeLength],c)},gcw_max_range:function(e,b,a){var d=a.data("gcw-max-range-error")?a.data("gcw-max-range-error"):"gcw_max_range",c=!0,k=!1;a=a.attr("id");e.options.maxRangeLength&&(e.options.pairedEndFieldId||e.options.pairedStartFieldId)&&(c=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input"),b=b.gcwForm.getDateFromString(c.val()),c=b-e.date,"startDate"===e.options.datePickerType&&(k=!0),"endDate"===e.options.datePickerType&&(c=e.date-b),c=c/1E3/60/60/24<=e.options.maxRangeLength?!0:!1);return f(a,d,c,[e.options.maxRangeLength],k)}}});
define("gcwDatePickerOverrides",["uitk","uitk_datepicker"],function(g,f){return{setConfig:function(e,b){var a={1:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},es_MX:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},zh_CN:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"           ".split(" "),daysOfTheWeek:"".split(""),closeLink:""}},3:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4:{en_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fr_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AO SEP OCT NOV DC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},6:{de_DE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mr Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schlieen"}},8:{it_IT:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"GEN FEB MAR APR MAG GIU LUG AGO SET OTT NOV DIC".split(" "),daysOfTheWeek:"DLMMGVS".split(""),closeLink:"Chiudi"}},9:{es_ES:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},11:{nl_NL:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MRT APR MEI JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"ZMDWDVZ".split(""),closeLink:"Sluiten"}},12:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},14:{en_SG:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},15:{en_MY:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},16:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},ko_KR:{calendarDateFormat:"yymmdd",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),daysOfTheWeek:"".split(""),closeLink:""}},17:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},th_TH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:".. .. .. .. .. .. .. .. .. .. .. ..".split(" "),daysOfTheWeek:". . . . . . .".split(" "),closeLink:""}},18:{en_HK:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},zh_CN:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"           ".split(" "),daysOfTheWeek:"".split(""),closeLink:""},zh_HK:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"           ".split(" "),daysOfTheWeek:"".split(""),closeLink:""}},20:{fr_FR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},25:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},27:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},28:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},ja_JP:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"1;2;3;4;5;6;7;8;9;10 ;11;12".split(";"),daysOfTheWeek:";;; ;;;".split(";"),closeLink:""}},29:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},61:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},id_ID:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr Mei Jun Jul Agu Sep Okt Nov Des".split(" "),daysOfTheWeek:"MSSRKJS".split(""),closeLink:"Tutup"}},62:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},zh_TW:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"           ".split(" "),daysOfTheWeek:"".split(""),closeLink:""}},63:{en_IE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},64:{fr_BE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"},nl_BE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MRT APR MEI JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"ZMDWDVZ".split(""),closeLink:"Sluiten"}},65:{sv_SE:{calendarDateFormat:"yymmdd",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Stng"}},66:{nb_NO:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAI JUN JUL AUG SEP OKT NOV DES".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Lukk"}},67:{da_DK:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Luk"}},68:{en_PH:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},69:{pt_BR:{calendarDateFormat:"ddmmyy",
calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEV MAR ABR MAI JUN JUL AGO SET OUT NOV DEZ".split(" "),daysOfTheWeek:"DSTQQSS".split(""),closeLink:"Fechar"}},70:{es_AR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},71:{vi_VN:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Thng 1;Thng 2;Thng 3;Thng 4;Thng 5;Thng 6;Thng 7;Thng 8;Thng 9;Thng 10;Thng 11;Thng 12".split(";"),daysOfTheWeek:"CN T2 T3 T4 T5 T6 T7".split(" "),closeLink:"ong"}},72:{de_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schlieen"},fr_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},73:{fi_FI:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"tammikuu helmikuu maaliskuu huhtikuu toukokuu keskuu heinkuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),daysOfTheWeek:"Su Ma Ti Ke To Pe La".split(" "),closeLink:"Sulje"}},75:{zh_CN:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"           ".split(" "),daysOfTheWeek:"".split(""),closeLink:""}},70150:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70151:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70201:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},es_MX:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},70301:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70403:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70406:{de_DE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schlieen"}},70420:{fr_FR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},70463:{en_IE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70465:{sv_SE:{calendarDateFormat:"yymmdd",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Stng"}},70472:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},de_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schlieen"},fr_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},70473:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fi_FI:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"tammikuu helmikuu maaliskuu huhtikuu toukokuu keskuu heinkuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),daysOfTheWeek:"Su Ma Ti Ke To Pe La".split(" "),closeLink:"Sulje"}},80001:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},80004:{en_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fr_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"jan fv mar avr mai jun jul ao sep oct nov dc".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},4401:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4402:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4403:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4404:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4405:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4406:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4407:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}}}[e];if(a&&(a=a[b],"undefined"!==typeof g.datePickerCalendarObj&&a)){var d=g.datePickerCalendarObj.config;
d.setFormatConfig(a.calendarDateFormat,a.calendarDateSeparator);d.setUnitConfig(a.startDayOfTheWeek,a.calendarMonths,a.daysOfTheWeek);d.setTextConfig(a.closeLink)}}}});require("uitk",function(g){function f(){for(var b=a,c=b.length,k,e;0!==c;)e=Math.floor(Math.random()*c),--c,k=b[c],b[c]=b[e],b[e]=k;return b.slice(0,5)}function e(){a=f();var d="";a.forEach(function(a,c){d=d+"\x3cli\x3e \x3cspan class\x3d'icon icon-search' aria-hidden\x3dtrue' style\x3d' padding-right: 10px'\x3e\x3c/span\x3e"+a});var c=$(".opensearch-education-examples");c.empty();c.append(d);b()}function b(){var a=$(".opensearch-education-examples \x3e li");$(a).each(function(a){var c=$(this);setTimeout(function(){c.addClass("opensearch-education-slideIn")},200*a)})}var a="check my itinerary;all inclusive vacations to mexico;airport shuttles at lax;things to do in chicago;pet friendly hotels in san francisco;summer break deals in the bahamas;shows in vegas this weekend;walking tours in paris;top beach destinations;travel insurance;car service in new york;disney vacations;cancel reservation;member deals in orlando;confirm flight;last minute deals to vancouver;hawaiian vacation packages;customer service phone number;attractions in london;price alerts on flights;family cruises;adventures in seattle;multiple destination flights;hotels with pools in phoenix".split(";");g.subscribe("tab.selected",function(a,c){"openSearch"===c.find("button").data("lob")&&e()});e()});define("gcwFieldValidations",["gcwDateFieldValidations","gcwDateFieldParser"],function(g,f){function e(a,c,b,e,f){return{fieldId:a,msgId:c,valid:b,strParams:e,hideMessage:f}}function b(a,c,b){var d=[],k=a.closest('[data-control \x3d "datepicker"]').find("input").val();if(!0!==b||""!==k){b=f.parseDateField(a);for(var e in g)k=g[e](b,c,a),!1===k.valid&&d.push(k)}return d}function a(a){return/^(-|\+)?([0-9]+|Infinity)$/.test(a)?Number(a):NaN}return{utils:{returnValue:e,isValidDate:b,filterInt:a},gcw_required:function(a,c){var b="flight"===c.gcwForm.$lobTab.data("lob"),d=c.$form.find(".gcw-multidest-flights-container").is(":visible"),f=a.data("gcw-field-type"),l=a.attr("id"),g=a.data("gcw-required-field-custom-error-message")?a.data("gcw-required-field-custom-error-message"):"gcw_requiredFieldErrorMessage";if(b){if(d)if(a.hasClass("gcw-origin")){g="gcw_multiDestOriginErrorMessage";var n="1"}else a.hasClass("gcw-destination")?(g="gcw_multiDestErrorDestinationMessage",n="1"):a.hasClass("gcw-start-date")&&(g="gcw_multiDestDateErrorMessage",n=["1",a.attr("placeholder")]);else a.hasClass("gcw-origin")?(g="gcw_originErrorMessage",n=""):a.hasClass("gcw-destination")?(g="gcw_destinationErrorMessage",n=""):a.hasClass("gcw-start-date")?(g="gcw_departureDateErrorMessage",n=a.attr("placeholder")):a.hasClass("gcw-end-date")&&(g="gcw_returnDateErrorMessage",n=a.attr("placeholder"));if(0===a.val().length)return e(l,g,!1,n)}else if(0===a.val().length)return f?e(l,g,!1,f):e(l,g,!1);return e(l,g,!0)},gcw_driverAgeRequired:function(a){var c=a.attr("id");return 0===a.val().length?e(c,"gcw_driver_age_blank",!1):e(c,"gcw_driver_age_blank",!0)},gcw_isValidDriverAge:function(b){var c=b.attr("id");b=b.val();return(b=a(b))&&17<b&&100>b?e(c,"gcw_driver_age_invalid",!0):e(c,"gcw_driver_age_invalid",!1)},gcw_distinct_locations:function(a,c){var b=a.data("gcw-distinct-locations-custom-error-message")?a.data("gcw-distinct-locations-custom-error-message"):"gcw_distinct_locations",d=c.$form.find(".gcw-origin:visible, .gcw-destination:visible"),f=0,l=d.length,g=a.attr("id"),n=!0,q=!1;for(f;f<l;f++){var t=$(d[f]);if(t.attr("id")===g){var u=f;break}}0<(u+1)%2?(d=$(d[u+1]),g=d.attr("id")):(d=$(d[u-1]),q=!0);""===a.val()?n=!0:a.val()===d.val()&&(n=!1);return e(g,b,n,void 0,q)},gcw_valid_date:function(a,c,k){return b(a,c,k)},gcw_valid_date_or_empty:function(a,c){return b(a,c,!0)},gcw_multidest_date:function(a,c){var b,d;var f=c.$form.find(".datepicker-trigger-input:visible");var l=a.attr("id"),g=a.closest('[data-control \x3d "datepicker"]');g=c.gcwForm.getDateFromString(g.find("input").val());for(d=0;d<f.length;d++){var n=$(f[d]);l===n.attr("id")&&(b=d)}b=$(f[b-1]);if(""===g||null===g)return e(l,"gcw_multidest_date",!0);f=b.val();d=c.gcwForm.getDateFromString(f);return 0<b.length&&null!==d&&!b.closest("label").hasClass("invalid")&&g<d?e(l,"gcw_min_date",!1,[f]):e(l,"gcw_multidest_date",!0,[f])},gcw_flight_hotel_date:function(a,c){var b=a.attr("id"),d=c.gcwForm.getKeyParameter(),f=c.$form.find("#flight-departing"+d);d=c.$form.find("#flight-returning"+d);f=c.gcwForm.getDateFromString(f.val());d=c.gcwForm.getDateFromString(d.val());f={date:c.gcwForm.getDateFromString(a.val()),options:{firstValidDate:f,lastValidDate:d}};d=g.gcw_date_range;return""===a.val()?e(b,"gcw_date_range",!0):d(f,c,a)},gcw_option_selected_from_TA:function(a,c){var b=a.attr("id"),d=a.closest("div").parent().find("input[type\x3dhidden]"),f=a.data("gcw-observed-uta-feature");d=0<d.length?d.filter('input[id*\x3d"'+f+'"]'):"";f=a.data("gcw-option-selected-from-ta-custom-error-message")?a.data("gcw-option-selected-from-ta-custom-error-message"):a.hasClass("gcw-destination")?"gcw_rails_destination_from_TA":"gcw_rails_origin_from_TA";var l=!0;0<d.length&&""===d.val()&&(l=!1);return e(b,f,l)}}});define("gcwField",["uitk","jquery","gcwFieldValidations"],function(g,f,e){return function(b,a){var d=this;d.gcwForm=b;d.$form=d.gcwForm.form;d.$field=a;d.$label=a.closest("label");d.$input=a.find("input");d.validations=e;d.errors=[];"INPUT"===d.$field.prop("nodeName")&&(d.$input=a);d.isActive=function(){return 0<d.$field.parents(".toggle-pane").length?0===d.$field.parents(".gcw-disabled").length&&!d.$field.hasClass("gcw-disabled")&&0<d.$field.parents(".open").length:"hidden"===d.$field.attr("type")?0<d.$field.val().length&&0===d.$field.parents(".gcw-disabled").length:0===d.$field.parents(".gcw-disabled").length&&!d.$field.hasClass("gcw-disabled")};d.validate=function(){var c=!1;d.clearErrors();for(var b in d.validations){var e=d.validations[b],g=b.replace(/_/g,"-");if(d.$field.hasClass(g)&&(e=e(a,d),f.isArray(e)||(e=[e]),f.each(e,function(){if(!this.valid)return d.errors.push(this),c=!0,!1}),c))break}d.mark();return d.errors};d.clearErrors=function(){d.errors=[]};d.mark=function(){0<d.errors.length?(d.$label.addClass("invalid"),d.$input.attr("aria-invalid","true")):(d.$label.removeClass("invalid"),d.$input.attr("aria-invalid","false"))};return d}});define("gcwFieldsCollection",["jquery","gcwField"],function(g,f){return function(e){var b=this;b.$form=e;b.fields=[];b.add=function(a){b.fields.push(new f(b.$form,a))};b.remove=function(a){for(var d=0;d<b.fields.length;d++)b.fields[d].$field[0].isEqualNode(a[0])&&b.fields.splice(d,1)};b.getActiveFields=function(){var a=[],d;for(d in b.fields){var c=b.fields[d];c.isActive()&&!c.$field.hasClass("gcw-show-disabled")?(a.push(c),c.$field.attr("disabled",!1)):c.$field.attr("disabled",!0)}return a};b.enableInactiveFields=function(){for(var a in b.fields){var d=b.fields[a];d.isActive()||d.$field.hasClass("gcw-show-disabled")||d.$field.attr("disabled",!1)}};b.getErrorState=function(){var a=0,d=[],c=b.getActiveFields(),e;for(e in c){var r=c[e].validate();0<r.length&&(a++,d.push(r))}return{numFieldErrors:a,badFields:d}}}});
define("gcwFormLogic",["jquery","gcwDatePickerOverrides","gcwTabsLogic","gcwForm","gcw-store-form-data-com.example.demo.controller"],function(g,f,e,b,a){return function(){var d=this;d.gcwForms={};var c=a.canTrack;d.init=function(){var a=!c,r=0<g("meta[name\x3dgcw_stored_data_per_locale][value\x3dtrue]").length;(0>=g("meta[name\x3dgcw_use_datepicker_overrides]").length||0<g("meta[name\x3dgcw_use_datepicker_overrides][value\x3dtrue]").length)&&f.setConfig(window.tpid,window.locale);window.GcwForm=b;g(".gcw-form").each(function(){var c=new b(g(this),g(this).data("gcw-datapreloading-function"),g(this).data("gcw-processing-function"),g(this).data("gcw-com.example.demo.controller"),a,r),e=g(this).data("lob-form");e||(e="unidentified");e in d.gcwForms||(d.gcwForms[e]=[]);d.gcwForms[e].push(c)});g.isEmptyObject(d.gcwForms)||(window.forms=d.gcwForms,define("gcwFormsInstances",function(){return d.gcwForms}));e.selectLastSearchLobTab(a,r,window.locale)};d.handleLobChange=function(a){var c=b.getCurrentActiveForm(d.gcwForms);g.each(c,function(a,c){c.setCurrentState()});if(a&&0<a.length){c={};var e={};a in d.gcwForms&&(c[a]=d.gcwForms[a],b.setFormsStatus(c),e=b.getCurrentActiveForm(c));0<e.length&&e[0].initForm()}};return d}});require("uitk_domReady jquery uitk gcwFormLogic uitk_init uitk_toggle".split(" "),function(g,f,e,b){window.format.extend(String.prototype);(function(){e.subscribe("launch-config-executed",function(b,c){setTimeout(function(){var c=f(".tabs li button.on:visible").data("lob");if("undefined"===typeof c||0===c.length)c=f("div.wizard-tabs:visible").data("lob");a.handleLobChange(c)},0)});e.subscribe("tab.selected",function(b,c){var d=c.find("button").data("lob");a.handleLobChange(d);e.prepFields()})})();var a=new b;a.init();window.mercuryFormsInitialized=!0;e.publish("mercuryForms.initialized",{});g=f("html");(g.hasClass("safari")||g.hasClass("firefox"))&&f(window).bind("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&window.location.reload()})});define("GcwFormSubmission",function(){var g={submit:function(f,e,b){f.ignoreSavedFormData||(g.storeFormData(f),g.storeCurrentLobTab(f));g.checkTAAPPackageRate(f);e&&e.redirect&&(b.preventDefault(),g.changeWindowLocation(e.url))},storeFormData:function(f){if(f.localStorageEnabled){var e={},b={},a=f.gcwFormHistory||{};f.form.find(".gcw-storeable").each(function(){var d=$(this),c=d.data("gcw-storeable-name");c in b||""===d.val()||(b[c]=d.val(),"checkbox"===d.attr("type")&&(b[c]=d.prop("checked")?"1":"0"),"radio"===d.attr("type")&&(b[c]=d.is(":checked")));f.storedDataPerLocale?a[f.locale]&&a[f.locale].hasOwnProperty(c)&&""!==a[f.locale][c]&&""===d.val()&&delete a[f.locale][c]:a.hasOwnProperty(c)&&""!==a[c]&&""===d.val()&&delete a[c]});f.storedDataPerLocale?(e[f.locale]=b,a=$.isEmptyObject(a)?e:$.extend(!0,a,e)):a=$.isEmptyObject(a)?b:$.extend({},a,b);window.localStorage.setItem("gcw_form_history",JSON.stringify(a))}},storeCurrentLobTab:function(f){var e=$("li.tab button.on");if(0<e.length&&(e=e.data("lob"))){var b=f.form;"package"===e&&(b=b.data("gcw-current-package-type"))&&(e=b);f.localStorageEnabled&&(f.storedDataPerLocale?(b={},b[f.locale]=e):b=e,window.localStorage.setItem("gcw_lob_tab",JSON.stringify(b)))}},checkTAAPPackageRate:function(f){var e=f.form;f=e.find(".gcw-start-date:visible");var b=e.find(".gcw-end-date:visible");e=e.find(".package-rates-checkbox-variant");e.length&&(f.length&&b.length&&e.is(":visible")&&""!==f.val()&&""!==b.val()&&e.prop("checked")?$.ajax({url:"/set3ptcookie",data:{startDate:f.val(),endDate:b.val()},async:!1}):$.ajax({url:"/clear3ptcookie",async:!1}))},changeWindowLocation:function(f){window.location=f}};return g});
define("gcwFormValidations",["xdate","GcwUtilsProcessingFunctions"],function(g,f){function e(a,b,d,e,f,g){return{fieldId:a,msgId:b,strParams:e,valid:d,hideMessage:f,multiErrors:g}}function b(a){if(4<a.length){var c=-1<a.indexOf("PM");var b=parseInt(a.slice(-4,-2));a=parseInt(a.slice(0,-4));c||12!==a?c&&12!==a&&(a+=12):a=0}else b=parseInt(a.slice(2,4)),a=parseInt(a.slice(0,2));return 60*a+b}function a(a,b,d){return""===a&&""===b&&""===d||""!==a&&""!==b&&""!==d?!1:!0}function d(a,b,d){var c=a.closest("label"),e=a.data("gcw-invalid-validation-names");if(!b)c.addClass("invalid"),a.attr("aria-invalid","true"),a.data("gcw-invalid-validation-names",e&&d?e+","+d:d);else if(e&&d)for(e=e.split(","),b=0;b<e.length;b++)if(e[b]===d){d=e;d.splice(b,1);e=d.join();a.data("gcw-invalid-validation-names",e);""===e&&(c.removeClass("invalid"),a.attr("aria-invalid","false"));break}}return{utils:{returnValue:e,convertStrTimeToMins:b,areSomeFieldsEmpty:a,markField:d},gcw_lessThanNTravelers:function(a){var c=a.form.data("gcw-less-than-n-travelers-custom-error-message")?a.form.data("gcw-less-than-n-travelers-custom-error-message"):"gcw_less_than_n_travelers",b=!0,f=a.form;a=f.data("gcw-max-travelers");f=f.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible, .gcw-guests-field-total-travelers:visible");var g=0,m;f.each(function(){g+=parseInt($(this).val())});if(1>g||g>a)b=!1;f.each(function(a,c){m||(m=$(c).attr("id"));d($(c),b,"gcw_lessThanNTravelers")});return e(m,c,b,a)},gcw_lessThanNTravelers_travelerSelector:function(a){var c=a.form.data("gcw-less-than-n-travelers-custom-error-message")?a.form.data("gcw-less-than-n-travelers-custom-error-message"):"gcw_less_than_n_travelers",b=!0,f=a.form,g=f.find(".travel-selector-wrapper:visible");a=g.find("[data-control\x3dmenu]");f=f.data("gcw-max-travelers");var m=g.find(".gcw-traveler-selector-num-children, .gcw-traveler-selector-num-adults");g=g.find(".gcw-child-field").not(".gcw-disabled");var n=0;m.each(function(){n+=parseInt($(this).val()||0)});if(1>n||n>f)b=!1;b?a.removeClass("invalid"):(a.addClass("invalid"),a.uitk_dropDown("open"));g.each(function(a,c){var e=$(c).find("select");d($(e),b,"gcw_lessThanNTravelers_travelerSelector")});return e(void 0,c,b,f)},gcw_railcardsAmount:function(a){var c=a.form.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible");a=a.form.find(".gcw-railcard-count-select:visible");var b=0,f=0,g=$(a[0]).attr("id");c.each(function(a,c){b+=parseInt($(c).val())});a.each(function(a,c){f+=parseInt($(c).val())});c=f<=b;d(a,c,"gcw_railcardsAmount");return e(g,"gcw_railscardNumber",c)},gcw_isChildAloneAboveNAge:function(a){var c=a.form;a=parseInt(c.data("rail-age-boundary"));var b=parseInt(c.data("rail-accompanying-age")),f=parseInt(c.find(".num-adults").val()),g=parseInt(c.find(".num-youth").val()),m=parseInt(c.find(".num-seniors").val()),n=c.find(".children-data select:visible");c=c.find(".gcw-child-rails-field.select:visible");var q=!0,t=[],u=[],w;if(0===f&&0===g&&0===m)for(m=0;m<n.length;m++)f=$(n[m]).val(),g=$(c[m]),u.push(parseInt(f)),w||(w=g.find("select").attr("id")),f<=a&&(q=!1,t.push(g)),-1<u.indexOf(b)&&(q=!0);!1===q&&$.each(t,function(a,c){d(c,q,"gcw_isChildAloneAboveNAge")});return e(w,"gcw_isChildAloneAboveNAge",q,[a,b])},gcw_isChildAloneAbove13:function(a){var c=parseInt(a.form.find(".num-adults").val()),b=parseInt(a.form.find(".num-youth").val()),f=parseInt(a.form.find(".num-seniors").val()),g=a.form.find(".children-data select:visible");a=a.form.find(".gcw-child-rails-field.select:visible");for(var m=!0,n,q,t,u=0;u<g.length;u++)n=$(g[u]).val(),q=$(a[u]),t||(t=q.find("select").attr("id")),0===c&&0===b&&0===f&&13>n&&(m=!1,d(q,m,"gcw_isChildAloneAbove13"));return e(t,"gcw_isChildAloneAbove13",m)},gcw_isChildAlone:function(a){var c=parseInt(a.form.find(".num-adults").val()),b=parseInt(a.form.find(".num-children").val());a=parseInt(a.form.find(".num-seniors").val());var d=!0;0<b&&0===c&&0===a&&(d=!1);return e(void 0,"gcw_isChildAlone",d)},gcw_isChildAccompaniedByAdult:function(a){a=this.gcw_isChildAlone(a);return e(void 0,"gcw_isChildAlone",!a.valid)},gcw_timeValidLongEnough:function(a){var c=!0,f=a.form,p=f.find(".gcw-start-date:visible"),l=new g(a.getDateFromString(p.val())),m=f.find(".gcw-end-date:visible"),n=new g(a.getDateFromString(m.val())),q=f.find(".gcw-start-time:visible");a=q.val();var t=f.find(".gcw-end-time:visible"),u=t.val(),w=f.data("gcw-min-hours");f=f.data("gcw-error-msg-id");var v=[],x;v.push(m);v.push(t);v.push(p);v.push(q);void 0!==l&&void 0!==n&&l[0]&&n[0]&&void 0!==a&&void 0!==u&&(p=l.diffDays(n),0===p||1===p)&&(a=b(a),u=b(u),1===p&&(u+=1440),u-a<60*w&&(c=!1,$.each(v,function(a,b){x||(x=b.attr("id"));d(b,c,"gcw_timeValidLongEnough")})));return e(x,f,c)},gcw_isPartialCarDateWithinRange:function(a){var c=!0,b=a.form,f=new g(a.getDateFromString(b.find(".gcw-start-date:visible").val())),l=new g(a.getDateFromString(b.find(".gcw-end-date:visible").val())),m=b.find(".gcw-partial-car-pickup-date").attr("id"),n=b.find(".gcw-partial-car-pickup-date:visible");b=b.find(".gcw-partial-car-dropoff-date:visible");0<n.length&&0<b.length&&""!==n.val()&&""!==b.val()&&(c=new g(a.getDateFromString(n.val())),a=new g(a.getDateFromString(b.val())),c=0<=f.diffDays(c)&&0>l.diffDays(c)&&0>=l.diffDays(a),c||(d(n,c,"gcw_isPartialCarDateWithinRange"),d(b,c,"gcw_isPartialCarDateWithinRange")));return e(m,"gcw_packagesPartialCarDateValidationMessage",c)},gcw_isPartialDateWithinRange:function(a){var c=!0,b=a.form,f=new g(a.getDateFromString(b.find(".gcw-start-date:visible").val())),l=new g(a.getDateFromString(b.find(".gcw-end-date:visible").val())),m=b.find(".gcw-partial-start-date").attr("id"),n=b.find(".gcw-partial-start-date:visible");b=b.find(".gcw-partial-end-date:visible");0<n.length&&0<b.length&&""!==n.val()&&""!==b.val()&&(c=new g(a.getDateFromString(n.val())),a=new g(a.getDateFromString(b.val())),c=0<=f.diffDays(c)&&0>l.diffDays(c)&&0>=l.diffDays(a),c||(d(n,c,"gcw_isPartialDateWithinRange"),d(b,c,"gcw_isPartialDateWithinRange")));return e(m,"gcw_packagesPartialDateMessage",c)},gcw_childAgesAllProvided:function(a){var c=a.form.data("gcw-child-ages-all-provided-custom-error-message")?a.form.data("gcw-child-ages-all-provided-custom-error-message"):"gcw_child_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-child-field:visible, .gcw-flights-child-field:visible"),m;a.find(".num-children:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_childAgesAllProvided"))});return e(m,c,b)},gcw_childAgesAllProvided_travelerSelector:function(a){var c=a.form.data("gcw-child-ages-all-provided-custom-error-message")?a.form.data("gcw-child-ages-all-provided-custom-error-message"):"gcw_child_ages_all_provided",b=!0,g=f.retrieveTravelerSelectorPassengersData(a.form);a=g.totalChildrenFields;g=g.$activeTravelerSelector.find("[data-control\x3dmenu]");var l;0<a.length&&$.each(a,function(a,c){""===c.find("select").val()&&(l||(l=c.find("select").attr("id")),b=!1,d(c,b,"gcw_childAgesAllProvided_travelerSelector"))});b?g.removeClass("invalid"):(g.addClass("invalid"),g.uitk_dropDown("open"));return e(l,c,b)},gcw_allFlightsComplete:function(c){var b=c.form,f=$(".gcw-start-date").attr("placeholder"),g=!0,l=[],m=[];c=c.getKeyParameter();for(var n=b.find("[data-gcw-additional-fields]").length,q=0;q<n;q++){var t=b.find("#flight-"+(q+2)+"-origin"+c+":visible");var u=b.find("#flight-"+(q+2)+"-destination"+c+":visible");var w=b.find("#flight-"+(q+2)+"-departing"+c+":visible");if(0===t.length&&0===u.length&&0===w.length)return g=!0,m=[],e(void 0,void 0,g,void 0,void 0,m);if(a(t.val(),u.val(),w.val())){g=!1;if(!t.val()){var v=t.attr("id");l.push(t);m.push({msgId:"gcw_multiDestOriginErrorMessage",fieldId:v,legNumber:q+2})}u.val()||(v=u.attr("id"),l.push(u),m.push({msgId:"gcw_multiDestErrorDestinationMessage",fieldId:v,legNumber:q+2}));
w.val()||(u=w.attr("id"),l.push(w),m.push({msgId:"gcw_multiDestDateErrorMessage",fieldId:u,legNumber:q+2,dateFormat:f}))}}$.each(l,function(a,c){d(c,g,"gcw_allFlightsComplete")});return e(void 0,void 0,g,void 0,void 0,m)},gcw_railscardTypeSelected:function(a){var c=!0;a=a.form.find(".gcw-railcard-select:visible");for(var b=0,f,g=[],m,n=0;n<a.length;n++)f=$(a[n]),""===f.val()&&(b+=1,g.push(f),m||(m=f.attr("id")));1<=b&&(c=!1,$.each(g,function(a,b){d(b,c,"gcw_railscardTypeSelected")}));return e(m,"gcw_railscardTypeSelected",c)},gcw_timeValidPickUp:function(a){var c=!0,f=a.form,p=f.find(".gcw-start-date:visible");a=new g(a.getDateFromString(p.val()));p=f.find(".gcw-start-time:visible");var l=p.val(),m=p.attr("id");f=f.data("gcw-min-hours");void 0!==a&&a[0]&&(a.addMinutes(b(l)),g(new Date).diffHours(a)<f&&(c=!1));d(p,c,"gcw_timeValidPickUp");return e(m,"gcw_carsPickUpTooSoonMessage",c,f)},gcw_allOriginsAreDifferentFromDestinations:function(a){var c=!0,b=[],f=a.form,g;a=a.getKeyParameter();for(var m=0;4>m;m++){var n=f.find("#flight-"+(m+2)+"-origin"+a+":visible"),q=f.find("#flight-"+(m+2)+"-destination"+a+":visible");0<n.length&&0<q.length&&n.val()===q.val()&&""!==n.val()&&(c=!1,g||(g=q.attr("id")),b.push(q),b.push(n))}$.each(b,function(a,b){d(b,c,"gcw_allOriginsAreDifferentFromDestinations")});return e(g,"gcw_distinct_locations",c)},gcw_youthAgesAllProvided:function(a){var c=a.form.data("gcw-youth-ages-all-provided-custom-error-message")?a.form.data("gcw-youth-ages-all-provided-custom-error-message"):"gcw_youth_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-youth-field:visible"),m;a.find(".num-youth:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_youthAgesAllProvided"))});return e(m,c,b)},gcw_seniorAgesAllProvided:function(a){var c=a.form.data("gcw-senior-ages-all-provided-custom-error-message")?a.form.data("gcw-senior-ages-all-provided-custom-error-message"):"gcw_senior_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-seniors-field:visible"),m;a.find(".num-seniors:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_youthAgesAllProvided"))});return e(m,c,b)},gcw_railcardsCombinationValidation:function(a){var c=!0;a=a.form.find(".gcw-railcard-select:visible");for(var b=a.first().find("option:selected").attr("class"),f=[],g=[],m,n=0;n<a.length;n++)m=$(a[n]),g.push(m),m.find("option:selected").attr("class")!==b&&f.push(m);0<f.length?(c=!1,$.each(f,function(a,b){d(b,c,"gcw_railcardsCombinationValidation")})):$.each(g,function(a,b){d(b,c,"gcw_railcardsCombinationValidation")});return e(void 0,"gcw_railcardsCombinationValidation",c)},gcw_railsRouteNotSupported:function(a){var c=a.form,b=c.find(".gcw-origin:visible");a=c.find(".gcw-cross-country").val();b=f.getUTAFeature(b,"point_of_supply");var g=c.find(".gcw-destination:visible");g=f.getUTAFeature(g,"point_of_supply");if(-1<g.indexOf(",")){var l=g.split(","),m=l.indexOf(b);g=-1<m?l[m]:g}-1<b.indexOf(",")&&(l=b.split(","),m=l.indexOf(g),b=-1<m?l[m]:b);l=c.find(".gcw-rails-from input.gcw-origin , .gcw-rails-to input.gcw-destination");m=!0;c=c.find(".gcw-rails-from input.gcw-origin").attr("id");if(b!==g||"true"===a)m=!1;d(l,m,"gcw_railsRouteNotSupported");return e(c,"gcw_railsRouteNotSupported",m)},gcw_unattendedInfantInLap:function(a){var c=a.form;a=c.data("gcw-unattended-infant-in-lap-custom-error-message")?c.data("gcw-unattended-infant-in-lap-custom-error-message"):"gcw_unattended_infant_in_lap";var b=c.find('input[name\x3d"lap-or-seat"]:checked'),f=!0,g=c.find(".gcw-child-field:visible, .gcw-flights-child-field:visible"),m=0,n=0,q=0,t=!1;c.find(".num-adults:visible").each(function(a,c){m+=parseInt($(c).val())});q=m;g.each(function(a,c){var b=$(c).find("select").val();if(""===b)return t=!0,!1;12<=parseInt(b)?q++:0!==parseInt(b)&&1!==parseInt(b)||n++});c=b.length&&"lap"===b.val().toLowerCase();!t&&c&&0<n&&q<n&&(f=!1);c=g.first().attr("id");d(g,f,"gcw_unattendedInfantInLap");return e(c,a,f)},gcw_unattendedInfantInLap_travelerSelector:function(a){var c=a.form;a=c.data("gcw-unattended-infant-in-lap-custom-error-message")?c.data("gcw-unattended-infant-in-lap-custom-error-message"):"gcw_unattended_infant_in_lap";var b=c.find('input[name\x3d"lap-or-seat"]:checked'),g=!0,l=f.retrieveTravelerSelectorPassengersData(c);c=l.$activeTravelerSelector.find("[data-control\x3dmenu]");var m=l.totalChildrenFields,n=0,q=0;q=l.totalAdults;$.each(m,function(a,c){var b=c.find("select");b=parseInt(b.val(),10);12<=parseInt(b)?q++:0!==parseInt(b)&&1!==parseInt(b)||n++});b.length&&"lap"===b.val().toLowerCase()&&0<n&&q<n&&(g=!1);b=m.length?m[0].attr("id"):void 0;g?c.removeClass("invalid"):(c.addClass("invalid"),c.uitk_dropDown("open"));$.each(m,function(a,c){var b=c.find("select");d($(b),g,"gcw_unattendedInfantInLap_travelerSelector")});return e(b,a,g)}}});
define("gcwForm","jquery uitk uitk_datepicker xdate gcwControllers gcwDataPreloadingFunctions gcwFieldsCollection GcwFormSubmission gcwFormValidations gcwProcessingFunctions gcwStorableLegacyKeys gcwComponentInitializer GcwUtilsProcessingFunctions".split(" "),function(g,f,e,b,a,d,c,k,r,p,l,m,n){e=function(e,t,u,w,v,x,y){var h=this;h.form=e;h.valid=!0;h.isActive=!1;h.formInitialized=!1;h.dataLoadedFromLocalStorage=!1;h.gcwFormHistory=void 0;h.storedData=void 0;h.locale=h.form.data("locale");h.ignoreSavedFormData=v||!1;h.storedDataPerLocale=x||!1;h.localStorageEnabled=Modernizr.localstorage;if(h.localStorageEnabled)if(h.gcwFormHistory=JSON.parse(window.localStorage.getItem("gcw_form_history")),h.storedDataPerLocale){if(h.storedData=y||h.gcwFormHistory?h.gcwFormHistory[h.locale]:void 0,v=l.replace(h.storedData))h.storedData=v,h.gcwFormHistory[h.locale]=v,window.localStorage.setItem("gcw_form_history",JSON.stringify(h.gcwFormHistory))}else if(h.storedData=y||h.gcwFormHistory||void 0,v=l.replace(h.storedData))h.storedData=v,h.gcwFormHistory=v,window.localStorage.setItem("gcw_form_history",JSON.stringify(h.gcwFormHistory));h.fieldsCollection=new c(h);h.form.find("input, select, textarea").each(function(){h.fieldsCollection.add(g(this))});h.$lobTab=g('.tabs li button[data-section-id\x3d"#'+h.form.parent("section").attr("id")+'"]');h.alertList=e.find(".validation-alert-list");h.alertBox=e.find(".validation-alert");h.submitBtn=e.find("button[type\x3dsubmit]");h.formValidations=r;h.specialProcessingLogic=p[u];h.controller=a[w];h.specialDataPreloadingLogic=d[t];h.$roomContainer=h.form.find(".roomlabel").parent().parent();h.$roomFieldSet=h.form.find(".gcw-rooms-container .room-data").clone();h.numberOfRooms=1;h.gcwComponents=[];h.gcwComponentsInstances=[];h.travelerSelectorEnabled=e.hasClass("gcw-traveler-selector");h.setGcwComponentsList=function(){var a=h.form.find(".gcw-component"),c=[];g.each(a,function(a,b){c.push(g(b).data("gcw-component"))});h.gcwComponents=c.filter(function(a,c,b){return c===b.indexOf(a)})};h.initGcwComponents=function(){h.gcwComponents.length&&h.gcwComponents.forEach(function(a,c){require(a,function(c){h.gcwComponentsInstances.push(m.registerComponent(h,a,c))})})};h.loadFormData=function(){var a=h.form.find(".gcw-sub-nav-option");h.specialDataPreloadingLogic&&h.specialDataPreloadingLogic(h.form,h.storedData,h.ignoreSavedFormData);h.storedData&&!h.ignoreSavedFormData&&(h.updateRoomsHtml(),h.loadStoredData(),h.loadToggleElementsState());a&&a.length?(h.loadSubNavOptions(),h.setCurrentPackageType(h.form.find(".gcw-package-type:checked").attr("data-gcw-package-type"))):h.setCurrentPackageType(h.form.attr("data-gcw-current-package-type"));h.showDisabled();f.publish("mercury-form-history-loaded",{storedData:h.storedData})};h.loadFormController=function(){h.controller&&h.controller(h.form,h.getKeyParameter(),h.storedData,h.fieldsCollection)};h.getKeyParameter=function(){return h.form.data("gcw-key")?"-"+h.form.data("gcw-key"):""};h.loadStoredData=function(){h.form.find(".gcw-storeable").each(function(){var a=g(this),c=a.data("gcw-storeable-name");c=h.storedData[c];if(a.is("select")){var b=a.data("gcw-default-option-value");h.optionExistInSelect(a,c)?a.val(c):c&&b&&a.val(b)}else"checkbox"===a.attr("type")||"radio"===a.attr("type")?!0!==c&&"1"!==c||a.prop("checked",!0):(a.hasClass("gcw-start-date")||a.hasClass("gcw-end-date"))&&c?a.val(h.verifyDates(a,c)):c&&a.val(c);c&&(a.hasClass("gcw-toggle-checkbox")&&h.checkboxToggle(a),a.hasClass("gcw-toggle-search-type")&&a.prop("checked")&&h.toggleFormLOBs(a),a.data("gcw-toggled-field-class")&&h.selectToggle(a),a.data("gcw-toggled-element-by-value")&&h.selectToggleByValue(a),-1<g(h.form).attr("id").indexOf("activities")||-1<g(h.form).attr("id").indexOf("cars")||-1<g(h.form).attr("id").indexOf("rail")?h.form.addClass("gcw-timeValidLongEnough"):h.form.removeClass("gcw-timeValidLongEnough"),a.data("gcw-sub-nav-option-name")&&a.prop("checked")&&("multi"===a.data("gcw-sub-nav-option-name")?h.changeMultidestValidation("addClass"):h.changeMultidestValidation("removeClass"),-1<a.attr("id").indexOf("rail")&&-1<a.attr("id").indexOf("roundtrip")?h.changeRailsTimeValidEnoughValidation("addClass"):h.changeRailsTimeValidEnoughValidation("removeClass")),a.data("gcw-change-submit-text")&&h.changeSubmitButtonText(a),a.data("gcw-change-title-text")&&h.changeTitleText(a),a.hasClass("gcw-disable-enable-sub-nav")&&h.disableEnableSubNavs(a),a.hasClass("gcw-hide-advanced-section")&&h.hideAdvancedSection(a),a.hasClass("gcw-rooms-restriction")&&(c=h.form.find(".gcw-rooms-restriction").is(":checked"),b=a.is(":checked")?a.data("gcw-rooms-restriction-n-rooms"):h.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms"),h.applyRoomsRestriction(c,b)),a.hasClass("gcw-hide-adults-children")&&h.hideSelectsOnCheckboxChange(a),a.hasClass("gcw-toggle-form-validation")&&h.toggleFormValdation(a),a.hasClass("gcw-start-date")&&a.parents("div[data-end-date]")&&(c=g(a.parents("div[data-end-date]").data("end-date")).children("label").children("input"),h.reflectEndDateValue(a,c)),a.hasClass("gcw-end-date")&&a.parents("div[data-start-date]")&&(c=g(a.parents("div[data-start-date]").data("start-date")).children("label").children("input"),h.reflectEndDateValue(c,a)),a.hasClass("gcw-partial-hotel")&&(h.adjustRoomDataPosition(a),h.storedData["gcw-hotel-car-package-type"]&&h.adjustRoomDataPosition(a,"hotel-car")),a.hasClass("gcw-update-datepicker-range")&&(h.updateDatepickerRanges(a),h.updateDateMaxRangeError(a)))});h.dataLoadedFromLocalStorage=!0};h.updateRoomsHtml=function(){var a=h.storedData["gcw-num-rooms"],c=h.form.find(".gcw-clone-rooms-fields"),b=c.data("gcw-default-option-value");h.optionExistInSelect(c,a)?(c.val(a),h.addRoomsFields(a),h.numberOfRooms=a):a&&b&&(c.val(b),h.addRoomsFields(b),h.numberOfRooms=b)};h.loadSubNavOptions=function(){h.form.find(".gcw-sub-nav-option").each(function(){g(this).data("gcw-sub-nav-option-name")&&g(this).prop("checked")&&h.toggleOptionFields(g(this))})};h.loadToggleElementsState=function(){h.form.find("[data-control\x3dtoggle]").each(function(){var a=!1,c=h.getKeyParameter();h.form.find("#"+g(this).attr("aria-controls")).find("input.gcw-show-with-value, select.gcw-show-with-value").each(function(){g(this).is('input[type\x3d"checkbox"]')?g(this).prop("checked")&&(a=!0):g(this).attr("id")==="car-options-type"+c?"1"!==g(this).val()&&(a=!0):g(this).attr("id")==="car-options-discount"+c?"0"!==g(this).val()&&(a=!0):""!==g(this).val()&&(a=!0)});a&&!g(this).hasClass("open")||g(this).hasClass("gcw-toggle-default-open")?g(this).uitk_toggle("open"):g(this).hasClass("open")&&g(this).uitk_toggle("close");var b=h.form.find(".gcw-flights-add-car input");0<b.length&&h.hideAdvancedSection(b)})};h.optionExistInSelect=function(a,c){var b=!1;a.find("option").each(function(a,d){g(d).val()===c&&(b=!0)});return b};h.reflectFieldValue=function(a){if(a.data("template"))a.one("focus",function(){h.reflectFieldValue(a)});var c=a.data("gcw-storeable-name");h.storedData&&c in h.storedData&&f.publish("gcw.storedDataUpdate",{targetStoreableName:c});c=g(".gcw-form [data-gcw-storeable-name\x3d"+c+"]");var b=a.val();c.each(function(c,d){if(!g(d)[0].isEqualNode(a[0])){if(g(d).is("select")){var e=g(d).data("gcw-default-option-value");h.optionExistInSelect(g(d),b)?g(d).val(b):e&&g(d).val(e)}else g(d).val(b);g(d).is("input")&&"utypeahead"!==g(d).data("provide")&&g(d).trigger("input");void 0!==g(d).data("gcw-toggled-field-class")&&h.selectToggle(g(d));g(d).hasClass("gcw-guests-field")&&g(d).trigger("guestsChange");g(d).hasClass("gcw-young-child")&&g(d).prop("checked",!0);g(d).data("gcw-toggled-element-by-value")&&h.selectToggleByValue(g(d));g(d).parent("label").hasClass("gcw-rooms-field")&&g(d).trigger("setNRoomsClass");g(d).hasClass("gcw-change-submit-text")&&g(d).trigger("changeSubmitButtonText");g(d).hasClass("gcw-start-date")&&g(d).parents("div[data-end-date]")&&(e=g(g(d).parents("div[data-end-date]").data("end-date")).children("label").children("input"),
h.reflectEndDateValue(g(d),e));g(d).hasClass("gcw-end-date")&&g(d).parents("div[data-start-date]")&&(e=g(g(d).parents("div[data-start-date]").data("start-date")).children("label").children("input"),h.reflectEndDateValue(e,g(d)))}})};h.processForm=function(a){var c;h.clearHiddenInputs();h.specialProcessingLogic&&(c=h.specialProcessingLogic(h));h.validateForm()?k.submit(h,c,a):a.preventDefault()};h.getErrorFormState=function(){var a=0,c=[],b;for(b in h.formValidations){var d=h.formValidations[b],e=b.replace(/_/g,"-");h.form.hasClass(e)&&(d=d(h),d.valid||(a++,c.push(d)))}return{numFormErrors:a,badForm:c}};h.validateForm=function(){var a=h.fieldsCollection.getErrorState(),c=h.getErrorFormState();h.errorState=g.extend({},c,a);h.updateAlerts(h.errorState);if(0===h.errorState.numFormErrors&&0===h.errorState.numFieldErrors)return h.toggleSpinner(h.submitBtn),!0;f.publish("gcwForm.failedValidation",h.errorState);h.fieldsCollection.enableInactiveFields();f.utils.focusElement(e.find(".alert-title"));return!1};h.updateAlerts=function(a){var c=a.badFields;a=a.badForm;h.alertList.empty();h.alertBox.addClass("hidden").attr("aria-hidden",!0);g.each(c,function(a,c){h.toggleAlerts(c)});g.each(a,function(a,c){h.toggleAlerts([c])})};h.toggleAlerts=function(a){g.each(a,function(a,c){if(c.multiErrors)g.each(c.multiErrors,function(a,c){var b=g("#"+c.msgId).html();b=[b];this.legNumber&&(b=b.concat(this.legNumber));this.dateFormat&&(b=b.concat(this.dateFormat));b=window.format.apply(c,b);h.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"#'+c.fieldId+'"\x3e'+b+"\x3c/a\x3e\x3c/li\x3e");h.alertBox.removeClass("hidden").attr("aria-hidden",!1)});else{var b=g("#"+this.msgId).html();b=[b];this.strParams&&(b=b.concat(this.strParams));b=window.format.apply(c,b);this.hideMessage||(h.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"#'+this.fieldId+'"\x3e'+b+"\x3c/a\x3e\x3c/li\x3e"),h.alertBox.removeClass("hidden").attr("aria-hidden",!1))}})};h.focusInputError=function(a){a=a.attr("href");h.form.find(a).focus()};h.showDisabled=function(){h.form.find(".gcw-show-disabled").prop("disabled","disabled")};h.selectToggle=function(a){var c="group"===a.val()?1:parseInt(a.val(),10),b=a.data("gcw-toggled-field-parent-class");if(b&&(b=a.closest("."+b))&&0<b.length)for(a=a.data("gcw-toggled-field-class"),a=b.find("."+a),a.each(function(){g(this).addClass("gcw-disabled")}),b=0;b<c;b++)g(a[b]).toggleClass("gcw-disabled");h.checkChildrenAges()};h.selectToggleByValue=function(a){var c=[],b=parseInt(a.data("gcw-toggled-element-by-value").split(",")[1]),d=a.data("gcw-toggled-element-by-value").split(",")[0],e=a.val(),k=0,f=g(".gcw-rooms-container");h.fieldsCollection.fields.forEach(function(a,b){a.$field.hasClass("num-children")&&a.isActive()&&(a.$field.is(":visible")||a.$field.hasClass("gcw-traveler-selector-num-children"))&&c.push(a.$field)});c.forEach(function(a,c){k+=parseInt(g(a).val())});0<k?f.addClass("guests-wrapping"):f.removeClass("guests-wrapping");"gcw-young-child-note"!==d?k===b?g("#"+d).parent().addClass("gcw-disabled"):g("#"+d).parent().removeClass("gcw-disabled"):(d=h.form.find("."+d),e&&(e<=b||0===e)?d.hasClass("gcw-disabled")&&"0"!==a.closest("fieldset").find(".seat-children").val()&&!h.travelerSelectorEnabled&&h.showYoungChildNote(!0):h.checkChildrenAges(k,b,d))};h.checkChildrenAges=function(a,c,b){if(h.travelerSelectorEnabled)return h.checkChildreAgesFromTravelerSelector();var d=h.form.find(".gcw-child-age-select:visible"),e=!1,k=[];a=a||!1;c=c||1;b=b||h.form.find(".gcw-young-child-note");a||(h.fieldsCollection.fields.forEach(function(a,c){a.$field.hasClass("num-children")&&a.isActive()&&k.push(a.$field)}),k.forEach(function(c,b){a+=parseInt(g(c).val())}));for(var f=0;f<a;f++)if((b=g(d[f]).val())&&b<=c){e=!0;break}h.showYoungChildNote(e)};h.checkChildreAgesFromTravelerSelector=function(){var a=n.retrieveTravelerSelectorPassengersData(h.form).totalChildrenFields,c=!1;g.each(a,function(a,b){var d=b.find("select");d=parseInt(d.val());if(0===d||1===d)return c=!0,!1});h.showYoungChildNote(c)};h.showYoungChildNote=function(a){var c=g(".gcw-young-child-note");a?c.removeClass("gcw-disabled"):c.addClass("gcw-disabled")};h.checkboxToggle=function(a){if(a.data("gcw-toggled-element")){var c=a;a=a.data("gcw-toggled-element").split(";");var b=h.form.find(".gcw-default-visible-msg");g.each(a,function(a,d){var e=g(d);c.hasClass("gcw-gt-roundtrip")&&e.removeClass("gcw-disabled");c.hasClass("gcw-driver-age")||c.hasClass("gcw-same-pickup-dropoff")?c.prop("checked")?e.addClass("gcw-disabled"):e.removeClass("gcw-disabled"):c.prop("checked")?(b.addClass("gcw-disabled"),e.removeClass("gcw-disabled")):(b.removeClass("gcw-disabled"),e.addClass("gcw-disabled"))});1<h.form.find(".gcw-trigger-tooltip:checked").length?(b.addClass("gcw-disabled"),a=h.form.find(".gcw-msg-tooltip.gcw-tooltip-persit"),h.form.find(".gcw-msg-tooltip").addClass("gcw-disabled"),a.removeClass("gcw-disabled")):1===h.form.find(".gcw-trigger-tooltip:checked").length&&(b.addClass("gcw-disabled"),c=h.form.find(".gcw-trigger-tooltip:checked"),a=h.form.find(".gcw-trigger-tooltip:checked").data("gcw-toggled-element").split(";"),g.each(a,function(a,c){g(c).removeClass("gcw-disabled")}))}};h.isFieldNeeded=function(a,c){var b=c.data("gcw-field-available-for-sub-nav-option").split(",");return c.hasClass("gcw-disabled-by-loadStoredData")?!1:-1<g.inArray(a,b)};h.toggleOptionFields=function(a){if(a.is(":visible")){var c=a.data("gcw-sub-nav-option-name");h.form.find("[data-gcw-field-available-for-sub-nav-option]").each(function(a,b){var d=g(b);h.isFieldNeeded(c,d)?g(b).removeClass("gcw-disabled"):g(b).addClass("gcw-disabled")})}};h.changeMultidestValidation=function(a){var c=h.form.find("input.gcw-valid-date:visible");g(c[0])[a]("gcw-multidest-date")};h.changeRailsTimeValidEnoughValidation=function(a){h.form[a]("gcw-timeValidLongEnough")};h.changeTitleText=function(a){var c=h.form.find(".mobile-hero-banner-title"),b=a.data("gcw-change-title-text"),d=a.parent().siblings("label").children("input"),e="";d&&d.data("gcw-change-title-text")&&(e=d.data("gcw-change-title-text"));if(b){var k=b.split(";")[0];var f=b.split(";")[1];b=b.split(";")[2];e=e.split(";")[1];a.prop("checked")&&d&&d.prop("checked")?b&&c.text(b):a.prop("checked")?f&&c.text(f):d&&d.prop("checked")?e&&c.text(e):c.text(k)}};h.changeSubmitButtonText=function(a){var c=a.data("gcw-change-submit-text"),b=c.split(";")[2],d=c.split(";")[0];c=c.split(";")[1];var e=h.form.find('button[type\x3d"submit"]'),k="group"===h.form.find(".gcw-rooms-field select").val(),f=e.data("gcw-change-submit-text"),g=h.form.find('.gcw-change-submit-text[type\x3d"checkbox"]:checked'),r="",l;""===c?a.val()===b?e.children(".btn-label").text(d):(g&&0<g.length&&(r=1===g.length?g.data("gcw-change-submit-text").split(";")[0]:g.data("gcw-change-submit-text").split(";")[1]),e.children(".btn-label").text(0<r.length?r:f)):(b=a.prop("checked"),a=a.parent().siblings().children("input"),0<a.length&&(l=a.data("gcw-change-submit-text").split(";")[0]),b?0<a.length&&a.prop("checked")?e.children(".btn-label").text(c):e.children(".btn-label").text(d):k||(0<a.length&&a.prop("checked")?e.children(".btn-label").text(l):e.children(".btn-label").text(f)))};h.disableEnableSubNavs=function(a){var c=a.prop("checked"),b=e.find(".sub-nav-select"),d=b.find(".flight-helper"),k="car",f=h.getKeyParameter(),g=b.find(".gcw-sub-nav-option-wrapper");-1!==a.attr("id").indexOf("car")&&(k="hotel");a=e.find("#flight-add-"+k+"-checkbox"+f);c?(b.addClass("disable"),b.children("label").addClass("disable"),g.addClass("disable"),d.removeClass("gcw-disabled")):a.prop("checked")||(b.removeClass("disable"),b.children("label").removeClass("disable"),g.removeClass("disable"),d.addClass("gcw-disabled"))};h.hideSelectsOnCheckboxChange=function(a){a=a.prop("checked");var c=h.form.find(".available-for-flights");a?c.addClass("gcw-disabled gcw-disabled-by-loadStoredData"):c.removeClass("gcw-disabled gcw-disabled-by-loadStoredData")};h.updateDatepickerRanges=
function(a){var c=e.find("[data-soft-package]").not('[data-soft-package\x3d"car"]').attr("data-soft-package"),b=a.prop("checked"),d=e.find(".gcw-start-date.gcw-update-date-range").first(),k=d.closest("div"),f=e.find(".gcw-end-date.gcw-update-date-range").first();if("hotel"===c&&b){var r=e.find(".gcw-start-date.gcw-update-date-range").last();var l=r.closest("div");var p=e.find(".gcw-end-date.gcw-update-date-range").last();c=l.data("default-range-length")}else{var m=g(".package-max-range:hidden");m=m.closest("div");c=k.data("default-range-length")}b?(k.attr("data-default-range-length",1),d.attr("data-min-range-length",1),l&&void 0!==l.data("max-range-length")&&"function"===typeof k.uitk_datepicker?k.uitk_datepicker("updateOptions",{maxRangeLength:l.data("max-range-length")}):k.uitk_datepicker("updateOptions",{maxRangeLength:m.data("max-range-length")}),l?(""===r.val()&&r.val(d.val()),""===p.val()&&p.val(f.val()),h.reflectEndDateValue(r,f),h.reflectEndDateValue(r,p)):h.reflectEndDateValue(d,f)):(k.attr("data-default-range-length",c),d.attr("data-min-range-length",c),void 0!==a.data("max-range-length")&&"function"===typeof k.uitk_datepicker&&k.uitk_datepicker("updateOptions",{maxRangeLength:a.data("max-range-length")}))};h.updateDateMaxRangeError=function(a){a=a.prop("checked");h.form.find(".gcw-end-date").data("gcw-max-range-error",a?"gcw_max_range_nights":"")};h.reflectEndDateValue=function(a,c,d){if(0<a.length&&0<c.length&&c.data("gcw-date-format")){var e=a.parent("label").parent("[data-end-date]"),k=a.val(),f=c.val();c.hasClass("gcw-preloadedDate")&&!d&&(f="",c.removeClass("gcw-preloadedDate"));var g=h.getDateFromString(k),r=h.getDateFromString(f);d=new b(g);var l=new b(r);k=c.data("gcw-date-format").toLowerCase().replace(/m/g,"M");var p=0,m=0;void 0!==e.data("default-range-length")&&(p=e.data("default-range-length"));void 0!==a.data("min-range-length")&&(m=a.data("min-range-length"));g&&(a=r&&d.diffDays(l)<m,""===f||a)&&(a&&d.addDays(p),c.val(d.toString(k)))}};h.applyRoomsRestriction=function(a,c){h.travelerSelectorEnabled?h.applyRoomsRestrictionForTravelerSelector(a,c):h.applyRoomsRestrictionToRegularMarkup(a,c)};h.applyRoomsRestrictionToRegularMarkup=function(a,c){h.form.find(".gcw-rooms-field select").find("option").each(function(b,d){0<g(d).parent("span").length&&g(d).unwrap();a&&b+1>c&&0===g(d).parent("span").length&&g(d).wrap('\x3cspan style\x3d"display: none;" /\x3e')})};h.applyRoomsRestrictionForTravelerSelector=function(a,c){var b=h.form.find(".gcw-rooms-field"),d=b.data("original-max-clones-allowed");a?(b.data("max-clones-allowed",c-1),b.trigger("cloneField.maxClonesAllowed.update")):(b.data("max-clones-allowed",d),b.trigger("cloneField.maxClonesAllowed.restore"))};h.removeRoomsFields=function(a){for(var c=h.numberOfRooms;c>a;c--)h.removeFieldsFromCollection(g(h.$roomContainer.children().eq(c-1))),h.$roomContainer.children().eq(c-1).remove()};h.addRoomsFields=function(a){var c=h.form.data("lob-form");"flight"===c&&(c+="-hotel");var b=parseInt(h.numberOfRooms,10);isNaN(b)&&(b=1);for(var d=b;d<a;d++){b=h.$roomFieldSet.clone();var e=b.find(".roomlabel").html(),k=d+1,f=b.attr("id");f&&b.attr("id",f.replace("room1","room"+k));b.find(".roomlabel").html(e.replace(1,k));g.each(b.find("label"),function(a,b){var d=g(b).attr("for");void 0!==d&&g(b).attr("for",d.replace(c+"-1",c+"-"+k))});g.each(b.find("select"),function(a,b){var d=g(b).attr("id");void 0!==d&&(d=d.replace(c+"-1",c+"-"+k),g(b).attr("id",d));var e=g(b).attr("data-gcw-storeable-name");e=e.replace(1,k);d=h.storedData&&h.storedData[e];g(b).attr("data-gcw-storeable-name",e);d&&g(b).val(d);g(b).data("gcw-toggled-field-class")&&h.selectToggle(g(b))});h.$roomContainer.append(b);h.addFieldsInCollection(b)}};h.addFieldsInCollection=function(a){a.find("select").each(function(){h.fieldsCollection.add(g(this))})};h.removeFieldsFromCollection=function(a){a.find("select").each(function(){for(var a=0;a<h.fieldsCollection.fields.length;a++)h.fieldsCollection.fields[a].$field[0].id===g(this)[0].id&&h.fieldsCollection.fields.splice(a,1)})};h.hideAdvancedSection=function(a){var c=h.form.find(".gcw-advanced-options");a.prop("checked")?c.hide():c.show()};h.toggleFormLOBs=function(a){h.form.toggleClass(a.data("gcw-search-type"))};h.verifyDates=function(a,c){if(a&&a.length){var d=a.data("gcw-date-format");var e=h.getDateFromString(c);var k=a.data("new-pkg-default-date");var f=a.data("new-pkg-trip-duration");if(d&&e){e=new b(e);var g=new b;0>Math.ceil(g.diffDays(e))&&(d=d.toLowerCase().replace(/m/g,"M"),c=0<k&&-1<a.attr("id").indexOf("package")?a.hasClass("gcw-end-date")?g.addDays(k+f).toString(d):g.addDays(k).toString(d):(-1<a.attr("id").indexOf("hotel")||-1<a.attr("id").indexOf("package"))&&a.hasClass("gcw-end-date")?g.addDays(1).toString(d):g.toString(d))}}return c};h.getDateFromString=function(a){return f.datePickerCalendarObj.getDateFromString(a,!0)};h.extendTypeaheadLogic=function(){var a=h.form.find(".autocomplete-arrow").children("input"),c;f.prepFields();a.each(function(a,b){var d=g(b);d.parent().siblings("button").first().click(function(a){d.hasClass("gcw-clear-input-on-typing")&&(c=d.data("clear-on-change"))&&(a=c.split(","),1<a.length?g.each(a,function(a,c){h.clearInput(c)}):h.clearInput(c));d.trigger("change",["clearInput"])})})};h.clearHiddenInputs=function(){h.form.find(".gcw-clear-before-submit").each(function(){g(this).val("")})};h.clearInput=function(a){h.form.find("[name\x3d"+a+"]").val("")};h.toggleFormValdation=function(a){var c=a.data("gcw-toggle-form-validation-class"),b=a.data("gcw-toggle-form-validation-data-attr");c&&a.is(":checked")?(h.form.addClass(c),b&&(a=b.split(",")[0],2===b.split(",").length&&(b=b.split(",")[1],h.form.data(a,b)))):c&&(h.form.removeClass(c),b&&(a=b.split(",")[0],h.form.removeData(a)))};h.adjustRoomDataPosition=function(a,c){var b=e.find('[id*\x3d"packages-partial-dates"]'),d=e.find(".advanced-options-checkboxes");if(0<b.length){var k=e.find(".gcw-rooms-container"),f=a.prop("checked");k.remove();var g=b.parent().parent();if("hotel-car"===c)return 0<d.length&&(g=g.parent()),g.before(k),!1;f?b.append(k):(0<d.length&&(g=g.parent()),g.before(k))}};h.setCurrentState=function(){h.isActive=h.form.is(":visible")};h.setCurrentPackageType=function(a){-1<"flight hotel flight-hotel flight-hotel-car flight-car hotel-car".split(" ").indexOf(a)&&h.form.attr("data-gcw-current-package-type",a)};h.initForm=function(){h.formInitialized||(h.loadFormData(),h.extendTypeaheadLogic(),h.loadFormController(),h.setGcwComponentsList(),h.initGcwComponents(),h.formInitialized=!0)};h.toggleSpinner=function(a){if(0<a.find(".loader").length){var c=a.find("span.btn-label"),b=a.width(),d=a.height();a.css("min-width",b);a.css("min-height",d);c.hide();a.addClass("loading")}};h.form.on("submit",h.processForm);h.form.on("change",".gcw-storeable",function(a){a=g(a.target);h.reflectFieldValue(a)});h.form.on("change",".gcw-toggles-fields",function(a){a=g(a.target);h.selectToggle(a)});h.form.on("change",".gcw-toggles-field-by-value",function(a){a=g(a.target);h.selectToggleByValue(a)});h.form.on("change",".gcw-toggle-checkbox",function(a){a=g(a.target);h.checkboxToggle(a)});h.form.on("change",".gcw-sub-nav-option",function(a){var c=g(a.target);a=c.data("gcw-sub-nav-option-name");var b=h.form.find(".gcw-partial-hotel");h.toggleOptionFields(c);"multi"===a?h.changeMultidestValidation("addClass"):(h.changeMultidestValidation("removeClass"),"hotel-car"===a?h.adjustRoomDataPosition(b,"hotel-car"):h.adjustRoomDataPosition(b));-1<c.attr("id").indexOf("rail")&&-1<c.attr("id").indexOf("roundtrip")?h.form.addClass("gcw-timeValidLongEnough"):-1<g(h.form).attr("id").indexOf("activities")||g(h.form).attr("id").indexOf("cars")||h.form.removeClass("gcw-timeValidLongEnough");c=g(h.form[0]).data("gcw-key");-1<g(h.form).attr("id").indexOf("activities")&&"gt"===a&&g("#activity-gt-fromairport-"+c).prop("checked","true");-1<g(h.form).attr("id").indexOf("cars")&&"gt"===a&&g("#car-gt-fromairport-"+c).prop("checked","true")});h.form.on("change",
".gcw-change-title-text",function(a){a=g(a.target);h.changeTitleText(a)});h.form.on("change changeSubmitButtonText",".gcw-change-submit-text",function(a){a=g(a.target);h.changeSubmitButtonText(a)});h.form.on("change",".gcw-disable-enable-sub-nav",function(a){a=g(a.target);h.disableEnableSubNavs(a)});h.form.on("change",".gcw-rooms-restriction",function(a){var c=g(a.target);a=h.form.find(".gcw-rooms-restriction").is(":checked");c=c.is(":checked")?c.data("gcw-rooms-restriction-n-rooms"):h.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms");h.applyRoomsRestriction(a,c)});h.form.on("change",".gcw-hide-adults-children",function(a){a=g(a.target);h.hideSelectsOnCheckboxChange(a)});h.form.on("change",".gcw-toggle-form-validation",function(a){a=g(a.target);h.toggleFormValdation(a)});h.form.on("click",".error-link",function(a){a.preventDefault();var c=g(a.target);h.focusInputError(c);a.stopPropagation()});h.form.on("change",".gcw-toggle-search-type",function(a){h.toggleFormLOBs(g(a.target))});h.form.on("input",".gcw-clear-input-on-typing",function(a){if(a=g(a.target).data("clear-on-change")){var c=a.split(",");1<c.length?g.each(c,function(a,c){h.clearInput(c)}):h.clearInput(a)}});h.form.on("change",".gcw-hide-advanced-section",function(a){a=g(a.target);h.hideAdvancedSection(a)});h.form.on("change",".gcw-partial-hotel",function(a){a=g(a.target);h.adjustRoomDataPosition(a)});h.form.on("change",".gcw-update-datepicker-range",function(a){a=g(a.target);h.updateDatepickerRanges(a);h.updateDateMaxRangeError(a)});h.form.on("click",".gcw-package-type",function(a){a=g(a.target);if(a.attr("data-soft-package")){var c={flight:!1,hotel:!1,car:!1};a=[];c.hasOwnProperty(h.form.data("lob-form"))&&(c[h.form.data("lob-form")]=!0);g.each(h.form.find(".gcw-package-type:checked"),function(a,b){c.hasOwnProperty(g(b).data("soft-package"))&&(c[g(b).data("soft-package")]=!0)});c.flight&&a.push("flight");c.hotel&&a.push("hotel");c.car&&a.push("car");h.setCurrentPackageType(a.join("-"))}else h.setCurrentPackageType(a.data("gcw-package-type"));f.prepFields()});h.form.on("change",".gcw-clone-rooms-fields",function(){f.publish("gcw.roomsChanged",{})});f.subscribe("datepicker.selectDate",function(a,c){var b=c.element;h.reflectFieldValue(b);if(b.hasClass("gcw-start-date")&&!b.hasClass("multidest-field")&&"gcw-flights-start-date"!==b.data("gcw-storeable-name")){var d=g(b.parents("div[data-end-date]").data("end-date")).children("label").children("input");h.reflectEndDateValue(b,d,!0)}});f.subscribe("gcw.storedDataUpdate",function(a,c){h.storedData&&c.targetStoreableName in h.storedData&&delete h.storedData[c.targetStoreableName]});f.subscribe("gcw.roomsChanged",function(a,c){var b;if(0!==h.$roomContainer.length&&(void 0!==h.form.find(".gcw-clone-rooms-fields")[0]&&(b=parseInt(h.form.find(".gcw-clone-rooms-fields")[0].value,10)),void 0!==b)){isNaN(b)&&(b=1);var d=parseInt(h.numberOfRooms,10);isNaN(d)&&(d=1);d<b?h.addRoomsFields(b):d>b&&h.removeRoomsFields(b);h.numberOfRooms=b}});h.setCurrentState();h.isActive&&h.initForm();return h};e.getCurrentActiveForm=function(a){var c=[],b;for(b in a)if(c=g.grep(a[b],function(a){return!0===a.isActive}),0<c.length)break;return c};e.setFormsStatus=function(a){for(var c in a)g.each(a[c],function(a,c){c.setCurrentState()})};return e});define("gcwProcessingFunctions","GcwActivitiesProcessingFunctions GcwActivitiesIndiaProcessingFunctions GcwCarsProcessingFunctions GcwCarsAsiaProcessingFunctions GcwCarsIndiaProcessingFunctions GcwCruisesProcessingFunctions GcwFlightsProcessingFunctions GcwFlightsIndiaProcessingFunctions GcwHotelsProcessingFunctions GcwPackagesProcessingFunctions GcwPackagesFlexibleShoppingProcessingFunctions GcwRailsProcessingFunctions GcwThreeppProcessingFunctions GcwPackagesEssPassthroughProcessingFunctions".split(" "),function(g,f,e,b,a,d,c,k,r,p,l,m,n,q){return{hotels:function(a){return(new r(a)).dispatch()},flights:function(a,b,d){return(new c(a,b,d)).dispatch()},flights_india:function(a){return(new k(a)).dispatch()},rails:function(a){return(new m(a)).dispatch()},packages:function(a){var c=a.form;return c.hasClass("ess-passthrough-form")&&c.hasClass("flexible-shopping-form")?(new q(a)).dispatch():c.hasClass("flexible-shopping-form")?(new l(a)).dispatch():(new p(a)).dispatch()},cruises:function(a){return(new d(a)).dispatch()},threePP:function(a){return(new n(a)).dispatch()},threePP_ach:function(a){return(new n(a)).dispatch_ach()},threePP_eb_de:function(a){return(new n(a)).dispatch_eb_de()},cars_asia:function(a){return(new b(a)).dispatch()},cars_india:function(c){return(new a(c)).dispatch()},activities_india:function(a){return(new f(a)).dispatch()},activities:function(a){return(new g(a)).dispatch()},cars:function(a){return(new e(a)).dispatch()}}});define("GcwActivitiesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){if($("#activity-ttd"+b.idSuffix).prop("checked")){var a=b.$form.find("[name\x3dlocation]").val();var d=b.$form.find("[name\x3dstartDate]").val(),c=b.$form.find("[name\x3dendDate]").val();a="/things-to-do/search?\x26location\x3d"+a+("\x26startDate\x3d"+d)+("\x26endDate\x3d"+c)}else a=!0===$("#activity-gt-fromairport"+b.idSuffix).prop("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,a);return f.returnValue(!0,a)};return e});define("GcwActivitiesIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-destination:visible");a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");var d=b.$form.attr("action");if("/things-to-do/search"===d){var c=f.getWindowLocation();c=c.replace("wwwexpediacoin","wwwexpediacomsg").replace("www.expedia.co.in","www.expedia.com.sg");b.$form.attr("action",c+d)}d="";a&&"IN"!==a&&(d="INLX");f.setInput(b.$form,"rfrr",d);f.setUSDateInHiddenInput(b.$form,"gcw-start-date","startDate");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","endDate");return f.returnValue(!1)};return e});
define("GcwCarsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){if($("#car-car"+b.idSuffix).prop("checked"))var a=b.getCarsSearchURL();else a=!0===$("#car-gt-fromairport"+b.idSuffix).prop("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,a);return f.returnValue(!0,a)};e.prototype.getCarsSearchURL=function(){var a="carsearch?",d=b.$form.find("[name\x3dlocn]").val();d&&(a+="\x26locn\x3d"+d,(d=b.$form.find("[name\x3dpickupIATACode]").val())&&(a+="\x26pickupIATACode\x3d"+d),(d=b.$form.find("[name\x3dolat]").val())&&(a+="\x26olat\x3d"+d),(d=b.$form.find("[name\x3dolong]").val())&&(a+="\x26olong\x3d"+d),(d=b.$form.find("[name\x3ddpln]").val())&&(a+="\x26dpln\x3d"+d),(d=b.$form.find("[name\x3dpickupCountryCode]").val())&&(a+="\x26pickupCountryCode\x3d"+d));if(d=b.$form.find("[name\x3dloc2]").val())a+="\x26loc2\x3d"+d,(d=b.$form.find("[name\x3dreturnIATACode]").val())&&(a+="\x26returnIATACode\x3d"+d),(d=b.$form.find("[name\x3ddrid1]").val())&&(a+="\x26drid1\x3d"+d),(d=b.$form.find("[name\x3ddlat]").val())&&(a+="\x26dlat\x3d"+d),(d=b.$form.find("[name\x3ddlong]").val())&&(a+="\x26dlong\x3d"+d),(d=b.$form.find("[name\x3dreturnCountryCode]").val())&&(a+="\x26returnCountryCode\x3d"+d);(d=b.$form.find("[name\x3ddate1]").val())&&(a+="\x26date1\x3d"+d);(d=b.$form.find("[name\x3dtime1]").val())&&(a+="\x26time1\x3d"+d);(d=b.$form.find("[name\x3ddate2]").val())&&(a+="\x26date2\x3d"+d);(d=b.$form.find("[name\x3dtime2]").val())&&(a+="\x26time2\x3d"+d);b.$form.find("[id\x3dcar-driver-age-container"+b.idSuffix+"]").hasClass("gcw-disabled")||(d=b.$form.find("[name\x3dage]").val())&&(a+="\x26age\x3d"+d);"true"===b.$form.find("a[href\x3d#cars-adv-options"+b.idSuffix+"]").attr("aria-expanded")&&(d=b.$form.find("[name\x3dkind]").val())&&(a+="\x26kind\x3d"+d);return a+"\x26dagv\x3d1\x26subm\x3d1\x26fdrp\x3d0\x26ttyp\x3d2\x26acop\x3d2\x26rdus\x3d10\x26rdct\x3d1\x26styp\x3d4"};return e});define("GcwCarsAsiaProcessingFunctions",["classCheck","uitk","GcwUtilsProcessingFunctions"],function(g,f,e){function b(d){g(this,b);a=this;a.$form=d.form;a.idSuffix=d.getKeyParameter()}var a;b.prototype.dispatch=function(){var b=a.$form.find(".gcw-carPickUp"),c=a.$form.find(".gcw-carDropOff"),k=a.$form.find(".gcw-start-date"),g=a.$form.find(".gcw-start-time"),p=a.$form.find(".gcw-end-date"),l=a.$form.find(".gcw-end-time"),m=a.$form.find("[name\x3dlocationName]"),n=a.$form.find("[name\x3dpickupDate]"),q=a.$form.find("[name\x3dpickupMonth]"),t=a.$form.find("[name\x3dpickupYear]"),u=a.$form.find("[name\x3dreturnDate]"),w=a.$form.find("[name\x3dreturnMonth]"),v=a.$form.find("[name\x3dreturnYear]"),x=a.$form.find("[name\x3dpickupHour]"),y=a.$form.find("[name\x3dpickupMinute]"),h=a.$form.find("[name\x3dreturnHour]"),A=a.$form.find("[name\x3dreturnMinute]"),B=a.$form.find("[name\x3dpickupIATACode]"),F=a.$form.find("[name\x3dreturnIATACode]"),C=a.$form.find("[name\x3dpickupHotelId]"),E=a.$form.find("[name\x3dpickupCity]");g=g.val();l=l.val();k&&k.length&&k.val()&&(k=f.datePickerCalendarObj.getDateFromString(k.val(),!0),n&&n.length&&n.val(k.getDate()),q&&q.length&&q.val(k.getMonth()),t&&t.length&&t.val(k.getFullYear()));p&&p.length&&p.val()&&(p=f.datePickerCalendarObj.getDateFromString(p.val(),!0),u&&u.length&&u.val(p.getDate()),w&&w.length&&w.val(p.getMonth()),v&&v.length&&v.val(p.getFullYear()));c&&B&&F&&c.length&&B.length&&F.length&&""===c.val()&&""!==B.val()&&F.val(B.val());B&&B.length&&""===B.val()?(F.val(""),b=C&&E&&C.length&&E.length&&""!==C.val()&&""!==E.val()?E.val():b.val()):b="";m&&m.length&&e.setInput(a.$form,"locationName",b);x&&x.length&&e.setInput(a.$form,"pickupHour",a.convertHourCarsAsia(g));y&&y.length&&e.setInput(a.$form,"pickupMinute",parseInt(g.substring(2,4)));h&&h.length&&e.setInput(a.$form,"returnHour",a.convertHourCarsAsia(l));A&&A.length&&e.setInput(a.$form,"returnMinute",parseInt(l.substring(2,4)));return e.returnValue(!1)};b.prototype.convertHourCarsAsia=function(a){var c=-1<a.indexOf("PM"),b=parseInt(a.substring(0,2));c?12>parseInt(a.substring(0,2))&&(b=parseInt(a.substring(0,2))+12):12===parseInt(a.substring(0,2))&&(b=parseInt(a.substring(0,2))-12);return b};return b});define("GcwCarsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-carPickUp:visible");a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");a=b.$form.attr("action");if("/carsearch"===a){var d=f.getWindowLocation();d=d.replace("wwwexpediacoin","wwwexpediacom").replace("www.expedia.co.in","www.expedia.com");$("html").hasClass("lt-ie9")?b.$form.attr("action",d+a):b.$form.attr("action",d+a+"/app")}f.setUSDateInHiddenInput(b.$form,"gcw-start-date","date1");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","date2");return f.returnValue(!1)};return e});define("GcwCruisesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter();b.gcwFormInstance=a}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-show-adv-options");0<a.length&&(a.hasClass("open")?(b.$form.find(".gcw-cruises-bs").val(""),b.$form.find(".gcw-cruises-as").val("1")):(b.$form.find(".gcw-cruises-bs").val("1"),b.$form.find(".gcw-cruises-as").val("")));a=b.$form.find(".gcw-start-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"earliest-departure-date",b.getFormattedDate(a)));a=b.$form.find(".gcw-end-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"latest-departure-date",b.getFormattedDate(a)));a=b.getAdultCountElement();0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"adultCount",a));a=b.buildChildren();f.setInput(b.$form,"childCount",a);return f.returnValue(!1)};e.prototype.getFormattedDate=function(a){var b="";a=uitk.datePickerCalendarObj.getDateFromString(a);if(a){b=a.getDate();var c=a.getMonth()+1;a=a.getFullYear();b=a+"-"+c+"-"+b}return b};e.prototype.buildChildren=function(){return b.gcwFormInstance.travelerSelectorEnabled?b.buildChildrenForTravelerSelector():b.buildChildrenForRegularMarkup()};e.prototype.buildChildrenForRegularMarkup=function(){var a=b.$form.find(".num-children:visible"),d="";if(a&&0<a.length&&0<a.val()){d+=a.val();d+="\x26childAges\x3d";var c=b.$form.find(".children-data select:visible");c.each(function(a,b){d+=$(b).val();a!==c.length-1&&(d+=",")})}return d};e.prototype.buildChildrenForTravelerSelector=function(){var a=f.retrieveTravelerSelectorPassengersData(b.gcwFormInstance.form),d=a.totalChildrenFields.length,c="";if(0<d){c+=d;c+="\x26childAges\x3d";var e=a.totalChildrenFields;$.each(e,function(a,b){c+=$(b).find("select").val();a!==e.length-1&&(c+=",")})}return c};e.prototype.getAdultCountElement=function(){return b.gcwFormInstance.travelerSelectorEnabled?b.$form.find(".gcw-traveler-selector-num-adults"):b.$form.find(".num-adults:visible")};return e});
define("GcwFlightsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function d(a){g(this,d);c=this;c.$form=a.form;c.idSuffix=a.getKeyParameter();c.gcwFormInstance=a}var c;d.prototype.dispatch=function(){var d=c.getFlightType();f.setInput(c.$form,"trip",d);var g=f.getLocationField(c.$form,"origin").val(),p=f.getLocationField(c.$form,"destination").val(),l=c.$form.find(".gcw-flights-start-date:visible input").val();l=c.buildLeg(g,p,l);f.setInput(c.$form,"leg1",l);"oneway"===d&&f.setInput(c.$form,"leg2","");"roundtrip"===d&&(l=c.$form.find(".gcw-flights-end-date:visible input").val(),g=c.buildLeg(p,g,l),f.setInput(c.$form,"leg2",g));if("multi"===d)for(d=$(c.$form.find(".gcw-multi-flight-data")),g=0;4>g&&d.find("input.gcw-destination").eq(g).val();g++){p=d.find("input.gcw-origin").eq(g).val();l=d.find("input.gcw-destination").eq(g).val();var m=d.find("input.gcw-start-date").eq(g).val();p=c.buildLeg(p,l,m);f.setInput(c.$form,"leg"+(g+2),p)}d=c.buildPassengers();f.setInput(c.$form,"passengers",d);d=c.buildOptions();f.setInput(c.$form,"options",d);return c.isPackage()?(d=c.$form.hasClass("ess-passthrough-form")&&c.$form.hasClass("flexible-shopping-form")?a.getFlightsPackageUrl(c.$form):c.$form.hasClass("flexible-shopping-form")?b.getFlightsPackageUrl(c.$form):e.getFlightsPackageUrl(c.$form),f.returnValue(!0,d)):f.returnValue(!1)};d.prototype.buildLeg=function(a,c,b){return"from:"+a+",to:"+c+",departure:"+b+"TANYT"};d.prototype.getFlightType=function(){return c.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip"};d.prototype.retrievePassengersData=function(){return c.gcwFormInstance.travelerSelectorEnabled?c.retrieveTravelerSelectorPassengersData():c.retrieveDropdownsPassengersData()};d.prototype.retrieveTravelerSelectorPassengersData=function(){var a=c.$form.find(".travel-selector-wrapper:visible"),b=a.find(".gcw-traveler-amount-select"),d={},e=c.$form.find('input[name\x3d"lap-or-seat"]:checked');a=a.find(".gcw-child-field").not(".gcw-disabled");d.childrenAges=[];a.each(function(a,c){d.childrenAges.push($(c).find("select").val())});d.adults=parseInt(b.data("adults"),10);d.children=parseInt(b.data("children"),10);d.infantInLap=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y";return d};d.prototype.retrieveDropdownsPassengersData=function(){var a={},b=c.$form.find(".children-data select:visible"),d=c.$form.find(".num-adults:visible"),e=c.$form.find('input[name\x3d"lap-or-seat"]:checked');a.adults=d.val();a.children=b.length;a.childrenAges=[];b&&0<b.length&&b.each(function(c,b){a.childrenAges.push($(b).val())});a.infantInLap=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y";return a};d.prototype.buildPassengers=function(){var a=c.retrievePassengersData(),b="",d=c.buildChildren(a),e=a.infantInLap;b=b+("children:"+d)+(",adults:"+a.adults);return b+",seniors:0"+(",infantinlap:"+e)};d.prototype.buildChildren=function(a){return 0<a.children?a.children+"["+a.childrenAges.toString().replace(/,/g,";")+"]":"0"};d.prototype.buildOptions=function(){var a=c.$form.find(".gcw-cabin-class-select").val(),b=0<c.$form.find(".gcw-nonstop-checkbox:checked").length?"0":"",d=0<c.$form.find(".gcw-refundable-checkbox:checked").length?"Y":"",e=c.$form.find(".gcw-airline-select").val(),f="";a&&(f+="cabinclass:"+a+",");b&&(f+="maxhops:"+b+",");d&&(f+="nopenalty:"+d+",");e&&(f+="carrier:"+e);return f};d.prototype.isPackage=function(){var a=c.$form.find(".gcw-flights-add-hotel input"),b=c.$form.find(".gcw-flights-add-car input");a=a.is(":visible")&&a.prop("checked");b=b.is(":visible")&&b.prop("checked");return a||b};return d});define("GcwFlightsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip",d=b.$form.find(".children-data select:visible"),c=b.splitChildren(d);d=c[0];c=c[1];var e=b.$form.find(".num-adults:visible").val();f.setInput(b.$form,"rnd_one","O");f.setInput(b.$form,"dep_time","");"roundtrip"===a&&f.setInput(b.$form,"ret_time","");f.setInput(b.$form,"adults",e);f.setInput(b.$form,"childs",0===d?"":d);f.setInput(b.$form,"infants",0===c?"":c);f.setInput(b.$form,"affiliatePartnerId","0");return f.returnValue(!1)};e.prototype.splitChildren=function(a){var b=0,c=0;a&&0<a.length&&a.each(function(a,d){$(d).val()&&1>$(d).val()?c++:$(d).val()&&b++});return[b,c]};return e});
define("GcwHotelsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function d(a){g(this,d);c=this;c.$form=a.form;c.idSuffix=a.getKeyParameter();c.gcwFormInstance=a}var c;d.prototype.dispatch=function(){if(c.isNinePlusRooms()){var d=c.getNinePlusRoomsUrl();return f.returnValue(!0,d)}if(0<c.$form.find(".gcw-guests-select select:visible").length)d=c.$form.find(".gcw-guests-select select option:selected").data("gcw-guests-values").split(","),$.each(d,function(a,b){if("adults"===b.split("-")[0]){var d=b.split("-")[1];c.$form.find("[name\x3dadults]").first().val(d)}"children"===b.split("-")[0]&&(d=b.split("-")[1],c.$form.find("[name\x3dchildren]").first().val(d))});else{d=c.calculateAdultOccupancyString();var g=c.calculateChildOccupancyString();c.$form.find("[name\x3dadults]").first().val(d);c.$form.find("[name\x3dchildren]").first().val(g)}c.isTAAPPackageRate()&&c.$form.find("[name\x3dpackageRates]").first().val(!0);return c.isPackage()?(d=c.$form.hasClass("ess-passthrough-form")&&c.$form.hasClass("flexible-shopping-form")?a.getHotelsPackageUrl(c.$form,c.idSuffix):c.$form.hasClass("flexible-shopping-form")?b.getHotelsPackageUrl(c.$form,c.idSuffix):e.getHotelsPackageUrl(c.$form,c.idSuffix),f.returnValue(!0,d)):f.returnValue(!1)};d.prototype.calculateChildOccupancyString=function(){return c.gcwFormInstance.travelerSelectorEnabled?f.calculateChildOccupancyStringWithTravelerSelector(c.gcwFormInstance):f.calculateChildOccupancyStringWithDropdowns(c.gcwFormInstance)};d.prototype.calculateAdultOccupancyString=function(){return c.gcwFormInstance.travelerSelectorEnabled?c.buildAdultOccupancyWithTravelerSelector():c.buildAdultOccupancyWithDropdowns()};d.prototype.buildAdultOccupancyWithDropdowns=function(){var a=[];c.$form.find(".gcw-rooms-container .room-data:visible").each(function(){a.push($(this).find(".num-adults").val())});return a.toString()};d.prototype.buildAdultOccupancyWithTravelerSelector=function(){for(var a=f.retrieveTravelerSelectorPassengersData(c.gcwFormInstance.form),b=a.rooms,d=[],e=0;e<b;e++)d.push(a["room_"+(e+1)].adults);return d.toString()};d.prototype.isNinePlusRooms=function(){return c.gcwFormInstance.travelerSelectorEnabled?"group"===c.$form.find(".gcw-rooms-field").val():"group"===c.$form.find(".gcw-rooms-field").children("select").val()};d.prototype.getNinePlusRoomsUrl=function(){var a=c.$form.data("gcw-group-booking-url"),b=c.$form.data("locale"),d=c.$form.data("siteid"),e=c.$form.find("#hotel-destination"+c.idSuffix).val(),f=c.$form.find("#hotel-checkin"+c.idSuffix).val();f=c.convertFormat(f);var g=c.$form.find("#hotel-checkout"+c.idSuffix).val();g=c.convertFormat(g);var q=c.isExtendedStay(f,g)?"\x26ES\x3d1":"";return a+"?ESite\x3d"+d+"\x26Loc\x3d"+b+"\x26City\x3d"+encodeURIComponent(e)+"\x26InDate\x3d"+f+"\x26OutDate\x3d"+g+q};d.prototype.convertFormat=function(a){if(!a||!a.length)return"";a=uitk.datePickerCalendarObj.getDateFromString(a,!0);if(!a)return"";var b=c.numberToTwoDigitString(a.getMonth()+1),d=c.numberToTwoDigitString(a.getDate());a=a.getFullYear();return b+"/"+d+"/"+a};d.prototype.numberToTwoDigitString=function(a){a=a.toString();return 1===a.length?"0"+a:a};d.prototype.isExtendedStay=function(a,c){if(!(a&&a.length&&c&&c.length))return!1;a=uitk.datePickerCalendarObj.getDateFromString(a,!0);c=uitk.datePickerCalendarObj.getDateFromString(c,!0);return 30<=(c-a)/1E3/60/60/24};d.prototype.isPackage=function(){var a=0<c.$form.find("#hotel-add-flight-checkbox"+c.idSuffix+":checked").length,b=0<c.$form.find("#hotel-add-car-checkbox"+c.idSuffix+":checked").length;return a||b?!0:!1};d.prototype.isTAAPPackageRate=function(){return 0<c.$form.find("#package-rates-checkbox-variant"+c.idSuffix+":checked").length};return d});
define("GcwPackagesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=f.getLocationField(b.$form,"origin"),d=f.getLocationField(b.$form,"destination"),c=b.$form.find("#packages-type"+b.idSuffix),k=b.$form.find("#packages-fr-airport"+b.idSuffix),g=b.$form.find("#packages-dest-name"+b.idSuffix),p=b.$form.find("#packages-from-date"+b.idSuffix),l=b.$form.find("#packages-to-date"+b.idSuffix),m="\x26"+e.calculateAdultsForPackages(b.$form),n="\x26"+e.calculateChildrenForPackages(b.$form);m+=n;var q=b.$form.find("#packages-flex-from"+b.idSuffix),t=b.$form.find("#packages-flex-to"+b.idSuffix),u=b.$form.find("#package-checkin"+b.idSuffix+":visible"),w=b.$form.find("#package-checkout"+b.idSuffix+":visible"),v=b.$form.find("#packages-cabin-class"+b.idSuffix),x=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);n=b.$form.find(".gcw-destination:visible");var y=f.getUTAFeature(n,"region_id"),h=f.getUTAFeature(n,"airport_code");n=0;y&&h&&f.setInput(b.$form,"DestID",y+":"+h);m=m.split("\x26");y=""===c.val()?b.packageSelectedForUrl():c.val();""!==y&&c.val(y);k.val(a.val());g.val(d.val());p.val(b.$form.find(".gcw-start-date:visible").val());l.val(b.$form.find(".gcw-end-date:visible").val());0<u.length&&q.val(u.val());0<w.length&&t.val(w.val());""!==x.val()&&x.is(":visible")?v.val(x.val()):v.val("");for(n;n<m.length;n++)a=m[n].split("\x3d")[0],d=m[n].split("\x3d")[1],1<m[n].length&&f.setInput(b.$form,a,d);return f.returnValue(!1)};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key"),c=f.getLocationField(a,"origin"),k=f.getLocationField(a,"destination");var g="\x26"+e.getFlightsPackageType(a);k="\x26destName\x3d"+k.val();var p="\x26FromDate\x3d"+a.find(".gcw-start-date:visible").val();var l="\x26ToDate\x3d"+a.find(".gcw-end-date:visible").val();var m="";if("\x26PackageType\x3d1"===g||"\x26PackageType\x3d5"===g){var n=a.find("#driver-age-checkbox-"+b).is(":checked");!n&&void 0!==n&&void 0!==a.find("#car-driver-age-"+b).val()&&a.find("#car-driver-age-"+b).val()&&(m="\x26driverAge\x3d"+a.find("#car-driver-age-"+b).val())}c="\x26frAirport\x3d"+c.val();b=(b=e.getFlightsAirlineOptionsUrl(a,b))?"\x26"+b:"";n="\x26FlexFromDate\x3d"+a.find(".gcw-start-date:visible").last().val();var q="\x26FlexToDate\x3d"+a.find(".gcw-end-date:visible").last().val();var t="\x26"+e.calculateAdultsForPackages(a);a=e.calculateChildrenForPackages(a);return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+g+k+p+l+m+c+b+n+q+t+(a?"\x26"+a:"")};e.getHotelsPackageUrl=function(a,b){var c="\x26"+e.getHotelsPackageType(a,b);var d="\x26destName\x3d"+a.find(".gcw-destination").val();var f="\x26FromDate\x3d"+a.find(".gcw-start-date").val();var g="\x26ToDate\x3d"+a.find(".gcw-end-date").val();var l="";if("\x26PackageType\x3d1"===c||"\x26PackageType\x3d3"===c){var m=a.find("#driver-age-checkbox"+b).is(":checked");!m&&void 0!==m&&void 0!==a.find("#car-driver-age"+b)&&a.find("#car-driver-age"+b).val()&&(l="\x26driverAge\x3d"+a.find("#car-driver-age"+b).val())}m="\x26frAirport\x3d"+a.find(".gcw-flight-origin").val();var n="\x26"+e.calculateAdultsForPackages(a);var q=(q=e.calculateChildrenForPackages(a))?"\x26"+q:"";var t=e.sortByPropertyType(a);var u=a.find("#packageDirectFlight"+b).is(":checked");return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+c+d+f+g+l+m+n+q+t+(u?"\x26Direct\x3d1":"")};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&a.find(".gcw-flights-add-car input").prop("checked");var c="PackageType\x3d";b&&a?c+=1:b&&!a?c+=2:!b&&a&&(c+=5);return c};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="PackageType\x3d";c&&d?e+=1:c?e+=2:d&&(e+=3);return e};e.getFlightsAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#flight-advanced-options-fields-"+b).is(":visible")){(c=a.find("#flight-advanced-preferred-airline-"+b).val())&&d.push("Carrier\x3d"+c);c=a.find("#flight-advanced-preferred-class-"+b).val();switch(c){case "first":c="1";break;case "business":c="2";break;default:c=""}c&&d.push("Class\x3d"+c);c=a.find("#advanced-flight-nonstop-"+b).is(":checked")}else c=a.find("#packageDirectFlight-"+b).is(":checked");c&&d.push("Direct\x3d1");return d.join("\x26")};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateAdultsForPackagesWithTravelerSelector(a):e.calculateAdultsForPackagesWithDropdowns(a)};e.calculateAdultsForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);var b=a.rooms,c=[];c.push("NumRoom\x3d"+b);for(var e=0;e<b;e++){var g=e+1;c.push("NumAdult"+g+"\x3d"+a["room_"+g].adults)}return c.join("\x26")};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("NumRoom\x3d"+b.length),b.each(function(a,b){c.push("NumAdult"+(a+1)+"\x3d"+$(b).find(".num-adults").val())})):(c.push("NumRoom\x3d1"),c.push("NumAdult1\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateChildrenForPackagesWithTravelerSelector(a):e.calculateChildrenForPackagesWithDropdowns(a)};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,p=0;p<g;p++){var l=p+1,m=a["room_"+l].children;b.push("NumChild"+l+"\x3d"+m);for(var n=0;n<m;n++){var q=n,t=q+1;q=a["room_"+l].$childrenFields.eq(q).find("select");q=parseInt(q.val(),10)||0;c.push("Rm"+l+"Child"+t+"Age\x3d"+q)}}e=e.concat(b,c);if(b.length&&c.length)return e.push("InfantInSeat\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("NumChild"+(a+1)+"\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("Rm"+(a+1)+"Child"+(b+1)+"Age\x3d"+e)})}):(b.push("NumChild1\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("Rm1Child"+(a+1)+"Age\x3d"+d)}));e=e.concat(b,c);if(b.length&&c.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("InfantInSeat\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortBy\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});
define("GcwPackagesFlexibleShoppingProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.selectors={driverAgeCheckboxSelector:"#driver-age-checkbox",driverAgeFieldSelector:"#car-driver-age",directFlightSelector:"#packageDirectFlight",partialCarSelector:"#partialCarBooking",packagesToDateSelector:"#packages-to-date",packageTypeSelector:"#packages-type",packageFromAirportSelector:"#packages-fr-airport",packageDestinationNameSelector:"#packages-dest-name",carPickupDate:"#package-car-pickup-date",carPickupTime:"#package-car-pickup-time",carDropOffDate:"#package-car-dropoff-date",carDropOffTime:"#package-car-dropoff-time"};e.flex={flexibleShoppingUrl:"/flexibleshopping?",directFlight:"isDirectFlight\x3d",driverAge:"driverAge\x3d",ttla:"ttla\x3d",fromDate:"fromDate\x3d",toDate:"toDate\x3d",destination:"destination\x3d",ftla:"ftla\x3d",originId:"originId\x3d",origin:"origin\x3d",destinationId:"destinationId\x3d",carPickupDate:"pickUpDate\x3d",carPickupTime:"time1\x3d",carDropOffDate:"dropOffDate\x3d",carDropOffTime:"time2\x3d"};e.prototype.dispatch=function(){var a=e.selectors,d=b.$form.find(a.packageTypeSelector+b.idSuffix),c=b.$form.find(a.packageFromAirportSelector+b.idSuffix),k=b.$form.find(a.packageDestinationNameSelector+b.idSuffix),g=b.$form.find("#packages-from-date"+b.idSuffix);a=b.$form.find(a.packagesToDateSelector+b.idSuffix);var p="\x26"+e.calculateAdultsForPackages(b.$form),l="\x26"+e.calculateChildrenForPackages(b.$form);p+=l;var m=b.$form.find("#packages-flex-from"+b.idSuffix),n=b.$form.find("#packages-flex-to"+b.idSuffix),q=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),w=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);l=0;p=p.split("\x26");var v=""===d.val()?b.packageSelectedForUrl():d.val();""!==v&&d.val(v);c.val(b.$form.find(".gcw-origin:visible").val());k.val(b.$form.find(".gcw-destination:visible").val());g.val(b.$form.find(".gcw-start-date:visible").val());a.val(b.$form.find(".gcw-end-date:visible").val());0<q.length&&m.val(q.val());0<t.length&&n.val(t.val());""!==w.val()&&w.is(":visible")?u.val(w.val()):u.val("");for(l;l<p.length;l++)d=p[l].split("\x3d")[0],c=p[l].split("\x3d")[1],1<p[l].length&&f.setInput(b.$form,d,c);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.packageContainsFlight=function(a){return"packageType\x3dfh"===a||"packageType\x3dfc"===a||"packageType\x3dfhc"===a};e.packageContainsCar=function(a){return"packageType\x3dhc"===a||"packageType\x3dfc"===a||"packageType\x3dfhc"===a};e.getDirectFlightParameter=function(a,b){var c="",d=a.find(e.selectors.directFlightSelector+b).is(":checked");void 0!==d&&d&&(c="\x26"+e.flex.directFlight+"1");return c};e.getValueInForm=function(a,b){return a.find(b).val()};e.getCarRentalParameters=function(a,b){var c=e.selectors,d="";var f=a.find(c.partialCarSelector+b).is(":checked");if(void 0!==f&&f){f=e.getValueInForm(a,c.carPickupDate+b);var g=e.getValueInForm(a,c.carPickupTime+b);var l=e.getValueInForm(a,c.carDropOffDate+b);c=e.getValueInForm(a,c.carDropOffTime+b);f&&(d+="\x26"+e.flex.carPickupDate+f,d+="\x26"+e.flex.carPickupTime+g);l&&(d+="\x26"+e.flex.carDropOffDate+l,d+="\x26"+e.flex.carDropOffTime+c)}return d};e.getDriverAgeParameter=function(a,b){var c=e.selectors,d="",f=a.find(c.driverAgeCheckboxSelector+b).is(":checked");f||void 0===f||(c=a.find(c.driverAgeFieldSelector+b),void 0!==c&&c.val()&&(d="\x26"+e.flex.driverAge+c.val()));return d};e.prototype.getPackageUrl=function(a,b){var c="",d="",g="";var p=a.find(".gcw-origin:visible");var l=a.find(".gcw-destination:visible");var m=e.flex.flexibleShoppingUrl;var n=e.getPackageType(a);var q=p.val()?"\x26"+e.flex.origin+p.val():"";var t=f.getUTAFeature(p,"region_id");p=f.getUTAFeature(p,"airport_code");t=t?"\x26"+e.flex.originId+t:"";p=p?"\x26"+e.flex.ftla+p:"";var u=(u=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+u:"";var w="\x26"+e.flex.destination+l.val();var v=f.getUTAFeature(l,"region_id");l=f.getUTAFeature(l,"airport_code");v=v?"\x26"+e.flex.destinationId+v:"";l=l?"\x26"+e.flex.ttla+l:"";var x="\x26"+e.flex.fromDate+a.find(".gcw-start-date:visible").val();var y="\x26"+e.flex.toDate+a.find(".gcw-end-date:visible").val();var h=(h=-1<n.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+h:"";var A="\x26"+e.calculateAdultsForPackages(a);var B=(B=e.calculateChildrenForPackages(a))?"\x26"+B:"";e.packageContainsCar(n)&&(d=e.getCarRentalParameters(a,b),g=e.getDriverAgeParameter(a,b));e.packageContainsFlight(n)&&(c=e.getDirectFlightParameter(a,b));return encodeURI(m+n+q+t+p+u+w+v+l+x+y+h+A+B+g+d+c)};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key"),c="",k="";var g=a.find(".gcw-origin:visible");var p=a.find(".gcw-destination:visible");var l=e.flex.flexibleShoppingUrl;var m=e.getFlightsPackageType(a);var n="\x26"+e.flex.destination+a.find(".gcw-destination:visible").val();var q=f.getUTAFeature(p,"region_id");var t=f.getUTAFeature(p,"airport_code");q=q?"\x26"+e.flex.destinationId+q:"";t=t?"\x26"+e.flex.ttla+t:"";p="\x26"+e.flex.fromDate+a.find(".gcw-start-date:visible").val();var u="\x26"+e.flex.toDate+a.find(".gcw-end-date:visible").val();var w="\x26"+e.flex.origin+a.find(".gcw-origin:visible").val();var v=f.getUTAFeature(g,"region_id");g=f.getUTAFeature(g,"airport_code");v=v?"\x26"+e.flex.originId+v:"";g=g?"\x26"+e.flex.ftla+g:"";var x=(x=e.getFlightsAirlineOptionsUrl(a))?"\x26"+x:"";var y=(y=-1<m.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+y:"";var h="\x26"+e.calculateAdultsForPackages(a);var A=(A=e.calculateChildrenForPackages(a))?"\x26"+A:"";e.packageContainsCar(m)&&(c=e.getDriverAgeParameter(a,"-"+b),k=e.getCarRentalParameters(a,"-"+b));a=e.getDirectFlightParameter(a,"-"+b);return encodeURI(l+m+n+q+t+p+u+c+w+v+g+x+y+h+a+A+k)};e.getHotelsPackageUrl=function(a,b){var c=a.find(".gcw-flight-origin:visible");var d=a.find(".gcw-destination:visible");var g=e.flex.flexibleShoppingUrl;var p="?"+e.getHotelsPackageType(a,b);var l="\x26"+e.flex.destination+a.find(".gcw-destination").val();var m=f.getUTAFeature(d,"region_id");d=f.getUTAFeature(d,"airport_code");m=m?"\x26"+e.flex.destinationId+m:"";d=d?"\x26"+e.flex.ttla+d:"";var n="\x26"+e.flex.fromDate+a.find(".gcw-start-date").val();var q="\x26"+e.flex.toDate+a.find(".gcw-end-date").val();var t="",u="",w="";e.packageContainsCar(p.substr(1))&&(w=e.getCarRentalParameters(a,+b),t=e.getDriverAgeParameter(a,b));e.packageContainsFlight(p.substr(1))&&(u=e.getDirectFlightParameter(a,b));var v=c.val()?"\x26"+e.flex.origin+c.val():"";var x=f.getUTAFeature(c,"region_id");c=f.getUTAFeature(c,"airport_code");x=x?"\x26"+e.flex.originId+x:"";c=c?"\x26"+e.flex.ftla+c:"";var y="\x26"+e.calculateAdultsForPackages(a);var h=(h=e.calculateChildrenForPackages(a))?"\x26"+h:"";var A=e.sortByPropertyType(a);return encodeURI(g+p.substr(1)+l+m+d+n+q+t+v+x+c+y+h+w+A+u)};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,d){var c="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":c+="fhc";break;case "2":c+="fh";break;case "3":c+="hc";break;case "5":c+="fc";break;default:c+="fh"}return c};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&
a.find(".gcw-flights-add-car input").prop("checked");var c="packageType\x3d";b&&a?c+="fhc":b&&!a?c+="fh":!b&&a&&(c+="fc");return c};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="packageType\x3d";c&&d?e+="fhc":c?e+="fh":d&&(e+="hc");return e};e.getPackagesAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&d.push("cabinClass\x3d"+c),d.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a){var b;var c=[];if(a.find("#flight-advanced-options-fields-hp-flight").is(":visible")){(b=a.find("#flight-advanced-preferred-airline-hp-flight").val())&&c.push("flightCarrier\x3d"+b);b=a.find("#flight-advanced-preferred-class-hp-flight").val();switch(b){case "first":b="f";break;case "business":b="b";break;case "premium":b="p";break;default:b=""}b&&c.push("cabinClass\x3d"+b);(a=a.find("#advanced-flight-nonstop-hp-flight").is(":checked"))&&c.push("isDirectFlight\x3d1");return c.join("\x26")}};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateAdultsForPackagesWithTravelerSelector(a):e.calculateAdultsForPackagesWithDropdowns(a)};e.calculateAdultsForPackagesWithTravelerSelector=function(a){var b=[];a=f.retrieveTravelerSelectorPassengersData(a);var c=a.rooms;b.push("numberOfRooms\x3d"+c);for(var e=0;e<c;e++){var g=e+1;b.push("adultsPerRoom["+g+"]\x3d"+a["room_"+g].adults)}return b.join("\x26")};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){c.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(c.push("numberOfRooms\x3d1"),c.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateChildrenForPackagesWithTravelerSelector(a):e.calculateChildrenForPackagesWithDropdowns(a)};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,p=0;p<g;p++){var l=p+1,m=a["room_"+l].children;b.push("childrenPerRoom["+l+"]\x3d"+m);for(var n=0;n<m;n++){var q=n,t=q+1;q=a["room_"+l].$childrenFields.eq(q).find("select");q=parseInt(q.val(),10)||0;c.push("childAges["+l+"]["+t+"]\x3d"+q)}}e=e.concat(b,c);if(b.length&&c.length)return e.push("infantsInSeats\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("childAges[1]["+(a+1)+"]\x3d"+d)}));e=e.concat(b,c);if(b.length&&c.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});define("GcwRailsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".num-adults:visible").val();a=b.buildValues(a,"adults");var d=b.buildAges(".children-data select:visible"),c=b.buildAges(".youth-data select:visible"),e=b.buildAges(".seniors-data select:visible");a=b.buildRailsPassengers(a,d,c,e);d=b.buildRailcard();f.setInput(b.$form,"age_pax",a);f.setInput(b.$form,"rail_card",d);return f.returnValue(!1)};e.prototype.buildAges=function(a){a=b.$form.find(a);var d=[];a&&0<a.length&&a.each(function(a,b){d.push($(b).val().toString())});return d};e.prototype.buildValues=function(a,b){var c=0,d=[];switch(b){case "adults":for(c;c<a;c++)d.push("40");break;case "seniors":for(c;c<a;c++)d.push("60")}return d};e.prototype.buildRailsPassengers=function(a,b,c,e){a=a.concat(b).concat(c).concat(e);return a=a.toString()};e.prototype.buildRailcard=function(){var a=b.$form.find(".railcards-list-fieldset:visible"),d,c,e=[];a&&0<a.length&&a.each(function(a,b){var f=0;d=$(b).find(".gcw-railcard-select").val();c=$(b).find(".gcw-railcard-count-select").val();if(""!==d)for(c=parseInt(c),f;f<c;f++)e.push(d)});return e.toString()};return e});
define("GcwThreeppProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter();b.gcwFormInstance=a}var b;e.prototype.dispatch=function(){var a=b.$form.find("[name\x3dorigin]"),d=b.$form.find("[name\x3doriginCityName]"),c=b.$form.find("[name\x3ddestination]"),e=b.$form.find("[name\x3ddestinationCityName]"),g=b.$form.find("[name\x3dcountry]"),p=b.$form.find("[name\x3dcountryCode]"),l=b.$form.find("[name\x3dexpGroupCode]"),m=b.$form.find(".gcw-hidden-input-children-age"),n=b.$form.find(".gcw-threepp-hotels-select"),q=b.getThreeppOriginValues(),t=b.getThreeppDestinationValues(),u=b.calculateChildOccupancyString(),w=[],v=[];a&&a.length&&d&&d.length&&(f.setInput(b.$form,"origin",q.origin),f.setInput(b.$form,"originCityName",q.originCityName));c&&c.length&&e&&e.length&&g&&g.length&&p&&p.length&&(f.setInput(b.$form,"destination",t.destination),f.setInput(b.$form,"destinationCityName",t.destinationCityName),f.setInput(b.$form,"country",t.country),f.setInput(b.$form,"countryCode",t.countryCode));l&&l.length&&f.setInput(b.$form,"expGroupCode",t.expGroupCode);u&&(w=u.split(","),$.each(w,function(a,b){""!==b.split("_")[1]?v.push(b.split("_")[1]):v.push("-1")}));m&&m.length&&m.each(function(a,b){a<v.length?$(b).val(v[a]):$(b).val("-1")});n&&n.length&&f.setInput(b.$form,"hotelSelected",n.val());return f.returnValue(!1)};e.prototype.calculateChildOccupancyString=function(){return b.gcwFormInstance.travelerSelectorEnabled?f.calculateChildOccupancyStringWithTravelerSelector(b.gcwFormInstance):f.calculateChildOccupancyStringWithDropdowns(b.gcwFormInstance)};e.prototype.dispatch_ach=function(){var a=b.$form.find("[name\x3dcurrency]"),d=b.$form.find(".gcw-start-date"),c=b.$form.find(".gcw-end-date"),e=b.$form.find(".gcw-threepp-duration-select"),g=b.$form.find('input[name\x3d"isLcFilter"]'),p=b.$form.find(".num-adults"),l=b.getThreeppOriginValues(),m=b.getThreeppDestinationValues(),n=b.calculateChildOccupancyString(),q=[],t=[],u=b.$form.attr("action"),w=b.$form.data("locale"),v=function(a){return 0<a},x=function(a){a=a.split(".");return a[2]+"-"+a[1]+"-"+a[0]};f.setInput(b.$form,"rgid",m.destination);f.setInput(b.$form,"rid",m.destinationCityName);"string"===typeof l.origin&&0<l.origin.length&&f.setInput(b.$form,"depap",l.origin);n&&(q=n.split(","),$.each(q,function(a,b){""!==b.split("_")[1]?t.push(b.split("_")[1]):t.push("-1")}));l=b.$form.find("[name\x3drid]").val();u=void 0!==l&&0<l.length?u+("hotel?rid\x3d"+l):u+"region?";l=b.$form.find("[name\x3drgid]").val();void 0!==l&&0<l.length&&"any"!==l&&(u+="\x26rgid\x3d"+l);l=b.$form.find("[name\x3ddepap]").val();u+="\x26currency\x3d"+a.val();u+="\x26ddate\x3d"+x(d.val());u+="\x26rdate\x3d"+x(c.val());u+="\x26adult\x3d"+p.val();void 0!==l&&0<l.length&&"any"!==l&&(u+="\x26depap\x3d"+l);void 0!==t&&0<t.length&&(t=t.filter(v),u+="\x26child\x3d"+t.join());void 0!==e.val()&&"any"!==e.val()&&(u+="\x26dur\x3d"+e.val());"10122006"!==b.$form.attr("data-siteid")&&(g.prop("checked")&&(u+="\x26trans\x3d1"),u+="\x26lang\x3d"+w.replace("_","-"));return f.returnValue(!0,u)};e.prototype.getThreeppOriginValues=function(){var a=b.$form.find(".gcw-threepp-origin-input"),d="",c="";if(a&&a.length){var e=a.val();var f=e.split(":");e&&(d=f[0],c=f[1]||a.find("option:selected").data("sort"))}return{origin:d,originCityName:c}};e.prototype.getThreeppDestinationValues=function(){var a=b.$form.find(".gcw-threepp-destination-input"),d="",c="",e="",f="",g="";if(a&&a.length){var l=a.val();var m=l.split(":");l&&(d=m[0],c=m[1]||a.find("option:selected").data("label"),e=m[2]||a.find("option:selected").attr("country"),void 0!==m[3]&&(f=m[3]),void 0!==m[4]&&(g=m[4]))}return{destination:d,destinationCityName:c,country:e,countryCode:f,expGroupCode:g}};e.prototype.dispatch_eb_de=function(){var a=b.$form.find(".gcw-threepp-origin-input"),d=b.$form.find(".gcw-threepp-destination-input"),c=b.$form.find(".gcw-start-date"),e=b.$form.find(".gcw-end-date"),g=b.$form.find(".gcw-threepp-duration-select"),p=b.$form.find('input[name\x3d"isLcFilter"]'),l=b.$form.find(".num-adults"),m=b.$form.find(".room-data:visible").find(".gcw-child-field select:visible");a=a.val()||"";d=d.val()||"";c=c.val()||"";e=e.val()||"";g=g.val()||"";var n="";switch(l.val()||""){case "1":n="25";break;case "2":n="25;25";break;case "3":n="25;25;25";break;case "4":n="25;25;25;25"}l=0<m.length?$(m[0]).val():"";var q=1<m.length?$(m[1]).val():"";m=2<m.length?$(m[2]).val():"";m=b.$form.attr("action")+"?rgid\x3d"+d+"\x26rid\x3d\x26GOTO\x3dTTPauschalreisen\x26ibe\x3dpackage\x26lnkloc\x3dlmn_1\x26lnkcid\x3d100\x26tab\x3dlmn\x26showresult\x3d1\x26StrWizTag\x3dTT_HolidayHome\x26KID\x3d840000\x26frbuch\x3d\x26agent\x3d\x26org_tla\x3d\x26formular\x3d2\x26sortierung\x3d\x26detail\x3dzielgebiet\x26rliste\x3d2\x26zfilter\x3d\x26backon\x3d1\x26hostexp\x3d\x26wzdf\x3d\x26wzid\x3d\x26termin\x3d"+c+"\x26ruecktermin\x3d"+e+"\x26abflughafen\x3d"+a+"\x26dauer\x3d"+g+"\x26topRegionenCache\x3d"+d+"\x26topRegionen\x3d\x26zimmer\x3d-1\x26erwachsene\x3d"+n+"\x26alter1\x3d"+l+"\x26alter2\x3d"+q+"\x26alter3\x3d"+m+"\x26alter4\x3d-1\x26alter5\x3d-1\x26alter6\x3d-1\x26alter7\x3d-1\x26alter8\x3d-1\x26hbfges\x3d0\x26hbfanz\x3d0\x26hbfempf\x3d0\x26kategorie\x3d-1\x26shotel\x3d\x26typ\x3d-1\x26preis\x3d-1\x26verpflegung\x3d-1\x26sportangebot\x3d-1\x26marke\x3d-1\x26wizardSubmit.x\x3d23\x26wizardSubmit.y\x3d4\x26wizardSubmit\x3dFinden";p.prop("checked")&&(m+="\x26lcfilter\x3d513;0");return f.returnValue(!0,m+"\x26rfrr\x3d-58089")};return e});
define("GcwUtilsProcessingFunctions",["classCheck"],function(g){function f(){g(this,f)}f.returnValue=function(e,b){return{redirect:e,url:(b||"")+"\x26_xpid\x3d11905|1"}};f.calculateChildOccupancyStringWithDropdowns=function(e){var b=[];e.form.find(".room-data:visible").each(function(a){$(this).find(".gcw-child-field select:visible").each(function(d){b.push(a+1+"_"+$(this).val())})});return b.toString()};f.calculateChildOccupancyStringWithTravelerSelector=function(e){e=f.retrieveTravelerSelectorPassengersData(e.form);for(var b=e.rooms,a=[],d=0;d<b;d++){var c=d+1;e["room_"+c].$childrenFields.each(function(b,d){var e=$(d).find("select");a.push(c+"_"+e.val())})}return a.toString()};f.getGroundTransfersSearchURL=function(e,b,a){var d,c,f,g;var p=g=f=0;var l="/ground-transfers/search?";a||(l+="direction\x3dH2A");if(a){var m=e.find("[name\x3dgtOriginAirport]").val();window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===m&&(d=a)});f=e.find("[name\x3dgtDestinationHotel]");a=f.val();window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(c=window.lx.cache.hotelSuggestionsMap[a]&&window.lx.cache.hotelSuggestionsMap[a].hotelId);var n=f.data("rid");var q=e.find("[name\x3dgtOriginFlightArrivalDate]").val();var t=e.find("[name\x3dgtOriginFlightPickUpTime]  option:selected").text();f=e.find("[name\x3dgtOriginFlightAdultsCount]").val();g=e.find("[name\x3dgtOriginFlightChildrenCount]").val();p=e.find("[name\x3dgtOriginFlightInfantsCount]").val();$("#gt-roundtrip-flight-departure-module"+b).hasClass("gcw-disabled")||(b=e.find("[id\x3dgt-hotel-departure-date"+b+"]").val(),e=e.find("[name\x3dgtAirportDropOffTime]  option:selected").text(),l+="\x26roundTrip\x3dtrue",b&&(l+="\x26dropOffDate\x3d"+b),e&&(l+="\x26dropOffTime\x3d"+e))}else f=e.find("[name\x3dgtOriginHotel]"),a=f.val(),window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(c=window.lx.cache.hotelSuggestionsMap[a]&&window.lx.cache.hotelSuggestionsMap[a].hotelId),n=f.data("rid"),m=e.find("[name\x3dgtDestinationAirport]").val(),window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===m&&(d=a)}),q=e.find("[name\x3dgtOriginHotelPickUpDate]").val(),t=e.find("[name\x3dgtOriginHotelPickUpTime]  option:selected").text(),f=e.find("[name\x3dgtOriginHotelAdultsCount]").val(),g=e.find("[name\x3dgtOriginHotelChildrenCount]").val(),p=e.find("[name\x3dgtOriginHotelInfantsCount]").val();d&&(l+="\x26airportCode\x3d"+d);l=l+("\x26location\x3d"+m)+("\x26hotelName\x3d"+a);c&&(l+="\x26hotelId\x3d"+c);q&&(l+="\x26pickUpDate\x3d"+q);t&&(l+="\x26pickUpTime\x3d"+t);f&&(l+="\x26adults\x3d"+f);g&&(l+="\x26children\x3d"+g);p&&(l+="\x26infants\x3d"+p);n&&(l+="\x26regionId\x3d"+n);return l};f.setInput=function(e,b,a){e.find("[name\x3d'"+b+"']").val(a)};f.replaceFormAction=function(e,b,a){var d=e.attr("action"),c=e.data("gcw-original-action"),f=e.data("gcw-new-action");b&&b!==a?f&&f!==d&&e.attr("action",f):c&&c!==d&&e.attr("action",c)};f.setUSDateInHiddenInput=function(e,b,a){b=e.find("."+b);var d=e.find("[name\x3d"+a+"]");b&&d&&b.length&&d.length&&""!==b.val()&&(b=f.convertDateToUSFormat(b.val()),f.setInput(e,a,b))};f.convertDateToUSFormat=function(e){return e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/)?(e=e.split("/"),e[1]+"/"+e[0]+"/"+e[2]):e};f.getUTAFeature=function(e,b){var a=e.closest("div").parent().find("input[type\x3dhidden]");return 0<a.length?a.filter('input[id*\x3d"'+b+'"]').val():void 0};f.getUTAFeatures=function(e){var b={};e.closest("div").parent().find("input[type\x3dhidden]").each(function(){""!==$(this).val()&&(b[$(this).data("gcw-storeable-name").slice(4)]=$(this).val())});return 0<Object.keys(b).length?b:void 0};f.getWindowLocation=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")};f.getLocationField=function(e,b){var a={origin:{uta:"gcw-origin",dropdown:"origin"},destination:{uta:"gcw-destination",dropdown:"destination"}},d=$(),c=f.getLocationSearchType(e);a.hasOwnProperty(b)&&c&&(d=e.find("."+a[b][c]+":visible"));return d};f.getLocationSearchType=function(e){return e.data("location-search-type")||"uta"};f.retrieveTravelerSelectorPassengersData=function(e){var b={},a=e.find(".travel-selector-wrapper:visible"),d=a.find(".gcw-traveler-amount-select"),c=e.find('input[name\x3d"lap-or-seat"]:checked'),f=[];e=a.find(".traveler-selector-room-data");var g=d.data("total-rooms")||1;e.each(function(a,c){var d=a+1,e=$(c).find(".gcw-traveler-selector-num-adults"),g=$(c).find(".gcw-traveler-selector-num-children"),k=$(c).find(".gcw-child-field").not(".gcw-disabled");e=parseInt(e.val());var l=0;g.each(function(a,b){l+=parseInt($(b).val(),10)||0});k.each(function(a,b){f.push($(b))});b["room_"+d]={adults:e,children:l,$childrenFields:k}});b.$activeTravelerSelector=a;b.totalTravelers=d.data("total-travelers");b.totalAdults=d.data("adults");b.totalchildren=d.data("children");b.totalChildrenFields=f;b.rooms=g;b.infantInLap=0<c.length&&"seat"===c.val().toLowerCase()?"N":"Y";return b};return f});
define("GcwPackagesEssPassthroughProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find("#packages-type"+b.idSuffix),d=b.$form.find("#packages-fr-airport"+b.idSuffix),c=b.$form.find("#packages-dest-name"+b.idSuffix),g=b.$form.find("#packages-from-date"+b.idSuffix),r=b.$form.find("#packages-to-date"+b.idSuffix),p="\x26"+e.calculateAdultsForPackages(b.$form),l="\x26"+e.calculateChildrenForPackages(b.$form);p+=l;var m=b.$form.find("#packages-flex-from"+b.idSuffix),n=b.$form.find("#packages-flex-to"+b.idSuffix),q=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),w=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);l=0;p=p.split("\x26");var v=""===a.val()?b.packageSelectedForUrl():a.val();""!==v&&a.val(v);d.val(b.$form.find(".gcw-origin:visible").val());c.val(b.$form.find(".gcw-destination:visible").val());g.val(b.$form.find(".gcw-start-date:visible").val());r.val(b.$form.find(".gcw-end-date:visible").val());0<q.length&&m.val(q.val());0<t.length&&n.val(t.val());""!==w.val()&&w.is(":visible")?u.val(w.val()):u.val("");for(l;l<p.length;l++)a=p[l].split("\x3d")[0],d=p[l].split("\x3d")[1],1<p[l].length&&f.setInput(b.$form,a,d);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.prototype.getPackageUrl=function(a,b){var c=a.find(".gcw-origin:visible");var d=a.find(".gcw-destination:visible");var g=e.getPackageType(a);var p=c.val()?"\x26origin\x3d"+c.val():"";var l=(l=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+l:"";var m="\x26destination\x3d"+d.val();var n="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();var q="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();var t=(t=-1<g.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+t:"";var u="\x26"+e.calculateAdultsForPackages(a);var w=(w=e.calculateChildrenForPackages(a))?"\x26"+w:"";c=f.getUTAFeature(c,"-ta");d=f.getUTAFeature(d,"-ta");c=e.getEssJson(c,d);return"/flexibleshopping?"+g+p+l+m+n+q+t+u+w+c};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key");var c=a.find(".gcw-origin:visible");var g=a.find(".gcw-destination:visible");var r=e.getFlightsPackageType(a);var p="";if("packageType\x3dfc"===r||"packageType\x3dfhc"===r){var l=a.find("#driver-age-checkbox-"+b).is(":checked");l||void 0===l||(l=a.find("#car-driver-age-"+b),void 0!==l&&l.val()&&(p="\x26driverAge\x3d"+l.val()))}var m="\x26destination\x3d"+a.find(".gcw-destination:visible").val();l="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();var n="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();var q="\x26origin\x3d"+a.find(".gcw-origin:visible").val();b=(b=e.getFlightsAirlineOptionsUrl(a,b))?"\x26"+b:"";var t=(t=-1<r.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+t:"";var u="\x26"+e.calculateAdultsForPackages(a);a=(a=e.calculateChildrenForPackages(a))?"\x26"+a:"";c=f.getUTAFeature(c,"-ta");g=f.getUTAFeature(g,"-ta");g=e.getEssJson(c,g);return"/flexibleshopping?"+r+m+l+n+p+q+b+t+u+a+g};e.getHotelsPackageUrl=function(a,b){var c=a.find(".gcw-flight-origin:visible");var d=a.find(".gcw-destination:visible");var g="?"+e.getHotelsPackageType(a,b);var p="";if("?packageType\x3dhc"===g||"?packageType\x3dfhc"===g){var l=a.find("#driver-age-checkbox"+b).is(":checked");l||void 0===l||(l=a.find("#car-driver-age"+b),void 0!==l&&l.val()&&(p="\x26driverAge\x3d"+l.val()))}var m=a.find("#packageDirectFlight"+b).is(":checked")?"\x26isDirectFlight\x3d1":"";l="\x26destination\x3d"+a.find(".gcw-destination").val();var n="\x26fromDate\x3d"+a.find(".gcw-start-date").val();var q="\x26toDate\x3d"+a.find(".gcw-end-date").val();var t=c.val()?"\x26origin\x3d"+c.val():"";var u="\x26"+e.calculateAdultsForPackages(a);var w=(w=e.calculateChildrenForPackages(a))?"\x26"+w:"";var v=e.sortByPropertyType(a);c=f.getUTAFeature(c,"-ta");d=f.getUTAFeature(d,"-ta");d=e.getEssJson(c,d);return"/flexibleshopping"+g+l+n+q+p+t+u+w+v+m+d};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,d){var c="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":c+="fhc";break;case "2":c+="fh";break;case "3":c+="hc";break;case "5":c+="fc";break;default:c+=""}return c};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").is(":visible")&&a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").is(":visible")&&a.find(".gcw-flights-add-car input").prop("checked");var c="packageType\x3d";b&&a?c+="fhc":b&&!a?c+="fh":!b&&a&&(c+="fc");return c};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="packageType\x3d";c&&d?e+="fhc":c?e+="fh":d&&(e+="hc");return e};e.getPackagesAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&d.push("cabinClass\x3d"+c),d.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#flight-advanced-options-fields-"+b).is(":visible")){(c=a.find("#flight-advanced-preferred-airline-"+b).val())&&d.push("flightCarrier\x3d"+c);c=a.find("#flight-advanced-preferred-class-"+b).val();switch(c){case "first":c="f";break;case "business":c="b";break;case "premium":c="p";break;default:c=""}c&&d.push("cabinClass\x3d"+c);c=a.find("#advanced-flight-nonstop-"+b).is(":checked")}else c=a.find("#packageDirectFlight-"+b).is(":checked");c&&d.push("isDirectFlight\x3d1");return d.join("\x26")};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateAdultsForPackagesWithTravelerSelector(a):e.calculateAdultsForPackagesWithDropdowns(a)};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){c.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(c.push("numberOfRooms\x3d1"),c.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateAdultsForPackagesWithTravelerSelector=function(a){var b=[];a=f.retrieveTravelerSelectorPassengersData(a);var c=a.rooms;b.push("numberOfRooms\x3d"+c);for(var e=0;e<c;e++){var g=e+1;b.push("adultsPerRoom["+g+"]\x3d"+a["room_"+g].adults)}return b.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateChildrenForPackagesWithTravelerSelector(a):e.calculateChildrenForPackagesWithDropdowns(a)};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("childAges[1]["+(a+1)+"]\x3d"+d)}));e=e.concat(b,c);if(b.length&&c.length)return a=
a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,p=0;p<g;p++){var l=p+1,m=a["room_"+l].children;b.push("childrenPerRoom["+l+"]\x3d"+m);for(var n=0;n<m;n++){var q=n,t=q+1;q=a["room_"+l].$childrenFields.eq(q).find("select");q=parseInt(q.val(),10)||0;c.push("childAges["+l+"]["+t+"]\x3d"+q)}}e=e.concat(b,c);if(b.length&&c.length)return e.push("infantsInSeats\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};e.getEssJson=function(a,b){var c="\x26essJson\x3d",d={orig:"",dest:""};a&&b?(d.orig=JSON.parse(a),d.dest=JSON.parse(b),c+=JSON.stringify(d)):a?(d={orig:""},d.orig=JSON.parse(a),c+=JSON.stringify(d)):b?(d={dest:""},d.dest=JSON.parse(b),c+=JSON.stringify(d)):c="";return c};return e});define("gcwStorableLegacyKeys",[],function(){return{legacyCurrentKeysMap:{"gcw-rails-typeahead-orig":"gcw-rails-origin-station_code","gcw-rails-typeahead-dest":"gcw-rails-destination-station_code"},getLegacyCurrentKeysMap:function(){return this.legacyCurrentKeysMap},replace:function(g){var f=!1;if(null!==g&&"object"===typeof g){var e=this.getLegacyCurrentKeysMap(),b;for(b in e)g.hasOwnProperty(b)&&(f=!0,g[e[b]]=g[b],delete g[b])}return f?g:!1}}});define("gcw-store-form-data-com.example.demo.controller",["oip","jquery"],function(g,f){function e(){b=!(0<f("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length);a="ignoreSavedFormData";g.canTrack||(b=g.canTrack,a="oip.canTrack");return{canTrack:b,src:a,init:e}}var b=!1,a;return e()});define("gcwTabsLogic",["jquery","uitk","uitk_tabs"],function(g,f){function e(b){b=(b||window.location.search).replace(/^\?/,"").split("\x26");var a;for(a=0;a<b.length;a++){var d=b[a].split("\x3d");if("lob"===d[0])return!0}return!1}return{selectLastSearchLobTab:function(b,a,d,c){if(!e(c)&&!b&&Modernizr.localstorage&&(b=window.localStorage.getItem("gcw_lob_tab"))){b=JSON.parse(b);a&&b[d]&&(b=b[d]);var f;a=g('li.tab button[data-lob\x3d"'+b+'"]');0===a.length&&(d={"flight-hotel":"flightHotel","flight-hotel-car":"flightHotelCar","flight-car":"flightCar","hotel-car":"hotelCar"},d[b]&&(a=g('li.tab button[data-lob\x3d"'+d[b]+'"]')),0===a.length&&(d={flightHotel:"flight-hotel",flightHotelCar:"flight-hotel-car",flightCar:"flight-car",hotelCar:"hotel-car"},d=d[b],a=g('li.tab button[data-lob\x3d"package"]'),d&&(f=g('.gcw-sub-nav-option[value\x3d"'+d+'"]'))));0<a.length&&a.click();f&&0<f.length&&f.prop("checked",!0)}},isLobParamPresentInUrl:e}});require("uitk",function(g){$(".tab").on("click",function(f){var e=$(f.target).closest("button"),b=e.data("gcw-tab-link");b&&(f.stopPropagation(),e.data("gcw-tab-link-new-window")?window.open(b,b):window.location=b)});$("button[data-gcw-add-disabled-mobile-classes]").each(function(){var f=$(this),e=f.data("gcw-add-disabled-mobile-classes");if(e){e=e.split(",");for(var b=0;b<e.length;b++)""!==e[b]&&f.parent().addClass(e[b])}});$(".wizard-tabs .tab").css("display","list-item")});(function(){var g={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},e=[].slice;var b=function(a){function b(a){this.message=a}f(b,a);b.prototype.name="ValueError";return b}(Error);var a=function(a){null==a&&(a={});return function(){var c;var f=arguments[0];var g=2<=arguments.length?e.call(arguments,1):[];var k=0;var r=c=!1;return f.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(e,f,l,p){var m,n;if(f)return f;if(l.length){if(c)throw new b("cannot switch from implicit to explicit numbering");r=!0;e=null!=(m=d(g,l))?m:""}else{if(r)throw new b("cannot switch from explicit to implicit numbering");c=!0;e=null!=(n=g[k++])?n:""}return Object.prototype.hasOwnProperty.call(a,p)?a[p](e):e})}};var d=function(a,b){var d;for(/^(\d+)([.]|$)/.test(b)||(b="0."+b);d=/(.+?)[.](.+)/.exec(b);)a=c(a,d[1]),b=d[2];return c(a,b)};var c=function(a,b){var c=a[b];return"function"===typeof c?c.call(a):c};var k=a({});k.create=a;k.extend=function(b,c){var d=a(c);b.format=function(){return d.apply(null,[this].concat(e.call(arguments)))}};window.format=k}).call(this);define("classCheck",function(){return function(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function");}});
var XDate=function(g,f,e,b){function a(){var b=this instanceof a?this:new a;var e=arguments;var f=e.length,k;"boolean"==typeof e[f-1]&&(k=e[--f],e=E(e,0,f));if(f)if(1==f)if(f=e[0],f instanceof g||"number"==typeof f)b[0]=new g(+f);else if(f instanceof a){e=b;var h=new g(+f[0]);d(f)&&(h.toString=I);e[0]=h}else{if("string"==typeof f)a:{b[0]=new g(0),e=f;f=k||!1;h=a.parsers;for(var l=0,r;l<h.length;l++)if(r=h[l](e,f,b)){b=r;break a}b[0]=new g(e)}}else b[0]=new g(G.apply(g,e)),k||(b[0]=A(b[0]));else b[0]=new g;"boolean"==typeof k&&c(b,k);return b}function d(a){return a[0].toString===I}function c(a,b,c){b?d(a)||(c&&(a[0]=new g(G(a[0].getFullYear(),a[0].getMonth(),a[0].getDate(),a[0].getHours(),a[0].getMinutes(),a[0].getSeconds(),a[0].getMilliseconds()))),a[0].toString=I):d(a)&&(a[0]=c?A(a[0]):new g(+a[0]));return a}function k(a,b,c,d,e){var f=C(y,a[0],e);a=C(h,a[0],e);e=!1;2==d.length&&"boolean"==typeof d[1]&&(e=d[1],d=[c]);c=1==b?(c%12+12)%12:f(1);a(b,d);e&&f(1)!=c&&(a(1,[f(1)-1]),a(2,[B(f(0),f(1))]))}function r(a,b,c,d){c=Number(c);var e=f.floor(c);a["set"+H[b]](a["get"+H[b]]()+e,d||!1);e!=c&&6>b&&r(a,b+1,(c-e)*L[b],d)}function p(b,c,d){b=b.clone().setUTCMode(!0,!0);c=a(c).setUTCMode(!0,!0);var e=0;if(0==d||1==d){for(var g=6;g>=d;g--)e/=L[g],e+=y(c,!1,g)-y(b,!1,g);1==d&&(e+=12*(c.getFullYear()-b.getFullYear()))}else 2==d?(d=b.toDate().setUTCHours(0,0,0,0),e=c.toDate().setUTCHours(0,0,0,0),e=f.round((e-d)/864E5)+(c-e-(b-d))/864E5):e=(c-b)/[36E5,6E4,1E3,1][d-3];return e}function l(a){var b=a(0),c=a(1),d=a(2);a=new g(G(b,c,d));b=n(m(b,c,d));return f.floor(f.round((a-b)/864E5)/7)+1}function m(a,b,c){b=new g(G(a,b,c));return b<n(a)?a-1:b>=n(a+1)?a+1:a}function n(a){a=new g(G(a,0,4));a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+6)%7);return a}function q(a,c,d,e){var f=C(y,a,e),g=C(h,a,e);d===b&&(d=m(f(0),f(1),f(2)));d=n(d);e||(d=A(d));a.setTime(+d);g(2,[f(2)+7*(c-1)])}function t(b,c,d,e,f){var g=a.locales,k=g[a.defaultLocale]||{},h=C(y,b,f);d=("string"==typeof d?g[d]:d)||{};return u(b,c,function(a){if(e)for(var b=(7==a?2:a)-1;0<=b;b--)e.push(h(b));return h(a)},function(a){return d[a]||k[a]},f)}function u(a,c,d,e,f){for(var g,k,h="";g=c.match(M);){h+=c.substr(0,g.index);if(g[1]){k=h;h=a;for(var l=g[1],r=d,p=e,m=f,n=l.length,q,t="";0<n;)q=w(h,l.substr(0,n),r,p,m),q!==b?(t+=q,l=l.substr(n),n=l.length):n--;h=k+(t+l)}else g[3]?(k=u(a,g[4],d,e,f),parseInt(k.replace(/\D/g,""),10)&&(h+=k)):h+=g[7]||"'";c=c.substr(g.index+g[0].length)}return h+c}function w(b,c,d,e,g){var k=a.formatters[c];if("string"==typeof k)return u(b,k,d,e,g);if("function"==typeof k)return k(b,g||!1,e);switch(c){case "fff":return D(d(6),3);case "s":return d(5);case "ss":return D(d(5));case "m":return d(4);case "mm":return D(d(4));case "h":return d(3)%12||12;case "hh":return D(d(3)%12||12);case "H":return d(3);case "HH":return D(d(3));case "d":return d(2);case "dd":return D(d(2));case "ddd":return e("dayNamesShort")[d(7)]||"";case "dddd":return e("dayNames")[d(7)]||"";case "M":return d(1)+1;case "MM":return D(d(1)+1);case "MMM":return e("monthNamesShort")[d(1)]||"";case "MMMM":return e("monthNames")[d(1)]||"";case "yy":return(d(0)+"").substring(2);case "yyyy":return d(0);case "t":return v(d,e).substr(0,1).toLowerCase();case "tt":return v(d,e).toLowerCase();case "T":return v(d,e).substr(0,1);case "TT":return v(d,e);case "z":case "zz":case "zzz":return g?c="Z":(e=b.getTimezoneOffset(),b=0>e?"+":"-",d=f.floor(f.abs(e)/60),e=f.abs(e)%60,g=d,"zz"==c?g=D(d):"zzz"==c&&(g=D(d)+":"+D(e)),c=b+g),c;case "w":return l(d);case "ww":return D(l(d));case "S":return c=d(2),10<c&&20>c?"th":["st","nd","rd"][c%10-1]||"th"}}function v(a,b){return 12>a(3)?b("amDesignator"):b("pmDesignator")}function x(a){return!isNaN(+a[0])}function y(a,b,c){return a["get"+(b?"UTC":"")+H[c]]()}function h(a,b,c,d){a["set"+(b?"UTC":"")+H[c]].apply(a,d)}function A(a){return new g(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}function B(a,b){return 32-(new g(G(a,b,32))).getUTCDate()}function F(a){return function(){return a.apply(b,[this].concat(E(arguments)))}}function C(a){var c=E(arguments,1);return function(){return a.apply(b,c.concat(E(arguments)))}}function E(a,c,d){return e.prototype.slice.call(a,c||0,d===b?a.length:d)}function J(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function D(a,b){b=b||2;for(a+="";a.length<b;)a="0"+a;return a}var H="FullYear Month Date Hours Minutes Seconds Milliseconds Day Year".split(" "),K=["Years","Months","Days"],L=[12,31,24,60,60,1E3,1],M=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,G=g.UTC,I=g.prototype.toUTCString,z=a.prototype;z.length=1;z.splice=e.prototype.splice;z.getUTCMode=F(d);z.setUTCMode=F(c);z.getTimezoneOffset=function(){return d(this)?0:this[0].getTimezoneOffset()};J(H,function(a,b){z["get"+a]=function(){return y(this[0],d(this),b)};8!=b&&(z["getUTC"+a]=function(){return y(this[0],!0,b)});7!=b&&(z["set"+a]=function(a){k(this,b,a,arguments,d(this));return this},8!=b&&(z["setUTC"+a]=function(a){k(this,b,a,arguments,!0);return this},z["add"+(K[b]||a)]=function(a,c){r(this,b,a,c);return this},z["diff"+(K[b]||a)]=function(a){return p(this,a,b)}))});z.getWeek=function(){return l(C(y,this,!1))};z.getUTCWeek=function(){return l(C(y,this,!0))};z.setWeek=function(a,b){q(this,a,b,!1);return this};z.setUTCWeek=function(a,b){q(this,a,b,!0);return this};z.addWeeks=function(a){return this.addDays(7*Number(a))};z.diffWeeks=function(a){return p(this,a,2)/7};a.parsers=[function(a,b,c){if(a=a.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var d=new g(G(a[1],a[3]?a[3]-1:0,a[5]||1,a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0));a[13]?a[14]&&d.setUTCMinutes(d.getUTCMinutes()+("-"==a[15]?1:-1)*(60*Number(a[16])+(a[18]?Number(a[18]):0))):b||(d=A(d));return c.setTime(+d)}}];a.parse=function(b){return+a(""+b)};z.toString=function(a,c,e){return a!==b&&x(this)?t(this,a,c,e,d(this)):this[0].toString()};z.toUTCString=z.toGMTString=function(a,c,d){return a!==b&&x(this)?t(this,a,c,d,!0):this[0].toUTCString()};z.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")};a.defaultLocale="";a.locales={"":{monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),amDesignator:"AM",pmDesignator:"PM"}};a.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"};J("getTime valueOf toDateString toTimeString toLocaleString toLocaleDateString toLocaleTimeString toJSON".split(" "),function(a){z[a]=function(){return this[0][a]()}});z.setTime=function(a){this[0].setTime(a);return this};z.valid=F(x);z.clone=function(){return new a(this)};z.clearTime=function(){return this.setHours(0,0,0,0)};z.toDate=function(){return new g(+this[0])};a.now=function(){return+new g};a.today=function(){return(new a).clearTime()};a.UTC=G;a.getDaysInMonth=B;"undefined"!==typeof module&&module.exports&&(module.exports=a);"function"===typeof define&&define.amd&&define([],function(){return a});return a}(Date,Math,Array);define("xdate",function(){return XDate});
define("gcw-custom-typeahead.hbs",["handlebars"],function(g){var f=g.template({1:function(e,b,a,d,c,f,g){var k;return'  \x3cli class\x3d"results-item-ally" role\x3d"presentation"\x3e\n'+(null!=(k=a["if"].call(null!=b?b:{},null!=g[1]?g[1].isV4:g[1],{name:"if",hash:{},fn:e.program(2,c,0,f,g),inverse:e.program(4,c,0,f,g),data:c}))?k:"")+"    \x3c/a\x3e\n  \x3c/li\x3e\n"},2:function(e,b,a,d,c){var f,g;return'    \x3ca href\x3d"#" class\x3d"details uitk-ta" data-value\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.regionNames:b)?f.lastSearchName:f,b))+'" id\x3d"aria-option-'+e.escapeExpression((g=null!=(g=a.index||c&&c.index)?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"index",hash:{},data:c}):g))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((g=null!=(g=a.gaiaId||(null!=b?b.gaiaId:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"gaiaId",hash:{},data:c}):g))+'" data-type\x3d"'+e.escapeExpression((g=null!=(g=a.type||(null!=b?b.type:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"type",hash:{},data:c}):g))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.rails:f)?f.stationCode:f,b))+'" data-airport-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.airport:f)?f.airportCode:f,b))+'" data-lat\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.coordinates:b)?f.lat:f,b))+'" data-long\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=b?b.coordinates:b)?f["long"]:f,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((g=null!=(g=a.icon||(null!=b?b.icon:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"icon",hash:{},data:c}):g))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(f=e.lambda(null!=(f=null!=b?b.regionNames:b)?f.displayName:f,b))?f:"")+"\n"},4:function(e,b,a,d,c){var f,g;return'    \x3ca href\x3d"#" class\x3d"details" data-value\x3d"'+e.escapeExpression((g=null!=(g=a.l||(null!=b?b.l:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"l",hash:{},data:c}):g))+'" id\x3d"aria-option-'+e.escapeExpression((g=null!=(g=a.index||c&&c.index)?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"index",hash:{},data:c}):g))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((g=null!=(g=a.id||(null!=b?b.id:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"id",hash:{},data:c}):g))+'" data-type\x3d"'+e.escapeExpression((g=null!=(g=a.t||(null!=b?b.t:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"t",hash:{},data:c}):g))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(f=null!=(f=null!=b?b.hierarchyInfo:b)?f.rails:f)?f.stationCode:f,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((g=null!=(g=a.icon||(null!=b?b.icon:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"icon",hash:{},data:c}):g))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(f=(g=null!=(g=a.d||(null!=b?b.d:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"d",hash:{},data:c}):g))?f:"")+"\n"},6:function(e,b,a,d,c){var f,g;return null!=(f=(g=null!=(g=a.closeText||(null!=b?b.closeText:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"closeText",hash:{},data:c}):g))?f:""},8:function(e,b,a,d,c){var f;return null!=(f=(a.i18n||b&&b.i18n||a.helperMissing).call(null!=b?b:{},"close",{name:"i18n",hash:{bundle:"uitk_messages",locale:null!=b?b.locale:b},data:c}))?f:""},compiler:[7,"\x3e\x3d 4.0.0"],main:function(e,b,a,d,c,f,g){var k,l;return'\x3cul id\x3d"'+e.escapeExpression((l=null!=(l=a.ariaOwns||(null!=b?b.ariaOwns:b))?l:a.helperMissing,"function"===typeof l?l.call(null!=b?b:{},{name:"ariaOwns",hash:{},data:c}):l))+'" role\x3d"listbox" class\x3d"results"\x3e\n'+(null!=(k=a.each.call(null!=b?b:{},null!=b?b.results:b,{name:"each",hash:{},fn:e.program(1,c,0,f,g),inverse:e.noop,data:c}))?k:"")+'\x3c/ul\x3e\n\x3cfooter class\x3d"footer" role\x3d"application"\x3e\n  \x3ca class\x3d"close" href\x3d"#" aria-label\x3d\''+(null!=(k=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,c,0,f,g),inverse:e.noop,data:c}))?k:"")+"\n    "+(null!=(k=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,c,0,f,g),inverse:e.noop,data:c}))?k:"")+"'\x3e\n    "+(null!=(k=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,c,0,f,g),inverse:e.noop,data:c}))?k:"")+"\n    "+(null!=(k=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,c,0,f,g),inverse:e.noop,data:c}))?k:"")+'\n    \x3cspan class\x3d"icon icon-close"\x3e\x3c/span\x3e\n  \x3c/a\x3e\n\x3c/footer\x3e'},useData:!0,useDepths:!0});g.templates=g.templates||{};g.templates["gcw-custom-typeahead"]=f;g.partials=g.partials||{};return g.partials["gcw-custom-typeahead"]=f});define("gcwComponentInitializer",["jquery"],function(g){return{registerComponent:function(f,e,b){var a=0,d=f.form.find('[data-gcw-component\x3d"'+e+'"]').filter(":not(.gcw-component-initialized)"),c=d.length,k=[];for(a;a<c;a++){var r=d[a];r[e]||(k.push(r[e]=new b(r,f)),g(r).addClass("gcw-component-initialized"))}return k}}});
define("gcw-step-input",["uitk","jquery"],function(g,f){function e(a,d){this.componentName="gcw-step-input";this.element=a;this.gcwForm=d;this.initialized=!1;a&&(this.options=b,this.init())}var b={increaseValue:"1",decreaseValue:"-1"};e.prototype={constructor:e,init:function(){var a=this,b=a.element,c=f(a.element),e=!0;a.inputElem=b.querySelector(".uitk-step-input-input");a.$inputElem=f(a.inputElem);a.gcwFormFeatureName=a.$inputElem.data("gcw-feature-name");a.min=parseInt(a.inputElem.min,10);a.max=parseInt(a.inputElem.max,10);a.value=parseInt(a.inputElem.value||0,10);a.$minusBtn=c.find(".uitk-step-input-minus");a.$plusBtn=c.find(".uitk-step-input-plus");a.valueElem=b.querySelector(".uitk-step-input-value");b.classList.add("gcw-step-input");a.inputElem.setAttribute("type","hidden");a.$plusBtn.on("click",a._increaseCount.bind(a));a.$minusBtn.on("click",a._decreaseCount.bind(a));a.$inputElem.on("input",function(){var b=a.value,c=f(this).val();a._changeCount(c-b,!0)});e=a.value>=a.min&&a.value<=a.max;a.$minusBtn.prop("disabled",!1);a.$plusBtn.prop("disabled",!1);e?(a.valueElem.innerHTML=a.value,a.value<=a.min&&a.$minusBtn.prop("disabled",!0),a.value>=a.max&&a.$plusBtn.prop("disabled",!0)):(a.value=a.max,a.valueElem.innerHTML=a.value,a.$plusBtn.prop("disabled",!0),a.$inputElem.val(a.value));a._publishUpdate();a.initialized=!0},_publishUpdate:function(){this.gcwFormFeatureName!==this.$inputElem.data("gcw-feature-name")&&(this.gcwFormFeatureName=this.$inputElem.data("gcw-feature-name"));var a=this.gcwFormFeatureName.split("."),b=1<a.length?a[0]:void 0;if(b){void 0===this.gcwForm[b]&&(this.gcwForm[b]={});var c=a[1];this.gcwForm[b][c]=this.value}else this.gcwForm[c]=this.value;g.publish("gcw-step-input-updated",{gcwFeatureName:c,value:this.value});g.publish("gcw-form-feature-updated",{gcwFeature:c,value:this.value})},_changeCount:function(a,b){var c=this.value+parseInt(a,10);c>=this.min&&c<=this.max?(this.inputElem.value=c,b?f(this.inputElem).trigger("change.step-input.reflection"):f(this.inputElem).trigger("change"),this.value=this.valueElem.innerHTML=c,this._publishUpdate(),0!==a&&(0>parseInt(a,10)?(c<=this.min&&this.$minusBtn.prop("disabled",!0),this.$plusBtn.is(":disabled")&&this.$plusBtn.prop("disabled",!1)):(c>=this.max&&this.$plusBtn.prop("disabled",!0),this.$minusBtn.is(":disabled")&&this.$minusBtn.prop("disabled",!1)))):this.$inputElem.val(this.value)},_increaseCount:function(){this._changeCount(this.options.increaseValue,!1)},_decreaseCount:function(){this._changeCount(this.options.decreaseValue,!1)}};return e});define("gcw-traveler-amount-select",["uitk","jquery"],function(g,f){function e(b,a){this.componentName="gcw-traveler-amount-select";this.$component=f(b);this.$amountFields=this.$component.find(".gcw-amount-field");this.gcwForm=a;this.$form=a.form;this.initialized=!1;this.isSingleRoom=!0===this.$component.data("gcw-single-room");this.$amountRooms=this.$amountFields.filter(".rooms");this.$amountAdults=this.$amountFields.filter(".adults");this.$amountChildren=this.$amountFields.filter(".children");this.$closestTravelerSelector=this.$component.closest(".gcw-travel-selector-wrapper");this.$totalRoomsConfigField=this.$closestTravelerSelector.find(".gcw-traveler-selector-num-rooms");this.$roomsTitles=this.$component.next().find(".title-amount");b&&this.init()}e.prototype={constructor:e,init:function(){var b=this;b.$component.addClass("gcw-traveler-amount-select");g.subscribe("gcw-step-input-first-load-complete",function(){b._getTotalTravelers.bind(b)()});b.$closestTravelerSelector.on("change, change.step-input.reflection",".gcw-traveler-selector-num-adults",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("change, change.step-input.reflection",".gcw-traveler-selector-num-children",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("change",".gcw-traveler-selector-num-rooms",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("input",".gcw-traveler-selector-num-rooms",b._getTotalTravelers.bind(b));b._getTotalTravelers();b.initialized=!0},_getTotalTravelers:function(b){var a=this,d=a.$totalRoomsConfigField.val();a.totalRooms=0;a.totalAdults=0;a.totalChildren=0;a.totalTravelers=0;b=a.$closestTravelerSelector.find(".gcw-traveler-selector-num-adults");var c=a.$closestTravelerSelector.find(".gcw-traveler-selector-num-children");b.each(function(b,c){a.totalAdults+=f(c).val()?parseInt(f(c).val(),10):0});c.each(function(b,c){a.totalChildren+=f(c).val()?parseInt(f(c).val(),10):0});a.totalRooms="group"===d?9:parseInt(a.$totalRoomsConfigField.val(),10)||1;a.totalTravelers=a.totalAdults+a.totalChildren;a._setDataAttributes();a._setAmountOfTravelers()},_setAmountOfTravelers:function(){var b=8<this.totalRooms?this.ninePlusLabel:this.totalRooms,a=this.$amountRooms.data("rooms-label"),d=this.$amountRooms.data("room-label"),c=this.$amountRooms.data("nine-plus-label"),e=this.$amountAdults.data("adults-label"),f=this.$amountAdults.data("adult-label"),g=this.$amountChildren.data("children-label"),l=this.$amountChildren.data("child-label");this.$amountAdults.length&&(e=1<this.totalAdults||0===this.totalAdults?window.format.apply({},[e,this.totalAdults]):f,this.$amountAdults.html(e+","));this.$amountChildren.length&&(g=1<this.totalChildren||0===this.totalChildren?window.format.apply({},[g,this.totalChildren]):l,this.$amountRooms.length?this.$amountChildren.html(" "+g+", "):this.$amountChildren.html(" "+g));this.$amountRooms.length&&(b=1<this.totalRooms?8<this.totalRooms?c:window.format.apply({},[a,b]):d,this.$amountRooms.html(b));this._setInitialValues()},_setDataAttributes:function(){this.$component.data("adults",this.totalAdults).data("children",this.totalChildren).data("total-travelers",this.totalTravelers).data("total-rooms",this.totalRooms)},_setInitialValues:function(){this.$roomsTitles.html(this.$roomsTitles.text().replace("{0}","1"))}};return e});
define("gcw-clone-field",["uitk","jquery","handlebars","remove-field-template.hbs","uitk_dropdown"],function(g,f,e,b,a){function d(a,b){this.componentName="gcw-clone-field";this.$component=f(a);this.gcwForm=b;this.$form=b.form;this.initialized=!1;this.clonesAllowed=!0;this.isNinePlusRoomsEnabled=!1;this.$configurationField=this.$component.find("input.gcw-clone-field-configuration");this.targetFieldSelector=this.$configurationField.data("target-field-selector");this.$targetField=this.$form.find(this.targetFieldSelector);this.targetPubEventName=this.$configurationField.data("gcw-pub-event-name");this.maxClonesAllowed=parseInt(this.$configurationField.data("max-clones-allowed")||"0");this.originalMaxClonesAllowed=this.$configurationField.data("original-max-clones-allowed")||this.maxClonesAllowed;this.initialClonesNeeded=parseInt(this.$configurationField.val()-1);isNaN(this.initialClonesNeeded)&&(this.initialClonesNeeded="group"===this.$configurationField.val()?8:0);this.clonedElementsCount=0;this.clonedElements=[];this.removeButtonText=this.$configurationField.data("remove-button-text");this.removeButtonTitle=this.$configurationField.data("remove-button-title");this.gcwFormFeatureName=this.$configurationField.data("gcw-feature-name");this.ninePlusRoomsEnabled=this.$configurationField.data("gcw-nine-plus-rooms-enabled");this.$closestTravelerSelector=this.$component.closest(".gcw-travel-selector-wrapper");this.$closestMenu=this.$closestTravelerSelector.find('[data-control\x3d"menu"]');this.initialTitle=f(this.$configurationField.data("amount-selector")).text().split(" ");a&&(this.$component.addClass("gcw-component-initialized"),this.init())}d.prototype={constructor:d,init:function(){var a=this;a.$configurationField.on("input",function(b){b=parseInt(f(this).val()-1)-a.clonedElementsCount;1===b?a._cloneField():-1===b?(b=a.$configurationField.data("last-item-removed"),a._removeField(b)):a.$configurationField.val(a.clonedElementsCount+1)});a.$configurationField.on("cloneField.maxClonesAllowed.update",function(b){b=f(b.target).data("max-clones-allowed");a._updateMaxClonesAllowed(b)});a.$configurationField.on("cloneField.maxClonesAllowed.restore",a._restoreMaxClonesAllowed.bind(a));a.$component.on("click",function(b){b.preventDefault();b.stopPropagation();a._cloneField();a.clonesAllowed&&(a.$configurationField.val(a.clonedElementsCount+1),a.$configurationField.trigger("change"))});a.$closestTravelerSelector.on("click",function(b){a.isNinePlusRoomsEnabled&&a._isNinePlusRoomsOff()});g.subscribe("gcw-clone-field.item.removed",function(a,b){this.$configurationField.data("last-item-removed",b.indexRemoved)}.bind(a));a._cloneFields(a.initialClonesNeeded);a.$component.addClass("gcw-clone-field");a.initialized=!0},_cloneFields:function(){for(var a=0;a<this.initialClonesNeeded;a++)this._cloneField();g.publish("gcw-step-input-first-load-complete",{})},_cloneField:function(){if(this.clonedElementsCount<this.maxClonesAllowed){this.clonesAllowed=!0;this.clonedElementsCount++;var a=this.$targetField.clone();this._cleanupEl(a);this._addNewFieldsToFieldsCollection(a);this._loadStoredData(a);this.clonedElements.push(a);this.$component.before(a);this._attachRemoveField(a);this._initComponents(a);a.addClass("gcw-cloned-field");this._publishChange()}else this.clonesAllowed=!1,this.$configurationField.val(this.clonedElementsCount+1),7===this.clonedElementsCount&&this.ninePlusRoomsEnabled&&this._isNinePlusRoomsOn()},_isNinePlusRoomsOn:function(){this.$closestMenu.uitk_dropDown("close");this.$configurationField.val("group");this.$configurationField.trigger("change");this.isNinePlusRoomsEnabled=!0},_isNinePlusRoomsOff:function(){this.$configurationField.val(this.clonedElementsCount+1);this.$configurationField.trigger("change");this.isNinePlusRoomsEnabled=!1},_addNewFieldsToFieldsCollection:function(a){var b=this.gcwForm.fieldsCollection;a.find("input","select","textarea").each(function(){b.add(f(this))})},_removeFieldsFromFieldsCollectionInstance:function(a){var b=this.gcwForm.fieldsCollection;a.find("input","select","textarea").each(function(){b.remove(f(this))})},_removeField:function(a){var b=this.clonedElements.length===a+1,c=this.clonedElements[a];c.remove();this._removeFieldsFromFieldsCollectionInstance(c);this.clonedElements.splice(a,1);this.clonedElementsCount--;this._adjustCurrentElements(b,a);this._publishChange()},_cleanupEl:function(a){var b=this,c=b.$configurationField.data("clear-value-selector");c=a.find(c);var d=b.$configurationField.data("amount-selector"),e=a.find(".gcw-update-feature-name");d=a.find(d);var g=a.find(".gcw-child-field");a=a.find(".gcw-infant-field");d.text().split(" ");1<b.initialTitle.length&&d.text(b.initialTitle[0]+" "+parseInt(b.clonedElementsCount+1));c.length&&c.each(function(a,c){var d=f(c);d.val(d.attr("min"));if(d.data("gcw-storeable-name")){var e=d.data("gcw-storeable-name"),g=e.split("-");g=parseInt(g[g.length-1]);e=e.replace(g,b.clonedElementsCount+1);d.attr("data-gcw-storeable-name",e);d.data("gcw-storeable-name",e)}});e.length&&e.each(function(a,c){var d=b.$configurationField.data("update-data-feature-name"),e=f(c).data(d);if(e){var g=e.split("_");g=parseInt(g[g.length-1]);f(c).data(d,e.replace(g,b.clonedElementsCount+1))}});g.addClass("gcw-disabled");a.addClass("gcw-disabled")},_attachRemoveField:function(a){var c=this,d=c.$configurationField.data("target-title-wrapper-selector");d=a.find(d);var e=b(c._buildRemoveFieldContext());d.append(e);a.find(".gcw-remove-cloned-field").on("click",function(a){a.preventDefault();a.stopPropagation();a=f(this).data("cloned-element-index");c._removeField(a);c.$configurationField.val(c.clonedElementsCount+1);c.$configurationField.trigger("change")})},_adjustCurrentElements:function(a,b){var c=this,d=c.clonedElements.slice(b),e=c.clonedElements.length-d.length;a||f.each(d,function(a,b){var d=c.$configurationField.data("amount-selector");d=b.find(d);var g=b.find(".gcw-remove-cloned-field"),k=c.$configurationField.data("clear-value-selector");k=b.find(k);var l=b.find(".gcw-update-feature-name"),m=e+2,n=d.text().split(" ");d.text(n[0]+" "+m);g.data("cloned-element-index",e);g.attr("data-cloned-element-index",e);k.length&&k.each(function(a,b){var c=f(b);if(c.data("gcw-storeable-name")){var d=c.data("gcw-storeable-name"),e=d.split("-");e=parseInt(e[e.length-1]);d=d.replace(e,m);c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d)}});l.length&&l.each(function(a,b){var d=c.$configurationField.data("update-data-feature-name"),e=f(b).data(d);if(e){var g=e.split("_");g=parseInt(g[g.length-1]);e=e.replace(g,m);f(b).data(d,e);f(b).trigger("input")}});e++});g.publish("gcw-clone-field.item.removed",{indexRemoved:b})},_buildRemoveFieldContext:function(){return{index:this.clonedElementsCount-1,title:this.removeButtonTitle,text:this.removeButtonText}},_initComponents:function(a){this._restoreComponents(a);this.gcwForm.initGcwComponents()},_loadStoredData:function(a){var b=this;a.find(".gcw-storeable").each(function(){var a=f(this),c=a.data("gcw-storeable-name"),d=b.gcwForm,e=d.storedData;(c=e&&e[c]||void 0)&&a.val(c);c&&a.hasClass("gcw-toggles-fields")&&d.selectToggle(a)})},_restoreComponents:function(a){a.find(".gcw-component").removeClass("gcw-component-initialized")},_publishChange:function(){var a=this.gcwFormFeatureName.split("."),b=1<a.length?a[0]:void 0,d=this.clonedElementsCount+1,e=this.targetPubEventName;b?(void 0===this.gcwForm[b]&&(this.gcwForm[b]={}),a=a[1],this.gcwForm[b][a]=d):this.gcwForm[a]=d;e&&g.publish(e,{})},_updateMaxClonesAllowed:function(a){this.maxClonesAllowed=a},_restoreMaxClonesAllowed:function(){this.maxClonesAllowed=this.originalMaxClonesAllowed}};return d});
define("remove-field-template.hbs",["handlebars"],function(g){var f=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(e,b,a,d,c){var f;return'\x3ca href\x3d"#"\n  role\x3d"button"\n  id\x3d""\n  class\x3d"secondary gcw-remove-cloned-field"\n  data-cloned-element-index\x3d'+e.escapeExpression((f=null!=(f=a.index||(null!=b?b.index:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"index",hash:{},data:c}):f))+'\n  \x3e\n  \x3cspan class\x3d"icon" aria-hidden\x3d"true" title\x3d"'+e.escapeExpression((f=null!=(f=a.title||(null!=b?b.title:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"title",hash:{},data:c}):f))+'"\x3e\x3c/span\x3e'+e.escapeExpression((f=null!=(f=a.text||(null!=b?b.text:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"text",hash:{},data:c}):f))+"\n\x3c/a\x3e\n"},useData:!0});g.templates=g.templates||{};g.templates["remove-field-template"]=f;g.partials=g.partials||{};return g.partials["remove-field-template"]=f});
//# sourceMappingURL=script.js.map